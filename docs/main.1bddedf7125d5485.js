"use strict";var SO=Object.defineProperty,xO=Object.defineProperties,MO=Object.getOwnPropertyDescriptors,mM=Object.getOwnPropertySymbols,RO=Object.prototype.hasOwnProperty,NO=Object.prototype.propertyIsEnumerable,yM=(rt,Ie,k)=>Ie in rt?SO(rt,Ie,{enumerable:!0,configurable:!0,writable:!0,value:k}):rt[Ie]=k,vM=(rt,Ie)=>{for(var k in Ie||(Ie={}))RO.call(Ie,k)&&yM(rt,k,Ie[k]);if(mM)for(var k of mM(Ie))NO.call(Ie,k)&&yM(rt,k,Ie[k]);return rt},_M=(rt,Ie)=>xO(rt,MO(Ie));(self.webpackChunklogin_fireBase=self.webpackChunklogin_fireBase||[]).push([[179],{2011:(rt,Ie,k)=>{k.d(Ie,{Dh:()=>oe,GT:()=>ge,cc:()=>Se,hO:()=>Ue,on:()=>q,pX:()=>ae,xv:()=>me});var p=k(5e3),j=k(127),O=k(5813);rt=k.hmd(rt);const ie=["ngOnDestroy"],ae=(De,qe,He,Re={})=>new Proxy(De,{get:(Ce,Ee)=>He.runOutsideAngular(()=>{var Ge;if(De[Ee])return(null===(Ge=null==Re?void 0:Re.spy)||void 0===Ge?void 0:Ge.get)&&Re.spy.get(Ee,De[Ee]),De[Ee];if(ie.indexOf(Ee)>-1)return()=>{};const ee=qe.toPromise().then(he=>{const _e=he&&he[Ee];return"function"==typeof _e?_e.bind(he):_e&&_e.then?_e.then(Z=>He.run(()=>Z)):He.run(()=>_e)});return new Proxy(()=>{},{get:(he,_e)=>ee[_e],apply:(he,_e,Z)=>ee.then(X=>{var ne;const ye=X&&X(...Z);return(null===(ne=null==Re?void 0:Re.spy)||void 0===ne?void 0:ne.apply)&&Re.spy.apply(Ee,Z,ye),ye})})})}),ge=(De,qe)=>{qe.forEach(He=>{Object.getOwnPropertyNames(He.prototype||He).forEach(Re=>{Object.defineProperty(De.prototype,Re,Object.getOwnPropertyDescriptor(He.prototype||He,Re))})})};class fe{constructor(qe){return qe}}const oe=new p.OlP("angularfire2.app.options"),me=new p.OlP("angularfire2.app.name");function q(De,qe,He){const Ce="object"==typeof He&&He||{};Ce.name=Ce.name||"string"==typeof He&&He||"[DEFAULT]";const Ge=j.Z.apps.filter(ee=>ee&&ee.name===Ce.name)[0]||qe.runOutsideAngular(()=>j.Z.initializeApp(De,Ce));try{JSON.stringify(De)!==JSON.stringify(Ge.options)&&H("error",`${Ge.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ee){}return new fe(Ge)}const H=(De,...qe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[De](...qe)},te={provide:fe,useFactory:q,deps:[oe,p.R0b,[new p.FiY,me]]};let Ue=(()=>{class De{constructor(He){j.Z.registerVersion("angularfire",O.q4.full,"core"),j.Z.registerVersion("angularfire",O.q4.full,"app-compat"),j.Z.registerVersion("angular",p.q4F.full,He.toString())}static initializeApp(He,Re){return{ngModule:De,providers:[{provide:oe,useValue:He},{provide:me,useValue:Re}]}}}return De.\u0275fac=function(He){return new(He||De)(p.LFG(p.Lbi))},De.\u0275mod=p.oAB({type:De}),De.\u0275inj=p.cJS({providers:[te]}),De})();function Se(De,qe,He,Re,Ce){const[,Ee,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===De)||[];if(Ee)return function Pe(De,qe){try{return De.toString()===qe.toString()}catch(He){return De===qe}}(Ce,Ge)||(pe("error",`${qe} was already initialized on the ${He} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ce,was:Ge})),Ee;{const ee=Re();return globalThis.\u0275AngularfireInstanceCache.push([De,ee,Ce]),ee}}const je=!!rt.hot,pe=(De,...qe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[De](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(rt,Ie,k)=>{k.d(Ie,{q4:()=>gm,iC:()=>ou,HU:()=>su,vb:()=>ya,JM:()=>Oo});var p=k(5e3),j=k(5867),O=k(5861),ie=k(9681),ae=k(2090),ge=k(4859),fe=k(1877),oe=k(8766);const me="@firebase/installations",q="0.5.16",te=`w:${q}`,Ue="FIS_v2",qe=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function He(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function Re({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ce(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Ee(D,C){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(D,C){const V=(yield C.json()).error;return qe.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function ee({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function he(D,{refreshToken:C}){const S=ee(D);return S.append("Authorization",function ne(D){return`${Ue} ${D}`}(C)),S}function _e(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function ye(D,C){return le.apply(this,arguments)}function le(){return(le=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:S}){const V=Re(D),Y=ee(D),re=C.getImmediate({optional:!0});if(re){const wt=yield re.getHeartbeatsHeader();wt&&Y.append("x-firebase-client",wt)}const Ze={method:"POST",headers:Y,body:JSON.stringify({fid:S,authVersion:Ue,appId:D.appId,sdkVersion:te})},ht=yield _e(()=>fetch(V,Ze));if(ht.ok){const wt=yield ht.json();return{fid:wt.fid||S,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Ce(wt.authToken)}}throw yield Ee("Create Installation",ht)})).apply(this,arguments)}function ke(D){return new Promise(C=>{setTimeout(C,D)})}const Jt=/^[cdef][\w-]{21}$/;function ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const S=function an(D){return function ut(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Jt.test(S)?S:""}catch(D){return""}}function vn(D){return`${D.appName}!${D.appId}`}const un=new Map;function Xt(D,C){const S=vn(D);bn(S,C),function Fr(D,C){const S=function Sn(){return!qr&&"BroadcastChannel"in self&&(qr=new BroadcastChannel("[Firebase] FID Change"),qr.onmessage=D=>{bn(D.data.key,D.data.fid)}),qr}();S&&S.postMessage({key:D,fid:C}),function qi(){0===un.size&&qr&&(qr.close(),qr=null)}()}(S,C)}function bn(D,C){const S=un.get(D);if(S)for(const V of S)V(C)}let qr=null;const Vn="firebase-installations-store";let Ni=null;function pt(){return Ni||(Ni=(0,oe.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Vn)}})),Ni}function dr(D,C){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(D,C){const S=vn(D),Y=(yield pt()).transaction(Vn,"readwrite"),re=Y.objectStore(Vn),Te=yield re.get(S);return yield re.put(C,S),yield Y.done,(!Te||Te.fid!==C.fid)&&Xt(D,C.fid),C})).apply(this,arguments)}function ln(D){return hr.apply(this,arguments)}function hr(){return(hr=(0,O.Z)(function*(D){const C=vn(D),V=(yield pt()).transaction(Vn,"readwrite");yield V.objectStore(Vn).delete(C),yield V.done})).apply(this,arguments)}function _r(D,C){return Er.apply(this,arguments)}function Er(){return(Er=(0,O.Z)(function*(D,C){const S=vn(D),Y=(yield pt()).transaction(Vn,"readwrite"),re=Y.objectStore(Vn),Te=yield re.get(S),Ze=C(Te);return void 0===Ze?yield re.delete(S):yield re.put(Ze,S),yield Y.done,Ze&&(!Te||Te.fid!==Ze.fid)&&Xt(D,Ze.fid),Ze})).apply(this,arguments)}function In(D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(D){let C;const S=yield _r(D.appConfig,V=>{const Y=zi(V),re=qt(D,Y);return C=re.registrationPromise,re.installationEntry});return""===S.fid?{installationEntry:yield C}:{installationEntry:S,registrationPromise:C}})).apply(this,arguments)}function zi(D){return Oi(D||{fid:ze(),registrationStatus:0})}function qt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(qe.create("app-offline"))};const S={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},V=function lt(D,C){return tt.apply(this,arguments)}(D,S);return{installationEntry:S,registrationPromise:V}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Ei(D)}:{installationEntry:C}}function tt(){return(tt=(0,O.Z)(function*(D,C){try{const S=yield ye(D,C);return dr(D.appConfig,S)}catch(S){throw He(S)&&409===S.customData.serverCode?yield ln(D.appConfig):yield dr(D.appConfig,{fid:C.fid,registrationStatus:0}),S}})).apply(this,arguments)}function Ei(D){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(D){let C=yield zt(D.appConfig);for(;1===C.registrationStatus;)yield ke(100),C=yield zt(D.appConfig);if(0===C.registrationStatus){const{installationEntry:S,registrationPromise:V}=yield In(D);return V||S}return C})).apply(this,arguments)}function zt(D){return _r(D,C=>{if(!C)throw qe.create("installation-not-found");return Oi(C)})}function Oi(D){return function Un(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function fn(D,C){return dt.apply(this,arguments)}function dt(){return(dt=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},S){const V=zr(D,S),Y=he(D,S),re=C.getImmediate({optional:!0});if(re){const wt=yield re.getHeartbeatsHeader();wt&&Y.append("x-firebase-client",wt)}const Ze={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},ht=yield _e(()=>fetch(V,Ze));if(ht.ok)return Ce(yield ht.json());throw yield Ee("Generate Auth Token",ht)})).apply(this,arguments)}function zr(D,{fid:C}){return`${Re(D)}/${C}/authTokens:generate`}function jt(D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(D,C=!1){let S;const V=yield _r(D.appConfig,re=>{if(!en(re))throw qe.create("not-registered");const Te=re.authToken;if(!C&&G(Te))return re;if(1===Te.requestStatus)return S=Qe(D,C),re;{if(!navigator.onLine)throw qe.create("app-offline");const Ze=W(re);return S=mt(D,Ze),Ze}});return S?yield S:V.authToken})).apply(this,arguments)}function Qe(D,C){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,C){let S=yield We(D.appConfig);for(;1===S.authToken.requestStatus;)yield ke(100),S=yield We(D.appConfig);const V=S.authToken;return 0===V.requestStatus?jt(D,C):V})).apply(this,arguments)}function We(D){return _r(D,C=>{if(!en(C))throw qe.create("not-registered");return function U(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function mt(D,C){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(D,C){try{const S=yield fn(D,C),V=Object.assign(Object.assign({},C),{authToken:S});return yield dr(D.appConfig,V),S}catch(S){if(!He(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const V=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield dr(D.appConfig,V)}else yield ln(D.appConfig);throw S}})).apply(this,arguments)}function en(D){return void 0!==D&&2===D.registrationStatus}function G(D){return 2===D.requestStatus&&!function B(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function W(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function L(){return(L=(0,O.Z)(function*(D){const C=D,{installationEntry:S,registrationPromise:V}=yield In(C);return V?V.catch(console.error):jt(C).catch(console.error),S.fid})).apply(this,arguments)}function Oe(){return(Oe=(0,O.Z)(function*(D,C=!1){const S=D;return yield Xe(S),(yield jt(S,C)).token})).apply(this,arguments)}function Xe(D){return at.apply(this,arguments)}function at(){return(at=(0,O.Z)(function*(D){const{registrationPromise:C}=yield In(D);C&&(yield C)})).apply(this,arguments)}function Qo(D){return qe.create("missing-app-config-values",{valueName:D})}const Wr="installations",Ft=D=>{const C=D.getProvider("app").getImmediate(),S=function ir(D){if(!D||!D.options)throw Qo("App Configuration");if(!D.name)throw Qo("App Name");const C=["projectId","apiKey","appId"];for(const S of C)if(!D.options[S])throw Qo(S);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:S,heartbeatServiceProvider:(0,ie._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},pn=D=>{const C=D.getProvider("app").getImmediate(),S=(0,ie._getProvider)(C,Wr).getImmediate();return{getId:()=>function R(D){return L.apply(this,arguments)}(S),getToken:Y=>function se(D){return Oe.apply(this,arguments)}(S,Y)}};(function Vr(){(0,ie._registerComponent)(new ge.wA(Wr,Ft,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("installations-internal",pn,"PRIVATE"))})(),(0,ie.registerVersion)(me,q),(0,ie.registerVersion)(me,q,"esm2017");const Wi="@firebase/remote-config",Rn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gl{constructor(C,S,V,Y){this.client=C,this.storage=S,this.storageCache=V,this.logger=Y}isCachedDataFresh(C,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-S,Y=V<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var S=this;return(0,O.Z)(function*(){const[V,Y]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(Y&&S.isCachedDataFresh(C.cacheMaxAgeMillis,V))return Y;C.eTag=Y&&Y.eTag;const re=yield S.client.fetch(C),Te=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Te.push(S.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Te),re})()}}function ja(D=navigator){return D.languages&&D.languages[0]||D.language}class qn{constructor(C,S,V,Y,re,Te){this.firebaseInstallations=C,this.sdkVersion=S,this.namespace=V,this.projectId=Y,this.apiKey=re,this.appId=Te}fetch(C){var S=this;return(0,O.Z)(function*(){var V,Y,re;const[Te,Ze]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},it={sdk_version:S.sdkVersion,app_instance_id:Te,app_instance_id_token:Ze,app_id:S.appId,language_code:ja()},kn={method:"POST",headers:bt,body:JSON.stringify(it)},tr=fetch(wt,kn),ro=new Promise((us,bi)=>{C.signal.addEventListener(()=>{const ls=new Error("The operation was aborted.");ls.name="AbortError",bi(ls)})});let Os;try{yield Promise.race([tr,ro]),Os=yield tr}catch(us){let bi="fetch-client-network";throw"AbortError"===(null===(V=us)||void 0===V?void 0:V.name)&&(bi="fetch-timeout"),Rn.create(bi,{originalErrorMessage:null===(Y=us)||void 0===Y?void 0:Y.message})}let ji=Os.status;const ko=Os.headers.get("ETag")||void 0;let as,Fo;if(200===Os.status){let us;try{us=yield Os.json()}catch(bi){throw Rn.create("fetch-client-parse",{originalErrorMessage:null===(re=bi)||void 0===re?void 0:re.message})}as=us.entries,Fo=us.state}if("INSTANCE_STATE_UNSPECIFIED"===Fo?ji=500:"NO_CHANGE"===Fo?ji=304:("NO_TEMPLATE"===Fo||"EMPTY_CONFIG"===Fo)&&(as={}),304!==ji&&200!==ji)throw Rn.create("fetch-status",{httpStatus:ji});return{status:ji,eTag:ko,config:as}})()}}class Ki{constructor(C,S){this.client=C,this.storage=S}fetch(C){var S=this;return(0,O.Z)(function*(){const V=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(C,V)})()}attemptFetch(C,{throttleEndTimeMillis:S,backoffCount:V}){var Y=this;return(0,O.Z)(function*(){yield function ql(D,C){return new Promise((S,V)=>{const Y=Math.max(C-Date.now(),0),re=setTimeout(S,Y);D.addEventListener(()=>{clearTimeout(re),V(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,S);try{const re=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),re}catch(re){if(!function Gf(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(re))throw re;const Te={throttleEndTimeMillis:Date.now()+(0,ae.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(Te),Y.attemptFetch(C,Te)}})()}}class zf{constructor(C,S,V,Y,re){this.app=C,this._client=S,this._storageCache=V,this._storage=Y,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Jo(D,C){var S;const V=D.target.error||void 0;return Rn.create(C,{originalErrorMessage:V&&(null===(S=V)||void 0===S?void 0:S.message)})}const vo="app_namespace_store";class Zl{constructor(C,S,V,Y=function Zf(){return new Promise((D,C)=>{var S;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Y=>{C(Jo(Y,"storage-open"))},V.onsuccess=Y=>{D(Y.target.result)},V.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(vo,{keyPath:"compositeKey"})}}catch(V){C(Rn.create("storage-open",{originalErrorMessage:null===(S=V)||void 0===S?void 0:S.message}))}})}()){this.appId=C,this.appName=S,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var S=this;return(0,O.Z)(function*(){const V=yield S.openDbPromise;return new Promise((Y,re)=>{var Te;const ht=V.transaction([vo],"readonly").objectStore(vo),wt=S.createCompositeKey(C);try{const bt=ht.get(wt);bt.onerror=it=>{re(Jo(it,"storage-get"))},bt.onsuccess=it=>{const kn=it.target.result;Y(kn?kn.value:void 0)}}catch(bt){re(Rn.create("storage-get",{originalErrorMessage:null===(Te=bt)||void 0===Te?void 0:Te.message}))}})})()}set(C,S){var V=this;return(0,O.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((re,Te)=>{var Ze;const wt=Y.transaction([vo],"readwrite").objectStore(vo),bt=V.createCompositeKey(C);try{const it=wt.put({compositeKey:bt,value:S});it.onerror=kn=>{Te(Jo(kn,"storage-set"))},it.onsuccess=()=>{re()}}catch(it){Te(Rn.create("storage-set",{originalErrorMessage:null===(Ze=it)||void 0===Ze?void 0:Ze.message}))}})})()}delete(C){var S=this;return(0,O.Z)(function*(){const V=yield S.openDbPromise;return new Promise((Y,re)=>{var Te;const ht=V.transaction([vo],"readwrite").objectStore(vo),wt=S.createCompositeKey(C);try{const bt=ht.delete(wt);bt.onerror=it=>{re(Jo(it,"storage-delete"))},bt.onsuccess=()=>{Y()}}catch(bt){re(Rn.create("storage-delete",{originalErrorMessage:null===(Te=bt)||void 0===Te?void 0:Te.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class _o{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const S=C.storage.getLastFetchStatus(),V=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),re=yield S;re&&(C.lastFetchStatus=re);const Te=yield V;Te&&(C.lastSuccessfulFetchTimestampMillis=Te);const Ze=yield Y;Ze&&(C.activeConfig=Ze)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function fm(){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Kf(){(0,ie._registerComponent)(new ge.wA("remote-config",function D(C,{instanceIdentifier:S}){const V=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,ae.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:re,apiKey:Te,appId:Ze}=V.options;if(!re)throw Rn.create("registration-project-id");if(!Te)throw Rn.create("registration-api-key");if(!Ze)throw Rn.create("registration-app-id");const ht=new Zl(Ze,V.name,S=S||"firebase"),wt=new _o(ht),bt=new fe.Yd(Wi);bt.logLevel=fe.in.ERROR;const it=new qn(Y,ie.SDK_VERSION,S,re,Te,Ze),kn=new Ki(it,ht),tr=new Gl(kn,ht,wt,bt),ro=new zf(V,tr,wt,ht,bt);return function dn(D){const C=(0,ae.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ro),ro},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Wi,"0.3.15"),(0,ie.registerVersion)(Wi,"0.3.15","esm2017")}();const Es="/firebase-messaging-sw.js",di="/firebase-cloud-messaging-push-scope",Eo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ta="google.c.a.c_id",Fd="google.c.a.c_l",Yf="google.c.a.ts",qs="google.c.a.e";var Qi=(()=>{return(D=Qi||(Qi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Qi;var D})();function Ii(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yl(D){const S=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(S),Y=new Uint8Array(V.length);for(let re=0;re<V.length;++re)Y[re]=V.charCodeAt(re);return Y}const Ir="fcm_token_details_db",Ql="fcm_token_object_Store";function Jl(D){return $a.apply(this,arguments)}function $a(){return $a=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Ir))return null;let C=null;return(yield(0,oe.X3)(Ir,5,{upgrade:(V=(0,O.Z)(function*(Y,re,Te,Ze){var ht;if(re<2||!Y.objectStoreNames.contains(Ql))return;const wt=Ze.objectStore(Ql),bt=yield wt.index("fcmSenderId").get(D);if(yield wt.clear(),bt)if(2===re){const it=bt;if(!it.auth||!it.p256dh||!it.endpoint)return;C={token:it.fcmToken,createTime:null!==(ht=it.createTime)&&void 0!==ht?ht:Date.now(),subscriptionOptions:{auth:it.auth,p256dh:it.p256dh,endpoint:it.endpoint,swScope:it.swScope,vapidKey:"string"==typeof it.vapidKey?it.vapidKey:Ii(it.vapidKey)}}}else if(3===re){const it=bt;C={token:it.fcmToken,createTime:it.createTime,subscriptionOptions:{auth:Ii(it.auth),p256dh:Ii(it.p256dh),endpoint:it.endpoint,swScope:it.swScope,vapidKey:Ii(it.vapidKey)}}}else if(4===re){const it=bt;C={token:it.fcmToken,createTime:it.createTime,subscriptionOptions:{auth:Ii(it.auth),p256dh:Ii(it.p256dh),endpoint:it.endpoint,swScope:it.swScope,vapidKey:Ii(it.vapidKey)}}}}),function(re,Te,Ze,ht){return V.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Ir),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Ha(C)?C:null;var V}),$a.apply(this,arguments)}function Ha(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Ji="firebase-messaging-store";let Pu=null;function mn(){return Pu||(Pu=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Ji)}})),Pu}function na(D){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(D){const C=Jn(D),V=yield(yield mn()).transaction(Ji).objectStore(Ji).get(C);if(V)return V;{const Y=yield Jl(D.appConfig.senderId);if(Y)return yield hn(D,Y),Y}})).apply(this,arguments)}function hn(D,C){return qa.apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(D,C){const S=Jn(D),Y=(yield mn()).transaction(Ji,"readwrite");return yield Y.objectStore(Ji).put(C,S),yield Y.done,C})).apply(this,arguments)}function ra(D){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(D){const C=Jn(D),V=(yield mn()).transaction(Ji,"readwrite");yield V.objectStore(Ji).delete(C),yield V.done})).apply(this,arguments)}function Jn({appConfig:D}){return D.appId}const Nn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Xi(D,C){return sr.apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*(D,C){var S;const V=yield Ds(D),Y=Ws(C),re={method:"POST",headers:V,body:JSON.stringify(Y)};let Te;try{Te=yield(yield fetch(Is(D.appConfig),re)).json()}catch(Ze){throw Nn.create("token-subscribe-failed",{errorInfo:null===(S=Ze)||void 0===S?void 0:S.toString()})}if(Te.error)throw Nn.create("token-subscribe-failed",{errorInfo:Te.error.message});if(!Te.token)throw Nn.create("token-subscribe-no-token");return Te.token})).apply(this,arguments)}function wo(D,C){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(D,C){var S;const V=yield Ds(D),Y=Ws(C.subscriptionOptions),re={method:"PATCH",headers:V,body:JSON.stringify(Y)};let Te;try{Te=yield(yield fetch(`${Is(D.appConfig)}/${C.token}`,re)).json()}catch(Ze){throw Nn.create("token-update-failed",{errorInfo:null===(S=Ze)||void 0===S?void 0:S.toString()})}if(Te.error)throw Nn.create("token-update-failed",{errorInfo:Te.error.message});if(!Te.token)throw Nn.create("token-update-no-token");return Te.token})).apply(this,arguments)}function ku(D,C){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,O.Z)(function*(D,C){var S;const Y={method:"DELETE",headers:yield Ds(D)};try{const Te=yield(yield fetch(`${Is(D.appConfig)}/${C}`,Y)).json();if(Te.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:Te.error.message})}catch(re){throw Nn.create("token-unsubscribe-failed",{errorInfo:null===(S=re)||void 0===S?void 0:S.toString()})}})).apply(this,arguments)}function Is({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ds(D){return yt.apply(this,arguments)}function yt(){return(yt=(0,O.Z)(function*({appConfig:D,installations:C}){const S=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function Ws({p256dh:D,auth:C,endpoint:S,vapidKey:V}){const Y={web:{endpoint:S,auth:C,p256dh:D}};return V!==Eo&&(Y.web.applicationPubKey=V),Y}const Wa=6048e5;function Xl(D){return ia.apply(this,arguments)}function ia(){return(ia=(0,O.Z)(function*(D){const C=yield Za(D.swRegistration,D.vapidKey),S={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Ii(C.getKey("auth")),p256dh:Ii(C.getKey("p256dh"))},V=yield na(D.firebaseDependencies);if(V){if(tc(V.subscriptionOptions,S))return Date.now()>=V.createTime+Wa?Ld(D,{token:V.token,createTime:Date.now(),subscriptionOptions:S}):V.token;try{yield ku(D.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return xe(D.firebaseDependencies,S)}return xe(D.firebaseDependencies,S)})).apply(this,arguments)}function ec(D){return Io.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(D){const C=yield na(D.firebaseDependencies);C&&(yield ku(D.firebaseDependencies,C.token),yield ra(D.firebaseDependencies));const S=yield D.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function Ld(D,C){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*(D,C){try{const S=yield wo(D.firebaseDependencies,C),V=Object.assign(Object.assign({},C),{token:S,createTime:Date.now()});return yield hn(D.firebaseDependencies,V),S}catch(S){throw yield ec(D),S}})).apply(this,arguments)}function xe(D,C){return $t.apply(this,arguments)}function $t(){return($t=(0,O.Z)(function*(D,C){const V={token:yield Xi(D,C),createTime:Date.now(),subscriptionOptions:C};return yield hn(D,V),V.token})).apply(this,arguments)}function Za(D,C){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yl(C)})})).apply(this,arguments)}function tc(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function es(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Fi(D,C){if(!C.notification)return;D.notification={};const S=C.notification.title;S&&(D.notification.title=S);const V=C.notification.body;V&&(D.notification.body=V);const Y=C.notification.image;Y&&(D.notification.image=Y);const re=C.notification.icon;re&&(D.notification.icon=re)}(C,D),function Fu(D,C){!C.data||(D.data=C.data)}(C,D),function sa(D,C){var S,V,Y,re,Te;if(!C.fcmOptions&&!(null===(S=C.notification)||void 0===S?void 0:S.click_action))return;D.fcmOptions={};const Ze=null!==(Y=null===(V=C.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Y?Y:null===(re=C.notification)||void 0===re?void 0:re.click_action;Ze&&(D.fcmOptions.link=Ze);const ht=null===(Te=C.fcmOptions)||void 0===Te?void 0:Te.analytics_label;ht&&(D.fcmOptions.analyticsLabel=ht)}(C,D),C}function Vd(D){return"object"==typeof D&&!!D&&ta in D}function nc(D,C){const S=[];for(let V=0;V<D.length;V++)S.push(D.charAt(V)),V<C.length&&S.push(C.charAt(V));return S.join("")}function Zs(D){return Nn.create("missing-app-config-values",{valueName:D})}nc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class or{constructor(C,S,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function rc(D){if(!D||!D.options)throw Zs("App Configuration Object");if(!D.name)throw Zs("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:S}=D;for(const V of C)if(!S[V])throw Zs(V);return{appName:D.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:S,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Li(D){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(Es,{scope:di}),D.swRegistration.update().catch(()=>{})}catch(S){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=S)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function bo(D,C){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Li(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Ud(D,C){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Eo)})).apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(D,C){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield Ud(D,null==C?void 0:C.vapidKey),yield bo(D,null==C?void 0:C.serviceWorkerRegistration),Xl(D)})).apply(this,arguments)}function Lu(D,C,S){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(D,C,S){const V=sc(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:S[ta],message_name:S[Fd],message_time:S[Yf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sc(D){switch(D){case Qi.NOTIFICATION_CLICKED:return"notification_open";case Qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vu(){return(Vu=(0,O.Z)(function*(D,C){const S=C.data;if(!S.isFirebaseMessaging)return;D.onMessageHandler&&S.messageType===Qi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(es(S)):D.onMessageHandler.next(es(S)));const V=S.data;Vd(V)&&"1"===V[qs]&&(yield Lu(D,S.messageType,V))})).apply(this,arguments)}const aa="@firebase/messaging",Ks=D=>{const C=new or(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function oc(D,C){return Vu.apply(this,arguments)}(C,S)),C},ac=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:V=>function ic(D,C){return oa.apply(this,arguments)}(C,V)}};function Ka(){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,O.Z)(function*(){try{yield(0,ae.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bd(){(0,ie._registerComponent)(new ge.wA("messaging",Ks,"PUBLIC")),(0,ie._registerComponent)(new ge.wA("messaging-internal",ac,"PRIVATE")),(0,ie.registerVersion)(aa,"0.11.0"),(0,ie.registerVersion)(aa,"0.11.0","esm2017")}();const uc="analytics",Qf="firebase_id",la="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ca="https://www.googletagmanager.com/gtag/js",Xn=new fe.Yd("@firebase/analytics");function cc(D){return Promise.all(D.map(C=>C.catch(S=>S)))}function Jf(D,C){const S=document.createElement("script");S.src=`${ca}?l=${D}&id=${C}`,S.async=!0,document.head.appendChild(S)}function Ao(D,C,S,V,Y,re){return dc.apply(this,arguments)}function dc(){return(dc=(0,O.Z)(function*(D,C,S,V,Y,re){const Te=V[Y];try{if(Te)yield C[Te];else{const ht=(yield cc(S)).find(wt=>wt.measurementId===Y);ht&&(yield C[ht.appId])}}catch(Ze){Xn.error(Ze)}D("config",Y,re)})).apply(this,arguments)}function Bu(D,C,S,V,Y){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,O.Z)(function*(D,C,S,V,Y){try{let re=[];if(Y&&Y.send_to){let Te=Y.send_to;Array.isArray(Te)||(Te=[Te]);const Ze=yield cc(S);for(const ht of Te){const wt=Ze.find(it=>it.measurementId===ht),bt=wt&&C[wt.appId];if(!bt){re=[];break}re.push(bt)}}0===re.length&&(re=Object.values(C)),yield Promise.all(re),D("event",V,Y||{})}catch(re){Xn.error(re)}})).apply(this,arguments)}function xn(D){const C=window.document.getElementsByTagName("script");for(const S of Object.values(C))if(S.src&&S.src.includes(ca)&&S.src.includes(D))return S;return null}const Jr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),So=new class Hu{constructor(C={},S=1e3){this.throttleMetadata=C,this.intervalMillis=S}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,S){this.throttleMetadata[C]=S}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function xo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function da(D){return tn.apply(this,arguments)}function tn(){return(tn=(0,O.Z)(function*(D){var C;const{appId:S,apiKey:V}=D,Y={method:"GET",headers:xo(V)},re=la.replace("{app-id}",S),Te=yield fetch(re,Y);if(200!==Te.status&&304!==Te.status){let Ze="";try{const ht=yield Te.json();(null===(C=ht.error)||void 0===C?void 0:C.message)&&(Ze=ht.error.message)}catch(ht){}throw Jr.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:Ze})}return Te.json()})).apply(this,arguments)}function br(D){return It.apply(this,arguments)}function It(){return(It=(0,O.Z)(function*(D,C=So,S){const{appId:V,apiKey:Y,measurementId:re}=D.options;if(!V)throw Jr.create("no-app-id");if(!Y){if(re)return{measurementId:re,appId:V};throw Jr.create("no-api-key")}const Te=C.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new qu;return setTimeout((0,O.Z)(function*(){Ze.abort()}),void 0!==S?S:6e4),Qa({appId:V,apiKey:Y,measurementId:re},Te,Ze,C)})).apply(this,arguments)}function Qa(D,C,S){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:S},V,Y=So){var re,Te;const{appId:Ze,measurementId:ht}=D;try{yield Hd(V,C)}catch(wt){if(ht)return Xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null===(re=wt)||void 0===re?void 0:re.message}]`),{appId:Ze,measurementId:ht};throw wt}try{const wt=yield da(D);return Y.deleteThrottleMetadata(Ze),wt}catch(wt){const bt=wt;if(!Gu(bt)){if(Y.deleteThrottleMetadata(Ze),ht)return Xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ht} provided in the "measurementId" field in the local Firebase config. [${null==bt?void 0:bt.message}]`),{appId:Ze,measurementId:ht};throw wt}const it=503===Number(null===(Te=null==bt?void 0:bt.customData)||void 0===Te?void 0:Te.httpStatus)?(0,ae.$s)(S,Y.intervalMillis,30):(0,ae.$s)(S,Y.intervalMillis),kn={throttleEndTimeMillis:Date.now()+it,backoffCount:S+1};return Y.setThrottleMetadata(Ze,kn),Xn.debug(`Calling attemptFetch again in ${it} millis`),Qa(D,kn,V,Y)}})).apply(this,arguments)}function Hd(D,C){return new Promise((S,V)=>{const Y=Math.max(C-Date.now(),0),re=setTimeout(S,Y);D.addEventListener(()=>{clearTimeout(re),V(Jr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Gu(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class qu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Ja,$n;function ar(){return(ar=(0,O.Z)(function*(D,C,S,V,Y){if(Y&&Y.global)D("event",S,V);else{const re=yield C;D("event",S,Object.assign(Object.assign({},V),{send_to:re}))}})).apply(this,arguments)}function ss(D){$n=D}function fc(D){Ja=D}function pc(){return os.apply(this,arguments)}function os(){return(os=(0,O.Z)(function*(){var D;if(!(0,ae.hl)())return Xn.warn(Jr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(C){return Xn.warn(Jr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function ha(){return(ha=(0,O.Z)(function*(D,C,S,V,Y,re,Te){var Ze;const ht=br(D);ht.then(tr=>{S[tr.measurementId]=tr.appId,D.options.measurementId&&tr.measurementId!==D.options.measurementId&&Xn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>Xn.error(tr)),C.push(ht);const wt=pc().then(tr=>{if(tr)return V.getId()}),[bt,it]=yield Promise.all([ht,wt]);xn(re)||Jf(re,bt.measurementId),$n&&(Y("consent","default",$n),ss(void 0)),Y("js",new Date);const kn=null!==(Ze=null==Te?void 0:Te.config)&&void 0!==Ze?Ze:{};return kn.origin="firebase",kn.update=!0,null!=it&&(kn[Qf]=it),Y("config",bt.measurementId,kn),Ja&&(Y("set",Ja),fc(void 0)),bt.measurementId})).apply(this,arguments)}class zu{constructor(C){this.app=C}_delete(){return delete ur[this.app.options.appId],Promise.resolve()}}let ur={},eu=[];const Mo={};let xs,er,Ss="dataLayer",fa=!1;function Zu(D,C,S){!function Ro(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),S=Jr.create("invalid-analytics-context",{errorInfo:C});Xn.warn(S.message)}}();const V=D.options.appId;if(!V)throw Jr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Jr.create("no-api-key");Xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ur[V])throw Jr.create("already-exists",{id:V});if(!fa){!function ns(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ss);const{wrappedGtag:re,gtagCore:Te}=function Xf(D,C,S,V,Y){let re=function(...Te){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(re=window[Y]),window[Y]=function ju(D,C,S,V){function re(){return(re=(0,O.Z)(function*(Te,Ze,ht){try{"event"===Te?yield Bu(D,C,S,Ze,ht):"config"===Te?yield Ao(D,C,S,V,Ze,ht):"consent"===Te?D("consent","update",ht):D("set",Ze)}catch(wt){Xn.error(wt)}})).apply(this,arguments)}return function Y(Te,Ze,ht){return re.apply(this,arguments)}}(re,D,C,S),{gtagCore:re,wrappedGtag:window[Y]}}(ur,eu,Mo,Ss,"gtag");er=re,xs=Te,fa=!0}return ur[V]=function gc(D,C,S,V,Y,re,Te){return ha.apply(this,arguments)}(D,eu,Mo,C,xs,Ss,S),new zu(D)}function mc(){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}const Cn="@firebase/analytics";!function Pn(){(0,ie._registerComponent)(new ge.wA(uc,(C,{options:S})=>Zu(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,ie._registerComponent)(new ge.wA("analytics-internal",function D(C){try{const S=C.getProvider(uc).getImmediate();return{logEvent:(V,Y,re)=>function Ms(D,C,S,V){D=(0,ae.m9)(D),function Vi(D,C,S,V,Y){return ar.apply(this,arguments)}(er,ur[D.app.options.appId],C,S,V).catch(Y=>Xn.error(Y))}(S,V,Y,re)}}catch(S){throw Jr.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,ie.registerVersion)(Cn,"0.8.4"),(0,ie.registerVersion)(Cn,"0.8.4","esm2017")}();var Wd=k(4408),Ur=k(7565);const No=new class pr extends Ur.v{}(class vc extends Wd.o{constructor(C,S){super(C,S),this.scheduler=C,this.work=S}schedule(C,S=0){return S>0?super.schedule(C,S):(this.delay=S,this.state=C,this.scheduler.flush(this),this)}execute(C,S){return S>0||this.closed?super.execute(C,S):this._execute(C,S)}requestAsyncId(C,S,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(C,S,V):(C.flush(this),0)}});var Rs=k(4986),Ns=k(8505),pa=k(9468),Zd=k(5363);const gm=new p.GfV("7.5.0"),Kd="__angularfire_symbol__analyticsIsSupportedValue",ga="__angularfire_symbol__analyticsIsSupported",Cr="__angularfire_symbol__remoteConfigIsSupportedValue",nu="__angularfire_symbol__remoteConfigIsSupported",to="__angularfire_symbol__messagingIsSupportedValue",ru="__angularfire_symbol__messagingIsSupported";function Oo(D,C,S){if(C){if(1===C.length)return C[0];const re=C.filter(Te=>Te.app===S);if(1===re.length)return re[0]}return S.container.getProvider(D).getImmediate({optional:!0})}globalThis[ga]||(globalThis[ga]=mc().then(D=>globalThis[Kd]=D).catch(()=>globalThis[Kd]=!1)),globalThis[ru]||(globalThis[ru]=Ka().then(D=>globalThis[to]=D).catch(()=>globalThis[to]=!1)),globalThis[nu]||(globalThis[nu]=fm().then(D=>globalThis[Cr]=D).catch(()=>globalThis[Cr]=!1));const ya=(D,C)=>{const S=C?[C]:(0,j.C6)(),V=[];return S.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Te=>{V.includes(Te)||V.push(Te)})}),V};function Br(){}class no{constructor(C,S=No){this.zone=C,this.delegate=S}now(){return this.delegate.now()}schedule(C,S,V){const Y=this.zone;return this.delegate.schedule(function(Te){Y.runGuarded(()=>{C.apply(this,[Te])})},S,V)}}class iu{constructor(C){this.zone=C,this.task=null}call(C,S){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Br,{},Br,Br)),S.pipe((0,Ns.b)({next:V,complete:V,error:V})).subscribe(C).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let su=(()=>{class D{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new no(Zone.current)),this.insideAngular=S.run(()=>new no(Zone.current,Rs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(S){return new(S||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function gr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ou(D){return gr(),function Ic(D){return function(S){return(S=S.lift(new iu(D.ngZone))).pipe((0,pa.R)(D.outsideAngular),(0,Zd.Q)(D.insideAngular))}}(gr())(D)}},8247:(rt,Ie,k)=>{k.d(Ie,{$:()=>Is,A:()=>H,B:()=>Se,G:()=>pn,H:()=>rn,J:()=>Ki,L:()=>G,M:()=>Xo,N:()=>ea,P:()=>Rs,Q:()=>ta,R:()=>zd,T:()=>Fd,U:()=>Eo,V:()=>Qi,W:()=>Ii,X:()=>Jl,Y:()=>za,Z:()=>Xi,_:()=>wo,a:()=>Ya,a0:()=>Xl,a1:()=>ec,a2:()=>Ld,a3:()=>xe,a4:()=>Za,a5:()=>tc,a6:()=>Fi,a7:()=>Fu,a8:()=>Vd,a9:()=>nc,aA:()=>B,aB:()=>ht,aC:()=>wc,aD:()=>Bi,aE:()=>Be,aI:()=>xo,aL:()=>qs,aa:()=>Li,ab:()=>bo,ac:()=>Ud,af:()=>Lu,ag:()=>sc,ah:()=>oc,ak:()=>Ji,al:()=>Uu,an:()=>ca,ao:()=>dc,ap:()=>_e,aq:()=>nt,ar:()=>Xe,as:()=>He,at:()=>Xu,au:()=>ko,av:()=>nn,aw:()=>Re,ax:()=>ee,ay:()=>tr,az:()=>X,b:()=>Jr,c:()=>to,d:()=>rp,e:()=>ma,f:()=>Ic,g:()=>V,h:()=>D,i:()=>os,j:()=>Te,k:()=>bc,l:()=>Di,m:()=>Cc,o:()=>oe,r:()=>Wd,s:()=>np,u:()=>No});var p=k(5861),j=k(2090),O=k(9681),ie=k(1877),ae=k(655),ge=k(4859);const oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},je=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new ie.Yd("@firebase/auth");function qe(v,...f){De.logLevel<=ie.in.ERROR&&De.error(`Auth (${O.SDK_VERSION}): ${v}`,...f)}function He(v,...f){throw Ge(v,...f)}function Re(v,...f){return Ge(v,...f)}function Ce(v,f,m){const w=Object.assign(Object.assign({},Pe()),{[f]:m});return new j.LL("auth","Firebase",w).create(f,{appName:v.name})}function Ee(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&He(v,"argument-error"),Ce(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...f){if("string"!=typeof v){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return je.create(v,...f)}function ee(v,f,...m){if(!v)throw Ge(f,...m)}function he(v){const f="INTERNAL ASSERTION FAILED: "+v;throw qe(f),new Error(f)}function _e(v,f){v||he(f)}const Z=new Map;function X(v){_e(v instanceof Function,"Expected a class definition");let f=Z.get(v);return f?(_e(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Z.set(v,f),f)}function le(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ke(){return"http:"===ut()||"https:"===ut()}function ut(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ze{constructor(f,m){this.shortDelay=f,this.longDelay=m,_e(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Jt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ke()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function an(v,f){_e(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class vn{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xt=new ze(3e4,6e4);function Ut(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Zt(v,f,m,w){return bn.apply(this,arguments)}function bn(){return(bn=(0,p.Z)(function*(v,f,m,w,x={}){return Fr(v,x,(0,p.Z)(function*(){let P={},J={};w&&("GET"===f?J=w:P={body:JSON.stringify(w)});const Ae=(0,j.xO)(Object.assign({key:v.config.apiKey},J)).slice(1),et=yield v._getAdditionalHeaders();return et["Content-Type"]="application/json",v.languageCode&&(et["X-Firebase-Locale"]=v.languageCode),vn.fetch()(_i(v,v.config.apiHost,m,Ae),Object.assign({method:f,headers:et,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Fr(v,f,m){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(v,f,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},un),f);try{const x=new ui(v),P=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const J=yield P.json();if("needConfirmation"in J)throw Vn(v,"account-exists-with-different-credential",J);if(P.ok&&!("errorMessage"in J))return J;{const Ae=P.ok?J.errorMessage:J.error.message,[et,ft]=Ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw Vn(v,"credential-already-in-use",J);if("EMAIL_EXISTS"===et)throw Vn(v,"email-already-in-use",J);if("USER_DISABLED"===et)throw Vn(v,"user-disabled",J);const Lt=w[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(ft)throw Ce(v,Lt,ft);He(v,Lt)}}catch(x){if(x instanceof j.ZR)throw x;He(v,"network-request-failed")}})).apply(this,arguments)}function Sn(v,f,m,w){return qi.apply(this,arguments)}function qi(){return(qi=(0,p.Z)(function*(v,f,m,w,x={}){const P=yield Zt(v,f,m,w,x);return"mfaPendingCredential"in P&&He(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function _i(v,f,m,w){const x=`${f}${m}?${w}`;return v.config.emulator?an(v.config,x):`${v.config.apiScheme}://${x}`}class ui{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Re(this.auth,"network-request-failed")),Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(v,f,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const x=Re(v,f,w);return x.customData._tokenResponse=m,x}function pt(){return(pt=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function dr(v,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ln(v,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function _r(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Yn(){return(Yn=(0,p.Z)(function*(v,f=!1){const m=(0,j.m9)(v),w=yield m.getIdToken(f),x=qt(w);ee(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,J=null==P?void 0:P.sign_in_provider;return{claims:x,token:w,authTime:_r(zi(x.auth_time)),issuedAtTime:_r(zi(x.iat)),expirationTime:_r(zi(x.exp)),signInProvider:J||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function zi(v){return 1e3*Number(v)}function qt(v){var f;const[m,w,x]=v.split(".");if(void 0===m||void 0===w||void 0===x)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,j.tV)(w);return P?JSON.parse(P):(qe("Failed to decode base64 JWT payload"),null)}catch(P){return qe("Caught error parsing JWT payload as JSON",null===(f=P)||void 0===f?void 0:f.toString()),null}}function tt(v,f){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof j.ZR&&Lr(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Lr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class zt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,p.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(m=w)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Oi{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Un(v){return fn.apply(this,arguments)}function fn(){return(fn=(0,p.Z)(function*(v){var f;const m=v.auth,w=yield v.getIdToken(),x=yield tt(v,ln(m,{idToken:w}));ee(null==x?void 0:x.users.length,m,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const J=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?Gn(P.providerUserInfo):[],Ae=jt(v.providerData,J),Lt=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==Ae?void 0:Ae.length)),Tn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Ae,metadata:new Oi(P.createdAt,P.lastLoginAt),isAnonymous:Lt};Object.assign(v,Tn)})).apply(this,arguments)}function zr(){return(zr=(0,p.Z)(function*(v){const f=(0,j.m9)(v);yield Un(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function jt(v,f){return[...v.filter(w=>!f.some(x=>x.providerId===w.providerId)),...f]}function Gn(v){return v.map(f=>{var{providerId:m}=f,w=(0,ae._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function be(){return(be=(0,p.Z)(function*(v,f){const m=yield Fr(v,{},(0,p.Z)(function*(){const w=(0,j.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,J=_i(v,x,"/v1/token",`key=${P}`),Ae=yield v._getAdditionalHeaders();return Ae["Content-Type"]="application/x-www-form-urlencoded",vn.fetch()(J,{method:"POST",headers:Ae,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class We{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ee(f.idToken,"internal-error"),ee(void 0!==f.idToken,"internal-error"),ee(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function lt(v){const f=qt(v);return ee(f,"internal-error"),ee(void 0!==f.exp,"internal-error"),ee(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,p.Z)(function*(){return ee(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,p.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:J}=yield function Qe(v,f){return be.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(x,P,Number(J))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:x,expirationTime:P}=m,J=new We;return w&&(ee("string"==typeof w,"internal-error",{appName:f}),J.refreshToken=w),x&&(ee("string"==typeof x,"internal-error",{appName:f}),J.accessToken=x),P&&(ee("number"==typeof P,"internal-error",{appName:f}),J.expirationTime=P),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new We,this.toJSON())}_performRefresh(){return he("not implemented")}}function mt(v,f){ee("string"==typeof v||void 0===v,"internal-error",{appName:f})}class gt{constructor(f){var{uid:m,auth:w,stsTokenManager:x}=f,P=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Oi(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const w=yield tt(m,m.stsTokenManager.getToken(m.auth,f));return ee(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function In(v){return Yn.apply(this,arguments)}(this,f)}reload(){return function dt(v){return zr.apply(this,arguments)}(this)}_assign(f){this!==f&&(ee(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new gt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,p.Z)(function*(){let x=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),x=!0),m&&(yield Un(w)),yield w.auth._persistUserIfCurrent(w),x&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield tt(f,function Ni(v,f){return pt.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,x,P,J,Ae,et,ft,Lt;const Tn=null!==(w=m.displayName)&&void 0!==w?w:void 0,Ci=null!==(x=m.email)&&void 0!==x?x:void 0,Xr=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,au=null!==(J=m.photoURL)&&void 0!==J?J:void 0,th=null!==(Ae=m.tenantId)&&void 0!==Ae?Ae:void 0,nh=null!==(et=m._redirectEventId)&&void 0!==et?et:void 0,Rc=null!==(ft=m.createdAt)&&void 0!==ft?ft:void 0,rh=null!==(Lt=m.lastLoginAt)&&void 0!==Lt?Lt:void 0,{uid:so,emailVerified:tl,isAnonymous:Nc,providerData:ih,stsTokenManager:uu}=m;ee(so&&uu,f,"internal-error");const Dm=We.fromJSON(this.name,uu);ee("string"==typeof so,f,"internal-error"),mt(Tn,f.name),mt(Ci,f.name),ee("boolean"==typeof tl,f,"internal-error"),ee("boolean"==typeof Nc,f,"internal-error"),mt(Xr,f.name),mt(au,f.name),mt(th,f.name),mt(nh,f.name),mt(Rc,f.name),mt(rh,f.name);const nl=new gt({uid:so,auth:f,email:Ci,emailVerified:tl,displayName:Tn,isAnonymous:Nc,photoURL:au,phoneNumber:Xr,tenantId:th,stsTokenManager:Dm,createdAt:Rc,lastLoginAt:rh});return ih&&Array.isArray(ih)&&(nl.providerData=ih.map(hp=>Object.assign({},hp))),nh&&(nl._redirectEventId=nh),nl}static _fromIdTokenResponse(f,m,w=!1){return(0,p.Z)(function*(){const x=new We;x.updateFromServerResponse(m);const P=new gt({uid:m.localId,auth:f,stsTokenManager:x,isAnonymous:w});return yield Un(P),P})()}}const G=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,w){var x=this;return(0,p.Z)(function*(){x.storage[m]=w})()}_get(m){var w=this;return(0,p.Z)(function*(){const x=w.storage[m];return void 0===x?null:x})()}_remove(m){var w=this;return(0,p.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function B(v,f,m){return`firebase:${v}:${f}:${m}`}class W{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:x,name:P}=this.auth;this.fullUserKey=B(this.userKey,x.apiKey,P),this.fullPersistenceKey=B("persistence",x.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?gt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,p.Z)(function*(){if(!m.length)return new W(X(G),f,w);const x=(yield Promise.all(m.map(function(){var ft=(0,p.Z)(function*(Lt){if(yield Lt._isAvailable())return Lt});return function(Lt){return ft.apply(this,arguments)}}()))).filter(ft=>ft);let P=x[0]||X(G);const J=B(w,f.config.apiKey,f.name);let Ae=null;for(const ft of m)try{const Lt=yield ft._get(J);if(Lt){const Tn=gt._fromJSON(f,Lt);ft!==P&&(Ae=Tn),P=ft;break}}catch(Lt){}const et=x.filter(ft=>ft._shouldAllowMigration);return P._shouldAllowMigration&&et.length?(P=et[0],Ae&&(yield P._set(J,Ae.toJSON())),yield Promise.all(m.map(function(){var ft=(0,p.Z)(function*(Lt){if(Lt!==P)try{yield Lt._remove(J)}catch(Tn){}});return function(Lt){return ft.apply(this,arguments)}}())),new W(P,f,w)):new W(P,f,w)})()}}function U(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Oe(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(R(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(at(f))return"Blackberry";if(Ct(f))return"Webos";if(L(f))return"Safari";if((f.includes("chrome/")||se(f))&&!f.includes("edge/"))return"Chrome";if(Xe(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function R(v=(0,j.z$)()){return/firefox\//i.test(v)}function L(v=(0,j.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function se(v=(0,j.z$)()){return/crios\//i.test(v)}function Oe(v=(0,j.z$)()){return/iemobile/i.test(v)}function Xe(v=(0,j.z$)()){return/android/i.test(v)}function at(v=(0,j.z$)()){return/blackberry/i.test(v)}function Ct(v=(0,j.z$)()){return/webos/i.test(v)}function nt(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function nn(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function wr(v=(0,j.z$)()){return nt(v)||Xe(v)||Ct(v)||at(v)||/windows phone/i.test(v)||Oe(v)}function ir(v,f=[]){let m;switch(v){case"Browser":m=U((0,j.z$)());break;case"Worker":m=`${U((0,j.z$)())}-${v}`;break;default:m=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${w}`}class Qo{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=P=>new Promise((J,Ae)=>{try{J(f(P))}catch(et){Ae(et)}});w.onAbort=m,this.queue.push(w);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){var w;if(m.auth.currentUser===f)return;const x=[];try{for(const P of m.queue)yield P(f),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const J of x)try{J()}catch(Ae){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class Wr{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ft(this),this.idTokenSubscription=new Ft(this),this.beforeStateQueue=new Qo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=X(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var x,P;if(!w._deleted&&(w.persistenceManager=yield W.create(w,f),!w._deleted)){if(null===(x=w._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(J){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var w;const x=yield m.assertedPersistence.getCurrentUser();let P=x,J=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ae=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,et=null==P?void 0:P._redirectEventId,ft=yield m.tryRedirectSignIn(f);(!Ae||Ae===et)&&(null==ft?void 0:ft.user)&&(P=ft.user,J=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(J)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Ae){P=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ae))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return ee(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(x){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){var w;try{yield Un(f)}catch(x){if("auth/network-request-failed"!==(null===(w=x)||void 0===w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Rt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const w=f?(0,j.m9)(f):null;return w&&ee(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,p.Z)(function*(){if(!w._deleted)return f&&ee(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,p.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(X(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new j.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,p.Z)(function*(){const x=yield w.getOrInitRedirectPersistenceManager(m);return null===f?x.removeCurrentUser():x.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&X(f)||m._popupRedirectResolver;ee(w,m,"argument-error"),m.redirectPersistenceManager=yield W.create(m,[X(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var w,x;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,x){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),J=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(J,this,"internal-error"),J.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,w,x):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ir(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const x=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(w["X-Firebase-Client"]=x),w})()}}function Be(v){return(0,j.m9)(v)}class Ft{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pn(v,f,m){const w=Be(v);ee(w._canInitEmulator,w,"emulator-config-failed"),ee(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const x=!!(null==m?void 0:m.disableWarnings),P=Vr(f),{host:J,port:Ae}=function Wi(v){const f=Vr(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(w);if(x){const P=x[1];return{host:P,port:Bn(w.substr(P.length+1))}}{const[P,J]=w.split(":");return{host:P,port:Bn(J)}}}(f);w.config.emulator={url:`${P}//${J}${null===Ae?"":`:${Ae}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:J,port:Ae,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Zi(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Vr(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Bn(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class rn{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return he("not implemented")}_getIdTokenResponse(f){return he("not implemented")}_linkToIdToken(f,m){return he("not implemented")}_getReauthenticationResolver(f){return he("not implemented")}}function $s(v,f){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:resetPassword",Ut(v,f))})).apply(this,arguments)}function At(v,f){return po.apply(this,arguments)}function po(){return(po=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function go(v,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",Ut(v,f))})).apply(this,arguments)}function jn(){return(jn=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signInWithPassword",Ut(v,f))})).apply(this,arguments)}function vs(v,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:sendOobCode",Ut(v,f))})).apply(this,arguments)}function Zr(v,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(v,f){return vs(v,f)})).apply(this,arguments)}function $l(v,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,p.Z)(function*(v,f){return vs(v,f)})).apply(this,arguments)}function wi(v,f){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(v,f){return vs(v,f)})).apply(this,arguments)}function Hl(v,f){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(v,f){return vs(v,f)})).apply(this,arguments)}function ci(){return(ci=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",Ut(v,f))})).apply(this,arguments)}function Gl(){return(Gl=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",Ut(v,f))})).apply(this,arguments)}class ja extends rn{constructor(f,m,w,x=null){super("password",w),this._email=f,this._password=m,this._tenantId=x}static _fromEmailAndPassword(f,m){return new ja(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new ja(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function yo(v,f){return jn.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function _s(v,f){return ci.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:He(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return At(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Pd(v,f){return Gl.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:He(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function qn(v,f){return ql.apply(this,arguments)}function ql(){return(ql=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signInWithIdp",Ut(v,f))})).apply(this,arguments)}class Ki extends rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Ki(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):He("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:x}=m,P=(0,ae._T)(m,["providerId","signInMethod"]);if(!w||!x)return null;const J=new Ki(w,x);return J.idToken=P.idToken||void 0,J.accessToken=P.accessToken||void 0,J.secret=P.secret,J.nonce=P.nonce,J.pendingToken=P.pendingToken||null,J}_getIdTokenResponse(f){return qn(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,qn(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,qn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,j.xO)(m)}return f}}function qf(v,f){return zl.apply(this,arguments)}function zl(){return(zl=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:sendVerificationCode",Ut(v,f))})).apply(this,arguments)}function Jo(){return(Jo=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ut(v,f))})).apply(this,arguments)}function Wl(){return(Wl=(0,p.Z)(function*(v,f){const m=yield Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ut(v,f));if(m.temporaryProof)throw Vn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Wf={USER_NOT_FOUND:"user-not-found"};function Zl(){return(Zl=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ut(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wf)})).apply(this,arguments)}class _o extends rn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new _o({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new _o({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function zf(v,f){return Jo.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function vo(v,f){return Wl.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Zf(v,f){return Zl.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:x}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:x}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:x,temporaryProof:P}=f;return w||m||x||P?new _o({verificationId:m,verificationCode:w,phoneNumber:x,temporaryProof:P}):null}}class Yi{constructor(f){var m,w,x,P,J,Ae;const et=(0,j.zd)((0,j.pd)(f)),ft=null!==(m=et.apiKey)&&void 0!==m?m:null,Lt=null!==(w=et.oobCode)&&void 0!==w?w:null,Tn=function Kf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=et.mode)&&void 0!==x?x:null);ee(ft&&Lt&&Tn,"argument-error"),this.apiKey=ft,this.operation=Tn,this.code=Lt,this.continueUrl=null!==(P=et.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(J=et.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(Ae=et.tenantId)&&void 0!==Ae?Ae:null}static parseLink(f){const m=function kd(v){const f=(0,j.zd)((0,j.pd)(v)).link,m=f?(0,j.zd)((0,j.pd)(f)).deep_link_id:null,w=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(w?(0,j.zd)((0,j.pd)(w)).link:null)||w||m||f||v}(f);try{return new Yi(m)}catch(w){return null}}}let Xo=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return ja._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const x=Yi.parseLink(w);return ee(x,"argument-error"),ja._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Es{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class di extends Es{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Eo extends di{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return ee("providerId"in m&&"signInMethod"in m,"argument-error"),Ki._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ee(f.idToken||f.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Eo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Eo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:x,pendingToken:P,nonce:J,providerId:Ae}=f;if(!w&&!x&&!m&&!P||!Ae)return null;try{return new Eo(Ae)._credential({idToken:m,accessToken:w,nonce:J,pendingToken:P})}catch(et){return null}}}let ea=(()=>{class v extends di{constructor(){super("facebook.com")}static credential(m){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ta=(()=>{class v extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:x}=m;if(!w&&!x)return null;try{return v.credential(w,x)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Fd=(()=>{class v extends di{constructor(){super("github.com")}static credential(m){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class qs extends rn{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return qn(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,qn(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,qn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:x,pendingToken:P}=m;return w&&x&&P&&w===x?new qs(w,P):null}static _create(f,m){return new qs(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qi extends Es{constructor(f){ee(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Qi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Qi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=qs.fromJSON(f);return ee(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return qs._create(w,m)}catch(x){return null}}}let Ii=(()=>{class v extends di{constructor(){super("twitter.com")}static credential(m,w){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:x}=m;if(!w||!x)return null;try{return v.credential(w,x)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Yl(v,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signUp",Ut(v,f))})).apply(this,arguments)}class Dr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,x=!1){return(0,p.Z)(function*(){const P=yield gt._fromIdTokenResponse(f,w,x),J=Ql(w);return new Dr({user:P,providerId:J,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const x=Ql(w);return new Dr({user:f,providerId:x,_tokenResponse:w,operationType:m})})()}}function Ql(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Jl(v){return $a.apply(this,arguments)}function $a(){return($a=(0,p.Z)(function*(v){var f;const m=Be(v);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new Dr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Yl(m,{returnSecureToken:!0}),x=yield Dr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ha extends j.ZR{constructor(f,m,w,x){var P;super(m.code,m.message),this.operationType=w,this.user=x,Object.setPrototypeOf(this,Ha.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,x){return new Ha(f,m,w,x)}}function Ga(v,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ha._fromErrorAndOperation(v,P,f,w):P})}function Ou(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Ji(v,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,p.Z)(function*(v,f){const m=(0,j.m9)(v);yield ws(!0,m,f);const{providerUserInfo:w}=yield dr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),x=Ou(w||[]);return m.providerData=m.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function mn(v,f){return na.apply(this,arguments)}function na(){return(na=(0,p.Z)(function*(v,f,m=!1){const w=yield tt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return Dr._forOperation(v,"link",w)})).apply(this,arguments)}function ws(v,f,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,p.Z)(function*(v,f,m){yield Un(f);const x=!1===v?"provider-already-linked":"no-such-provider";ee(Ou(f.providerData).has(m)===v,f.auth,x)})).apply(this,arguments)}function qa(v,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(v,f,m=!1){var w;const{auth:x}=v,P="reauthenticate";try{const J=yield tt(v,Ga(x,P,f,v),m);ee(J.idToken,x,"internal-error");const Ae=qt(J.idToken);ee(Ae,x,"internal-error");const{sub:et}=Ae;return ee(v.uid===et,x,"user-mismatch"),Dr._forOperation(v,P,J)}catch(J){throw"auth/user-not-found"===(null===(w=J)||void 0===w?void 0:w.code)&&He(x,"user-mismatch"),J}})).apply(this,arguments)}function zs(v,f){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(v,f,m=!1){const w="signIn",x=yield Ga(v,w,f),P=yield Dr._fromIdTokenResponse(v,w,x);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function za(v,f){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(v,f){return zs(Be(v),f)})).apply(this,arguments)}function Xi(v,f){return sr.apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(v,f){const m=(0,j.m9)(v);return yield ws(!1,m,f.providerId),mn(m,f)})).apply(this,arguments)}function wo(v,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,p.Z)(function*(v,f){return qa((0,j.m9)(v),f)})).apply(this,arguments)}function ku(v,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,p.Z)(function*(v,f){return Sn(v,"POST","/v1/accounts:signInWithCustomToken",Ut(v,f))})).apply(this,arguments)}function Is(v,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,p.Z)(function*(v,f){const m=Be(v),w=yield ku(m,{token:f,returnSecureToken:!0}),x=yield Dr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class yt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ws._fromServerResponse(f,m):He(f,"internal-error")}}class Ws extends yt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ws(m)}}function Wa(v,f,m){var w;ee((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ee(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ee(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(ee(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Xl(v,f,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v),x={requestType:"PASSWORD_RESET",email:f};m&&Wa(w,x,m),yield $l(w,x)})).apply(this,arguments)}function ec(v,f,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,p.Z)(function*(v,f,m){yield $s((0,j.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ld(v,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,p.Z)(function*(v,f){yield go((0,j.m9)(v),{oobCode:f})})).apply(this,arguments)}function xe(v,f){return $t.apply(this,arguments)}function $t(){return($t=(0,p.Z)(function*(v,f){const m=(0,j.m9)(v),w=yield $s(m,{oobCode:f}),x=w.requestType;switch(ee(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(w.mfaInfo,m,"internal-error");default:ee(w.email,m,"internal-error")}let P=null;return w.mfaInfo&&(P=yt._fromServerResponse(Be(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Za(v,f){return _n.apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(v,f){const{data:m}=yield xe((0,j.m9)(v),f);return m.email})).apply(this,arguments)}function tc(v,f,m){return es.apply(this,arguments)}function es(){return(es=(0,p.Z)(function*(v,f,m){const w=Be(v),x=yield Yl(w,{returnSecureToken:!0,email:f,password:m}),P=yield Dr._fromIdTokenResponse(w,"signIn",x);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Fi(v,f,m){return za((0,j.m9)(v),Xo.credential(f,m))}function Fu(v,f,m){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v),x={requestType:"EMAIL_SIGNIN",email:f};ee(m.handleCodeInApp,w,"argument-error"),m&&Wa(w,x,m),yield wi(w,x)})).apply(this,arguments)}function Vd(v,f){const m=Yi.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function nc(v,f,m){return rc.apply(this,arguments)}function rc(){return(rc=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v),x=Xo.credentialWithLink(f,m||le());return ee(x._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),za(w,x)})).apply(this,arguments)}function Zs(v,f){return or.apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:createAuthUri",Ut(v,f))})).apply(this,arguments)}function Li(v,f){return Do.apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(v,f){const w={identifier:f,continueUri:ke()?le():"http://localhost"},{signinMethods:x}=yield Zs((0,j.m9)(v),w);return x||[]})).apply(this,arguments)}function bo(v,f){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(v,f){const m=(0,j.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Wa(m.auth,x,f);const{email:P}=yield Zr(m.auth,x);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ud(v,f,m){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Wa(w.auth,P,m);const{email:J}=yield Hl(w.auth,P);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function ic(v,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(v,f){return Zt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Lu(v,f){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,j.m9)(v),P={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},J=yield tt(w,ic(w.auth,P));w.displayName=J.displayName||null,w.photoURL=J.photoUrl||null;const Ae=w.providerData.find(({providerId:et})=>"password"===et);Ae&&(Ae.displayName=w.displayName,Ae.photoURL=w.photoURL),yield w._updateTokensIfNecessary(J)})).apply(this,arguments)}function sc(v,f){return Vu((0,j.m9)(v),f,null)}function oc(v,f){return Vu((0,j.m9)(v),null,f)}function Vu(v,f,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,p.Z)(function*(v,f,m){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const J=yield tt(v,At(w,P));yield v._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Ks{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class ac extends Ks{constructor(f,m,w,x){super(f,m,w),this.username=x}}class Bd extends Ks{constructor(f,m){super(f,"facebook.com",m)}}class Ka extends ac{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Qr extends Ks{constructor(f,m){super(f,"google.com",m)}}class jd extends ac{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Uu(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ua(v){var f,m;if(!v)return null;const{providerId:w}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const J=null===(m=null===(f=qt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(J)return new Ks(P,"anonymous"!==J&&"custom"!==J?J:null)}if(!w)return null;switch(w){case"facebook.com":return new Bd(P,x);case"github.com":return new Ka(P,x);case"google.com":return new Qr(P,x);case"twitter.com":return new jd(P,x,v.screenName||null);case"custom":case"anonymous":return new Ks(P,null);default:return new Ks(P,w,x)}}(m)}class ts{constructor(f,m,w){this.type=f,this.credential=m,this.auth=w}static _fromIdtoken(f,m){return new ts("enroll",f,m)}static _fromMfaPendingCredential(f){return new ts("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ts._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ts._fromIdtoken(f.multiFactorSession.idToken)}return null}}class la{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=Be(f),x=m.customData._serverResponse,P=(x.mfaInfo||[]).map(Ae=>yt._fromServerResponse(w,Ae));ee(x.mfaPendingCredential,w,"internal-error");const J=ts._fromMfaPendingCredential(x.mfaPendingCredential);return new la(J,P,function(){var Ae=(0,p.Z)(function*(et){const ft=yield et._process(w,J);delete x.mfaInfo,delete x.mfaPendingCredential;const Lt=Object.assign(Object.assign({},x),{idToken:ft.idToken,refreshToken:ft.refreshToken});switch(m.operationType){case"signIn":const Tn=yield Dr._fromIdTokenResponse(w,m.operationType,Lt);return yield w._updateCurrentUser(Tn.user),Tn;case"reauthenticate":return ee(m.user,w,"internal-error"),Dr._forOperation(m.user,m.operationType,Lt);default:He(w,"internal-error")}});return function(et){return Ae.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function ca(v,f){var m;const w=(0,j.m9)(v),x=f;return ee(f.customData.operationType,w,"argument-error"),ee(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),la._fromError(w,x)}function Xn(v,f){return Zt(v,"POST","/v2/accounts/mfaEnrollment:start",Ut(v,f))}class ns{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>yt._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new ns(f)}getSession(){var f=this;return(0,p.Z)(function*(){return ts._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var w=this;return(0,p.Z)(function*(){const x=f,P=yield w.getSession(),J=yield tt(w.user,x._process(w.user.auth,P,m));return yield w.user._updateTokensIfNecessary(J),w.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){var w;const x="string"==typeof f?f:f.uid,P=yield m.user.getIdToken(),J=yield tt(m.user,function Jf(v,f){return Zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(v,f))}(m.user.auth,{idToken:P,mfaEnrollmentId:x}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ae})=>Ae!==x),yield m.user._updateTokensIfNecessary(J);try{yield m.user.reload()}catch(Ae){if("auth/user-token-expired"!==(null===(w=Ae)||void 0===w?void 0:w.code))throw Ae}})()}}const Ao=new WeakMap;function dc(v){const f=(0,j.m9)(v);return Ao.has(f)||Ao.set(f,ns._fromUser(f)),Ao.get(f)}const Bu="__sak";class Ys{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Bu,"1"),this.storage.removeItem(Bu),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jr=(()=>{class v extends Ys{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ju(){const v=(0,j.z$)();return L(v)||nt(v)}()&&function Pi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=wr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const x=this.storage.getItem(w),P=this.localCache[w];x!==P&&m(w,P,x)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Ae,et,ft)=>{this.notifyListeners(Ae,ft)});const x=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ae=this.storage.getItem(x);if(m.newValue!==Ae)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!w)return}const P=()=>{const Ae=this.storage.getItem(x);!w&&this.localCache[x]===Ae||this.notifyListeners(x,Ae)},J=this.storage.getItem(x);!function Nt(){return(0,j.w1)()&&10===document.documentMode}()||J===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,w){this.localCache[m]=w;const x=this.listeners[m];if(x)for(const P of Array.from(x))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var x=()=>super._set,P=this;return(0,p.Z)(function*(){yield x().call(P,m,w),P.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,x=this;return(0,p.Z)(function*(){const P=yield w().call(x,m);return x.localCache[m]=JSON.stringify(P),P})()}_remove(m){var w=()=>super._remove,x=this;return(0,p.Z)(function*(){yield w().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),Ya=(()=>{class v extends Ys{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let So=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(P=>P.isListeningto(m));if(w)return w;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,p.Z)(function*(){const x=m,{eventId:P,eventType:J,data:Ae}=x.data,et=w.handlersMap[J];if(!(null==et?void 0:et.size))return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:J});const ft=Array.from(et).map(function(){var Tn=(0,p.Z)(function*(Ci){return Ci(x.origin,Ae)});return function(Ci){return Tn.apply(this,arguments)}}()),Lt=yield function Hu(v){return Promise.all(v.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(ft);x.ports[0].postMessage({status:"done",eventId:P,eventType:J,response:Lt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function xo(v="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return v+m}class da{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var x=this;return(0,p.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let J,Ae;return new Promise((et,ft)=>{const Lt=xo("",20);P.port1.start();const Tn=setTimeout(()=>{ft(new Error("unsupported_event"))},w);Ae={messageChannel:P,onMessage(Ci){const Xr=Ci;if(Xr.data.eventId===Lt)switch(Xr.data.status){case"ack":clearTimeout(Tn),J=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),et(Xr.data.response);break;default:clearTimeout(Tn),clearTimeout(J),ft(new Error("invalid_response"))}}},x.handlers.add(Ae),P.port1.addEventListener("message",Ae.onMessage),x.target.postMessage({eventType:f,eventId:Lt,data:m},[P.port2])}).finally(()=>{Ae&&x.removeMessageHandler(Ae)})})()}}function tn(){return window}function It(){return void 0!==tn().WorkerGlobalScope&&"function"==typeof tn().importScripts}function Ts(){return(Ts=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const qu="firebaseLocalStorageDb",Vi="firebaseLocalStorage",ar="fbase_key";class Js{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function rs(v,f){return v.transaction([Vi],f?"readwrite":"readonly").objectStore(Vi)}function As(){const v=indexedDB.open(qu,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Vi,{keyPath:ar})}catch(x){m(x)}}),v.addEventListener("success",(0,p.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Vi)?f(w):(w.close(),yield function Xa(){const v=indexedDB.deleteDatabase(qu);return new Js(v).toPromise()}(),f(yield As()))}))})}function hc(v,f,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,p.Z)(function*(v,f,m){const w=rs(v,!0).put({[ar]:f,value:m});return new Js(w).toPromise()})).apply(this,arguments)}function Xs(){return(Xs=(0,p.Z)(function*(v,f){const m=rs(v,!1).get(f),w=yield new Js(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function $n(v,f){const m=rs(v,!0).delete(f);return new Js(m).toPromise()}const os=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield As()),m.db})()}_withRetries(m){var w=this;return(0,p.Z)(function*(){let x=0;for(;;)try{const P=yield w._openDb();return yield m(P)}catch(P){if(x++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return It()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=So._getInstance(function Gu(){return It()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(x,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(x,P){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var w,x;if(m.activeServiceWorker=yield function Qa(){return Ts.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new da(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(x=P[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Hd(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield As();return yield hc(m,Bu,"1"),yield $n(m,Bu),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var x=this;return(0,p.Z)(function*(){return x._withPendingWrite((0,p.Z)(function*(){return yield x._withRetries(P=>hc(P,m,w)),x.localCache[m]=w,x.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,p.Z)(function*(){const x=yield w._withRetries(P=>function is(v,f){return Xs.apply(this,arguments)}(P,m));return w.localCache[m]=x,x})()}_remove(m){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(x=>$n(x,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const w=yield m._withRetries(J=>{const Ae=rs(J,!1).getAll();return new Js(Ae).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:J,value:Ae}of w)P.add(J),JSON.stringify(m.localCache[J])!==JSON.stringify(Ae)&&(m.notifyListeners(J,Ae),x.push(J));for(const J of Object.keys(m.localCache))m.localCache[J]&&!P.has(J)&&(m.notifyListeners(J,null),x.push(J));return x})()}notifyListeners(m,w){this.localCache[m]=w;const x=this.listeners[m];if(x)for(const P of Array.from(x))P(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function gc(v,f){return Zt(v,"POST","/v2/accounts/mfaSignIn:start",Ut(v,f))}function ur(){return(ur=(0,p.Z)(function*(v){return(yield Zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mo(v){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=x=>{const P=Re("internal-error");P.customData=x,m(P)},w.type="text/javascript",w.charset="UTF-8",function eu(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function Ss(v){return`__${v}${Math.floor(1e6*Math.random())}`}const er=1e12;class fa{constructor(f){this.auth=f,this.counter=er,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new Wu(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||er;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||er))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var w;return null===(w=m._widgets.get(f||er))||void 0===w||w.execute(),""})()}}class Wu{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof f?document.getElementById(f):f;ee(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ro(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Zu=Ss("rcb"),Gd=new ze(3e4,6e4);class mc{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=tn().grecaptcha)||void 0===f?void 0:f.render)}load(f,m=""){return ee(function tu(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(tn().grecaptcha):new Promise((w,x)=>{const P=tn().setTimeout(()=>{x(Re(f,"network-request-failed"))},Gd.get());tn()[Zu]=()=>{tn().clearTimeout(P),delete tn()[Zu];const Ae=tn().grecaptcha;if(!Ae)return void x(Re(f,"internal-error"));const et=Ae.render;Ae.render=(ft,Lt)=>{const Tn=et(ft,Lt);return this.counter++,Tn},this.hostLanguage=m,w(Ae)},Mo(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Zu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),x(Re(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!!(null===(m=tn().grecaptcha)||void 0===m?void 0:m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ep{load(f){return(0,p.Z)(function*(){return new fa(f)})()}clearedOneInstance(){}}const qd="recaptcha",tp={theme:"light",type:"image"};class zd{constructor(f,m=Object.assign({},tp),w){this.parameters=m,this.type=qd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Be(w),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof f?document.getElementById(f):f;ee(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ep:new mc,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(P=>{const J=Ae=>{!Ae||(f.tokenChangeListeners.delete(J),P(Ae))};f.tokenChangeListeners.add(J),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=tn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){ee(ke()&&!It(),f.auth,"internal-error"),yield function yc(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function zu(v){return ur.apply(this,arguments)}(f.auth);ee(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ms{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=_o._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function np(v,f,m){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(v,f,m){const w=Be(v),x=yield Ur(w,f,(0,j.m9)(m));return new Ms(x,P=>za(w,P))})).apply(this,arguments)}function Di(v,f,m){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v);yield ws(!1,w,"phone");const x=yield Ur(w.auth,f,(0,j.m9)(m));return new Ms(x,P=>Xi(w,P))})).apply(this,arguments)}function Wd(v,f,m){return vc.apply(this,arguments)}function vc(){return(vc=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v),x=yield Ur(w.auth,f,(0,j.m9)(m));return new Ms(x,P=>wo(w,P))})).apply(this,arguments)}function Ur(v,f,m){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(v,f,m){var w;const x=yield m.verify();try{let P;if(ee("string"==typeof x,v,"argument-error"),ee(m.type===qd,v,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const J=P.session;if("phoneNumber"in P)return ee("enroll"===J.type,v,"internal-error"),(yield Xn(v,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ee("signin"===J.type,v,"internal-error");const Ae=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return ee(Ae,v,"missing-multi-factor-info"),(yield gc(v,{mfaPendingCredential:J.credential,mfaEnrollmentId:Ae,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield qf(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return J}}finally{m._reset()}})).apply(this,arguments)}function No(v,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,p.Z)(function*(v,f){yield mn((0,j.m9)(v),f)})).apply(this,arguments)}let Rs=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Be(m)}verifyPhoneNumber(m,w){return Ur(this.auth,m,(0,j.m9)(w))}static credential(m,w){return _o._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:x}=m;return w&&x?_o._fromTokenResponse(w,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ns(v,f){return f?X(f):(ee(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class pa extends rn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return qn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return qn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return qn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Zd(v){return zs(v.auth,new pa(v),v.bypassAuthState)}function gm(v){const{auth:f,user:m}=v;return ee(m,f,"internal-error"),qa(m,new pa(v),v.bypassAuthState)}function Kd(v){return ga.apply(this,arguments)}function ga(){return(ga=(0,p.Z)(function*(v){const{auth:f,user:m}=v;return ee(m,f,"internal-error"),mn(m,new pa(v),v.bypassAuthState)})).apply(this,arguments)}class Cr{constructor(f,m,w,x,P=!1){this.auth=f,this.resolver=w,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(w,x){f.pendingPromise={resolve:w,reject:x};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(w,x){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:x,postBody:P,tenantId:J,error:Ae,type:et}=f;if(Ae)return void m.reject(Ae);const ft={auth:m.auth,requestUri:w,sessionId:x,tenantId:J||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(et)(ft))}catch(Lt){m.reject(Lt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Zd;case"linkViaPopup":case"linkViaRedirect":return Kd;case"reauthViaPopup":case"reauthViaRedirect":return gm;default:He(this.auth,"internal-error")}}resolve(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nu=new ze(2e3,1e4);function to(v,f,m){return ru.apply(this,arguments)}function ru(){return(ru=(0,p.Z)(function*(v,f,m){const w=Be(v);Ee(v,f,Es);const x=Ns(w,m);return new Oo(w,"signInViaPopup",f,x).executeNotNull()})).apply(this,arguments)}function ma(v,f,m){return _c.apply(this,arguments)}function _c(){return(_c=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v);Ee(w.auth,f,Es);const x=Ns(w.auth,m);return new Oo(w.auth,"reauthViaPopup",f,x,w).executeNotNull()})).apply(this,arguments)}function rp(v,f,m){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v);Ee(w.auth,f,Es);const x=Ns(w.auth,m);return new Oo(w.auth,"linkViaPopup",f,x,w).executeNotNull()})).apply(this,arguments)}let Oo=(()=>{class v extends Cr{constructor(m,w,x,P,J){super(m,w,P,J),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const w=yield m.execute();return ee(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,p.Z)(function*(){_e(1===m.filter.length,"Popup operations only handle one event");const w=xo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Re(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,x;this.pollId=(null===(x=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,nu.get())};m()}}return v.currentPopupAction=null,v})();const Br=new Map;class no extends Cr{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let w=Br.get(m.auth._key());if(!w){try{const P=(yield function iu(v,f){return su.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(P)}catch(x){w=()=>Promise.reject(x)}Br.set(m.auth._key(),w)}return m.bypassAuthState||Br.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const x=yield w.auth._redirectUserForId(f.eventId);if(x)return w.user=x,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function su(){return(su=(0,p.Z)(function*(v,f){const m=ou(f),w=Yd(v);if(!(yield w._isAvailable()))return!1;const x="true"===(yield w._get(m));return yield w._remove(m),x})).apply(this,arguments)}function gr(v,f){return va.apply(this,arguments)}function va(){return(va=(0,p.Z)(function*(v,f){return Yd(v)._set(ou(f),"true")})).apply(this,arguments)}function Bi(){Br.clear()}function wc(v,f){Br.set(v._key(),f)}function Yd(v){return X(v._redirectPersistence)}function ou(v){return B("pendingRedirect",v.config.apiKey,v.name)}function Ic(v,f,m){return function ip(v,f,m){return Po.apply(this,arguments)}(v,f,m)}function Po(){return(Po=(0,p.Z)(function*(v,f,m){const w=Be(v);Ee(v,f,Es);const x=Ns(w,m);return yield gr(x,w),x._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function D(v,f,m){return function C(v,f,m){return S.apply(this,arguments)}(v,f,m)}function S(){return(S=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v);Ee(w.auth,f,Es);const x=Ns(w.auth,m);yield gr(x,w.auth);const P=yield bt(w);return x._openRedirect(w.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function V(v,f,m){return function Y(v,f,m){return re.apply(this,arguments)}(v,f,m)}function re(){return(re=(0,p.Z)(function*(v,f,m){const w=(0,j.m9)(v);Ee(w.auth,f,Es);const x=Ns(w.auth,m);yield ws(!1,w,f.providerId),yield gr(x,w.auth);const P=yield bt(w);return x._openRedirect(w.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function Te(v,f){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(v,f){return yield Be(v)._initializationPromise,ht(v,f,!1)})).apply(this,arguments)}function ht(v,f){return wt.apply(this,arguments)}function wt(){return(wt=(0,p.Z)(function*(v,f,m=!1){const w=Be(v),x=Ns(w,f),J=yield new no(w,x,m).execute();return J&&!m&&(delete J.user._redirectEventId,yield w._persistUserIfCurrent(J.user),yield w._setRedirectUser(null,f)),J})).apply(this,arguments)}function bt(v){return it.apply(this,arguments)}function it(){return(it=(0,p.Z)(function*(v){const f=xo(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class tr{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ji(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Os(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!Os(f)){const x=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Re(this.auth,x))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ro(f))}saveEventToCache(f){this.cachedEventUids.add(ro(f)),this.lastProcessedEventTime=Date.now()}}function ro(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Os({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function ko(v){return as.apply(this,arguments)}function as(){return(as=(0,p.Z)(function*(v,f={}){return Zt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Fo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,us=/^https?/;function ls(){return(ls=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield ko(v);for(const m of f)try{if(sp(m))return}catch(w){}He(v,"unauthorized-domain")})).apply(this,arguments)}function sp(v){const f=le(),{protocol:m,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const J=new URL(v);return""===J.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&J.hostname===w}if(!us.test(m))return!1;if(Fo.test(v))return w===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(w)}const mm=new ze(3e4,6e4);function Ku(){const v=tn().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Yu=null;function ym(v){return Yu=Yu||function op(v){return new Promise((f,m)=>{var w,x,P;function J(){Ku(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ku(),m(Re(v,"network-request-failed"))},timeout:mm.get()})}if(null===(x=null===(w=tn().gapi)||void 0===w?void 0:w.iframes)||void 0===x?void 0:x.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=tn().gapi)||void 0===P?void 0:P.load)){const Ae=Ss("iframefcb");return tn()[Ae]=()=>{gapi.load?J():m(Re(v,"network-request-failed"))},Mo(`https://apis.google.com/js/api.js?onload=${Ae}`).catch(et=>m(et))}J()}}).catch(f=>{throw Yu=null,f})}(v),Yu}const vm=new ze(5e3,15e3),_m={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},io=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A_(v){const f=v.config;ee(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?an(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:O.SDK_VERSION},x=io.get(v.config.apiHost);x&&(w.eid=x);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${m}?${(0,j.xO)(w).slice(1)}`}function ap(){return ap=(0,p.Z)(function*(v){const f=yield ym(v),m=tn().gapi;return ee(m,v,"internal-error"),f.open({where:document.body,url:A_(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_m,dontclear:!0},w=>new Promise(function(){var x=(0,p.Z)(function*(P,J){yield w.restyle({setHideOnLeave:!1});const Ae=Re(v,"network-request-failed"),et=tn().setTimeout(()=>{J(Ae)},vm.get());function ft(){tn().clearTimeout(et),P(w)}w.ping(ft).then(ft,()=>{J(Ae)})});return function(P,J){return x.apply(this,arguments)}}()))}),ap.apply(this,arguments)}const up={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zn{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Xu(v,f,m,w,x,P){ee(v.config.authDomain,v,"auth-domain-config-required"),ee(v.config.apiKey,v,"invalid-api-key");const J={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:O.SDK_VERSION,eventId:x};if(f instanceof Es){f.setDefaultLanguage(v.languageCode),J.providerId=f.providerId||"",(0,j.xb)(f.getCustomParameters())||(J.customParameters=JSON.stringify(f.getCustomParameters()));for(const[et,ft]of Object.entries(P||{}))J[et]=ft}if(f instanceof di){const et=f.getScopes().filter(ft=>""!==ft);et.length>0&&(J.scopes=et.join(","))}v.tenantId&&(J.tid=v.tenantId);const Ae=J;for(const et of Object.keys(Ae))void 0===Ae[et]&&delete Ae[et];return`${function wm({config:v}){return v.emulator?an(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(Ae).slice(1)}`}const el="webStorageSupport",bc=class Im{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ya,this._completeRedirectFn=ht,this._overrideRedirectResult=wc}_openPopup(f,m,w,x){var P=this;return(0,p.Z)(function*(){var J;_e(null===(J=P.eventManagers[f._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const Ae=Xu(f,m,w,le(),x);return function Ju(v,f,m,w=500,x=600){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),J=Math.max((window.screen.availWidth-w)/2,0).toString();let Ae="";const et=Object.assign(Object.assign({},up),{width:w.toString(),height:x.toString(),top:P,left:J}),ft=(0,j.z$)().toLowerCase();m&&(Ae=se(ft)?"_blank":m),R(ft)&&(f=f||"http://localhost",et.scrollbars="yes");const Lt=Object.entries(et).reduce((Ci,[Xr,au])=>`${Ci}${Xr}=${au},`,"");if(function Qn(v=(0,j.z$)()){var f;return nt(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(ft)&&"_self"!==Ae)return function Dc(v,f){const m=document.createElement("a");m.href=v,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",Ae),new zn(null);const Tn=window.open(f||"",Ae,Lt);ee(Tn,v,"popup-blocked");try{Tn.focus()}catch(Ci){}return new zn(Tn)}(f,Ae,xo())})()}_openRedirect(f,m,w,x){var P=this;return(0,p.Z)(function*(){return yield P._originValidation(f),function br(v){tn().location.href=v}(Xu(f,m,w,le(),x)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:x,promise:P}=this.eventManagers[m];return x?Promise.resolve(x):(_e(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const w=yield function S_(v){return ap.apply(this,arguments)}(f),x=new tr(f);return w.register("authEvent",P=>(ee(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:x},m.iframes[f._key()]=w,x})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(el,{type:el},x=>{var P;const J=null===(P=null==x?void 0:x[0])||void 0===P?void 0:P[el];void 0!==J&&m(!!J),He(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function bi(v){return ls.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return wr()||L()||nt()}};class Xd extends class lp{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Xd(f)}_finalizeEnroll(f,m,w){return function cc(v,f){return Zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(v,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ha(v,f){return Zt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ut(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cc=(()=>{class v{constructor(){}static assertion(m){return Xd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Tc="@firebase/auth",Ac="0.20.11";class cp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var x;f((null===(x=w)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function dp(v){(0,O._registerComponent)(new ge.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),x=f.getProvider("heartbeat"),{apiKey:P,authDomain:J}=w.options;return((Ae,et)=>{ee(P&&!P.includes(":"),"invalid-api-key",{appName:Ae.name}),ee(!(null==J?void 0:J.includes(":")),"argument-error",{appName:Ae.name});const ft={apiKey:P,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ir(v)},Lt=new Wr(Ae,et,ft);return function ye(v,f){const m=(null==f?void 0:f.persistence)||[],w=(Array.isArray(m)?m:[m]).map(X);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Lt,m),Lt})(w,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ge.wA("auth-internal",f=>{const m=Be(f.getProvider("auth").getImmediate());return new cp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Tc,Ac,function wa(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(Tc,Ac,"esm2017")}("Browser")},2090:(rt,Ie,k)=>{k.d(Ie,{$s:()=>We,BH:()=>Rt,G6:()=>Ee,L:()=>oe,LL:()=>un,Pz:()=>Jt,Sg:()=>ze,UG:()=>Pe,US:()=>ge,ZB:()=>H,ZR:()=>vn,aH:()=>ut,b$:()=>De,eu:()=>ee,hl:()=>Ge,jU:()=>je,m9:()=>en,ne:()=>Yn,pd:()=>Er,r3:()=>ui,ru:()=>pe,tV:()=>me,uI:()=>Se,vZ:()=>dr,w1:()=>He,xO:()=>hr,xb:()=>Ni,z$:()=>Ue,zI:()=>he,zd:()=>_r});const ie=function(G){const B=[];let W=0;for(let U=0;U<G.length;U++){let R=G.charCodeAt(U);R<128?B[W++]=R:R<2048?(B[W++]=R>>6|192,B[W++]=63&R|128):55296==(64512&R)&&U+1<G.length&&56320==(64512&G.charCodeAt(U+1))?(R=65536+((1023&R)<<10)+(1023&G.charCodeAt(++U)),B[W++]=R>>18|240,B[W++]=R>>12&63|128,B[W++]=R>>6&63|128,B[W++]=63&R|128):(B[W++]=R>>12|224,B[W++]=R>>6&63|128,B[W++]=63&R|128)}return B},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,B){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let R=0;R<G.length;R+=3){const L=G[R],se=R+1<G.length,Oe=se?G[R+1]:0,Xe=R+2<G.length,at=Xe?G[R+2]:0;let nn=(15&Oe)<<2|at>>6,Qn=63&at;Xe||(Qn=64,se||(nn=64)),U.push(W[L>>2],W[(3&L)<<4|Oe>>4],W[nn],W[Qn])}return U.join("")},encodeString(G,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(G):this.encodeByteArray(ie(G),B)},decodeString(G,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(G):function(G){const B=[];let W=0,U=0;for(;W<G.length;){const R=G[W++];if(R<128)B[U++]=String.fromCharCode(R);else if(R>191&&R<224){const L=G[W++];B[U++]=String.fromCharCode((31&R)<<6|63&L)}else if(R>239&&R<365){const Xe=((7&R)<<18|(63&G[W++])<<12|(63&G[W++])<<6|63&G[W++])-65536;B[U++]=String.fromCharCode(55296+(Xe>>10)),B[U++]=String.fromCharCode(56320+(1023&Xe))}else{const L=G[W++],se=G[W++];B[U++]=String.fromCharCode((15&R)<<12|(63&L)<<6|63&se)}}return B.join("")}(this.decodeStringToByteArray(G,B))},decodeStringToByteArray(G,B){this.init_();const W=B?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let R=0;R<G.length;){const L=W[G.charAt(R++)],Oe=R<G.length?W[G.charAt(R)]:0;++R;const at=R<G.length?W[G.charAt(R)]:64;++R;const nt=R<G.length?W[G.charAt(R)]:64;if(++R,null==L||null==Oe||null==at||null==nt)throw Error();U.push(L<<2|Oe>>4),64!==at&&(U.push(Oe<<4&240|at>>2),64!==nt&&U.push(at<<6&192|nt))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},oe=function(G){return function(G){const B=ie(G);return ge.encodeByteArray(B,!0)}(G).replace(/\./g,"")},me=function(G){try{return ge.decodeString(G,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function H(G,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return B}for(const W in B)!B.hasOwnProperty(W)||!te(W)||(G[W]=H(G[W],B[W]));return G}function te(G){return"__proto__"!==G}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(G){return!1}}function je(){return"object"==typeof self&&self.self===self}function pe(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){const G=Ue();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Ee(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function ee(){return new Promise((G,B)=>{try{let W=!0;const U="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(U);R.onsuccess=()=>{R.result.close(),W||self.indexedDB.deleteDatabase(U),G(!0)},R.onupgradeneeded=()=>{W=!1},R.onerror=()=>{var L;B((null===(L=R.error)||void 0===L?void 0:L.message)||"")}}catch(W){B(W)}})}function he(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const ye=()=>{try{return function _e(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if("undefined"==typeof document)return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(W){return}const B=G&&me(G[1]);return B&&JSON.parse(B)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},ut=()=>{var G;return null===(G=ye())||void 0===G?void 0:G.config},Jt=G=>{var B;return null===(B=ye())||void 0===B?void 0:B[`_${G}`]};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,W)=>{this.resolve=B,this.reject=W})}wrapCallback(B){return(W,U)=>{W?this.reject(W):this.resolve(U),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(W):B(W,U))}}}function ze(G,B){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=B||"demo-project",R=G.iat||0,L=G.sub||G.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:R,exp:R+3600,auth_time:R,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},G);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(se)),""].join(".")}class vn extends Error{constructor(B,W,U){super(W),this.code=B,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}}class un{constructor(B,W,U){this.service=B,this.serviceName=W,this.errors=U}create(B,...W){const U=W[0]||{},R=`${this.service}/${B}`,L=this.errors[B],se=L?function Xt(G,B){return G.replace(Ut,(W,U)=>{const R=B[U];return null!=R?String(R):`<${U}?>`})}(L,U):"Error";return new vn(R,`${this.serviceName}: ${se} (${R}).`,U)}}const Ut=/\{\$([^}]+)}/g;function ui(G,B){return Object.prototype.hasOwnProperty.call(G,B)}function Ni(G){for(const B in G)if(Object.prototype.hasOwnProperty.call(G,B))return!1;return!0}function dr(G,B){if(G===B)return!0;const W=Object.keys(G),U=Object.keys(B);for(const R of W){if(!U.includes(R))return!1;const L=G[R],se=B[R];if(gn(L)&&gn(se)){if(!dr(L,se))return!1}else if(L!==se)return!1}for(const R of U)if(!W.includes(R))return!1;return!0}function gn(G){return null!==G&&"object"==typeof G}function hr(G){const B=[];for(const[W,U]of Object.entries(G))Array.isArray(U)?U.forEach(R=>{B.push(encodeURIComponent(W)+"="+encodeURIComponent(R))}):B.push(encodeURIComponent(W)+"="+encodeURIComponent(U));return B.length?"&"+B.join("&"):""}function _r(G){const B={};return G.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[R,L]=U.split("=");B[decodeURIComponent(R)]=decodeURIComponent(L)}}),B}function Er(G){const B=G.indexOf("?");if(!B)return"";const W=G.indexOf("#",B);return G.substring(B,W>0?W:void 0)}function Yn(G,B){const W=new zi(G,B);return W.subscribe.bind(W)}class zi{constructor(B,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{B(this)}).catch(U=>{this.error(U)})}next(B){this.forEachObserver(W=>{W.next(B)})}error(B){this.forEachObserver(W=>{W.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,W,U){let R;if(void 0===B&&void 0===W&&void 0===U)throw new Error("Missing Observer.");R=function lt(G,B){if("object"!=typeof G||null===G)return!1;for(const W of B)if(W in G&&"function"==typeof G[W])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:W,complete:U},void 0===R.next&&(R.next=tt),void 0===R.error&&(R.error=tt),void 0===R.complete&&(R.complete=tt);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch(se){}}),this.observers.push(R),L}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,B)}sendOne(B,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{W(this.observers[B])}catch(U){"undefined"!=typeof console&&console.error&&console.error(U)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tt(){}function We(G,B=1e3,W=2){const U=B*Math.pow(W,G),R=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+R)}function en(G){return G&&G._delegate?G._delegate:G}},2938:(rt,Ie,k)=>{var p=k(5e3);let j=null;function O(){return j}const fe=new p.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function me(){return(0,p.LFG)(H)}()},providedIn:"platform"}),n})();const q=new p.OlP("Location Initialized");let H=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){te()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){te()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ue(){return new H((0,p.LFG)(fe))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function De(n){const e=(0,p.LFG)(fe).location;return new He((0,p.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new p.OlP("appBaseHref");let He=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+je(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+je(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(qe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(qe,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(ee(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ee(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=je,n.joinWithSlash=Se,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(p.LFG(pe),p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ee(){return new Ce((0,p.LFG)(pe),(0,p.LFG)(oe))}()},providedIn:"root"}),n})();function ee(n){return n.replace(/\/index.html$/,"")}class yo{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new yo(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),vs(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{vs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function vs(n,e){n.context.$implicit=e.item}let qs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Dr(n){return"server"===n}let Ha=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Ga((0,p.LFG)(fe),window)}),n})();class Ga{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ji(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ou(this.window.history)||Ou(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ou(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ws extends class na extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){j||(j=n)}(new ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qa(){return hn=hn||document.querySelector("base"),hn?hn.getAttribute("href"):null}();return null==t?null:function zs(n){ra=ra||document.createElement("a"),ra.setAttribute("href",n);const e=ra.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function po(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ra,hn=null;const Jn=new p.OlP("TRANSITION_ID"),Nn=[{provide:p.ip1,useFactory:function za(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Jn,fe,p.zs3],multi:!0}];class Xi{static init(){(0,p.VLi)(new Xi)}addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(_){d=d||_,u--,0==u&&r(d)};o.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let sr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const wo=new p.OlP("EventManagerPlugins");let ki=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class ku{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Is=(()=>{class n extends Kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ds),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ds))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ds(n){O().remove(n)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ws=/%COMP%/g;function bs(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?bs(n,o,t):(o=o.replace(Ws,n),t.push(o))}return t}function xe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Za=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new _n(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Fi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new Fu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=bs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ki),p.LFG(Is),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class _n{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=yt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=yt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xe(r)):this.eventManager.addEventListener(e,t,xe(r))}}class Fi extends _n{constructor(e,t,r,o){super(e),this.component=r;const u=bs(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Io(n){return"_ngcontent-%COMP%".replace(Ws,n)}(o+"-"+r.id),this.hostAttr=function Ld(n){return"_nghost-%COMP%".replace(Ws,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fu extends _n{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=bs(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sa=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Vd=["alt","control","meta","shift"],rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},or={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Li=(()=>{class n extends ku{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Vd.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),d+=_+".")}),d+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=o,g.fullKey=d,g}static getEventFullKey(t){let r="",o=function Do(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Zs.hasOwnProperty(e)&&(e=Zs[e]))}return rc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Vd.forEach(u=>{u!=o&&or[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ic=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function bo(){ws.makeCurrent(),Xi.init()},multi:!0},{provide:fe,useFactory:function Ud(){return(0,p.RDi)(document),document},deps:[]}]),oa=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Yr(){return new p.qLn},deps:[]},{provide:wo,useClass:sa,multi:!0,deps:[fe,p.R0b,p.Lbi]},{provide:wo,useClass:Li,multi:!0,deps:[fe]},{provide:Za,useClass:Za,deps:[ki,Is,p.AFp]},{provide:p.FYo,useExisting:Za},{provide:Kr,useExisting:Is},{provide:Is,useClass:Is,deps:[fe]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:ki,useClass:ki,deps:[wo,p.R0b]},{provide:class mn{},useClass:sr,deps:[]}];let Lu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Jn,useExisting:p.AFp},Nn]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:oa,imports:[qs,p.hGG]}),n})();"undefined"!=typeof window&&window;var xn=k(8996),Qs=k(8306);const{isArray:Jr}=Array,{getPrototypeOf:$u,prototype:Ya,keys:Hu}=Object;function So(n){if(1===n.length){const e=n[0];if(Jr(e))return{args:e,keys:null};if(function xo(n){return n&&"object"==typeof n&&$u(n)===Ya}(e)){const t=Hu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var da=k(8421),tn=k(7669),br=k(5403),It=k(4004);const{isArray:Qa}=Array;function Hd(n){return(0,It.U)(e=>function Ts(n,e){return Qa(e)?n(...e):n(e)}(n,e))}function Gu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Ja=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Vi=(()=>{class n extends Ja{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const ar=new p.OlP("NgValueAccessor"),Xa={provide:ar,useExisting:(0,p.Gpc)(()=>hi),multi:!0},hc=new p.OlP("CompositionEventMode");let hi=(()=>{class n extends Ja{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function As(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(hc,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([Xa]),p.qOj]}),n})();const $n=new p.OlP("NgValidators"),ss=new p.OlP("NgAsyncValidators");function xs(n){return null!=n}function er(n){const e=(0,p.QGY)(n)?(0,xn.D)(n):n;return(0,p.CqO)(e),e}function fa(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Wu(n,e){return e.map(t=>t(n))}function Zu(n){return n.map(e=>function Ro(n){return!n.validate}(e)?e:t=>e.validate(t))}function Dn(n){return null!=n?function Gd(n){if(!n)return null;const e=n.filter(xs);return 0==e.length?null:function(t){return fa(Wu(t,e))}}(Zu(n)):null}function tu(n){return null!=n?function mc(n){if(!n)return null;const e=n.filter(xs);return 0==e.length?null:function(t){return function qu(...n){const e=(0,tn.jO)(n),{args:t,keys:r}=So(n),o=new Qs.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let _=d,b=d;for(let A=0;A<d;A++){let N=!1;(0,da.Xf)(t[A]).subscribe((0,br.x)(u,z=>{N||(N=!0,b--),g[A]=z},()=>_--,void 0,()=>{(!_||!N)&&(b||u.next(r?Gu(r,g):g),u.complete())}))}});return e?o.pipe(Hd(e)):o}(Wu(t,e).map(er)).pipe((0,It.U)(fa))}}(Zu(n)):null}function ep(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zd(n){return n?Array.isArray(n)?n:[n]:[]}function yc(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ms(n,e){const t=zd(e);return zd(n).forEach(o=>{yc(t,o)||t.push(o)}),t}function np(n,e){return zd(e).filter(t=>!yc(n,t))}class Cn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Di extends Cn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Pn extends Cn{get formDirective(){return null}get path(){return null}}class Wd{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let pr=(()=>{class n extends Wd{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Di,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),No=(()=>{class n extends Wd{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Pn,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function ya(n,e){su(n,e),e.valueAccessor.writeValue(n.value),function va(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&wc(n,e)})}(n,e),function Yd(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Bi(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&wc(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function iu(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function no(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function su(n,e){const t=function qd(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ep(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function tp(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ep(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();no(e._rawValidators,o),no(e._rawAsyncValidators,o)}function wc(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Te(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const wt="VALID",bt="INVALID",it="PENDING",kn="DISABLED";function ro(n){return(as(n)?n.validators:n)||null}function Os(n){return Array.isArray(n)?Dn(n):n||null}function ji(n,e){return(as(e)?e.asyncValidators:n)||null}function ko(n){return Array.isArray(n)?tu(n):n||null}function as(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const us=n=>n instanceof Yu;function ls(n){return(n=>n instanceof op)(n)?n.value:n.getRawValue()}function sp(n,e){const t=us(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function mm(n,e){us(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new p.vHH(1002,"")})}class Ku{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Os(this._rawValidators),this._composedAsyncValidatorFn=ko(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===wt}get invalid(){return this.status===bt}get pending(){return this.status==it}get disabled(){return this.status===kn}get enabled(){return this.status!==kn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Os(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ko(e)}addValidators(e){this.setValidators(Ms(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ms(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(np(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(np(e,this._rawAsyncValidators))}hasValidator(e){return yc(this._rawValidators,e)}hasAsyncValidator(e){return yc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=it,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kn,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wt,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wt||this.status===it)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kn:wt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=it,this._hasOwnPendingAsyncValidator=!0;const t=er(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function tr(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=us(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof ym)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?kn:this.errors?bt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(it)?it:this._anyControlsHaveStatus(bt)?bt:wt}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){as(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class op extends Ku{constructor(e=null,t,r){super(ro(t),ji(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),as(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Te(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Te(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Yu extends Ku{constructor(e,t,r){super(ro(t),ji(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mm(this,e),Object.keys(e).forEach(r=>{sp(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=ls(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ym extends Ku{constructor(e,t,r){super(ro(t),ji(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){mm(this,e),e.forEach((r,o)=>{sp(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>ls(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const vm={provide:Pn,useExisting:(0,p.Gpc)(()=>_a)},Qu=(()=>Promise.resolve(null))();let _a=(()=>{class n extends Pn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Yu({},Dn(t),tu(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Qu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ya(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Qu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Qu.then(()=>{const r=this._findContainer(t.path),o=new Yu({});(function ou(n,e){su(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Qu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Qu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Y(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36($n,10),p.Y36(ss,10))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([vm]),p.qOj]}),n})();const Qd={provide:Di,useExisting:(0,p.Gpc)(()=>Ea)},Jd=(()=>Promise.resolve(null))();let Ea=(()=>{class n extends Di{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new op,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function re(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===hi?t=u:function V(n){return Object.getPrototypeOf(n.constructor)===Vi}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function S(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ya(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Jd.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Jd.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function Oo(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Pn,9),p.Y36($n,10),p.Y36(ss,10),p.Y36(ar,10),p.Y36(p.sBO,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Qd]),p.qOj,p.TTD]}),n})(),zn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Xu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),xm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Xu]]}),n})(),Mm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[xm]}),n})();function Tt(...n){const e=(0,tn.yG)(n);return(0,xn.D)(n,e)}var lu=k(7579);class Ps extends lu.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var rl=k(4671),pp=k(9672);function R_(n,e,t){n?(0,pp.f)(t,n,e):e()}var Nm=k(576);function Om(n,e){const t=(0,Nm.m)(n)?n:()=>n,r=o=>o.error(t());return new Qs.y(e?o=>e.schedule(r,0,o):r)}const sl=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Oc=k(8189);function gp(...n){return function N_(){return(0,Oc.J)(1)}()((0,xn.D)(n,(0,tn.yG)(n)))}function Pm(n){return new Qs.y(e=>{(0,da.Xf)(n()).subscribe(e)})}var cu=k(515),O_=k(727),$i=k(4482);function P_(){return(0,$i.e)((n,e)=>{let t=null;n._refCount++;const r=(0,br.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zI extends Qs.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$i.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new O_.w0;const t=this.getSubject();e.add(this.source.subscribe((0,br.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=O_.w0.EMPTY)}return e}refCount(){return P_()(this)}}function Ti(n,e){return(0,$i.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,br.x)(r,_=>{null==o||o.unsubscribe();let b=0;const A=u++;(0,da.Xf)(n(_,A)).subscribe(o=(0,br.x)(r,N=>r.next(e?e(_,N,A,b++):N),()=>{o=null,g()}))},()=>{d=!0,g()}))})}function Lo(n){return n<=0?()=>cu.E:(0,$i.e)((e,t)=>{let r=0;e.subscribe((0,br.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function du(...n){const e=(0,tn.yG)(n);return(0,$i.e)((t,r)=>{(e?gp(n,t,e):gp(n,t)).subscribe(r)})}function WI(n,e,t,r,o){return(u,d)=>{let g=t,_=e,b=0;u.subscribe((0,br.x)(d,A=>{const N=b++;_=g?n(_,A,N):(g=!0,A),r&&d.next(_)},o&&(()=>{g&&d.next(_),d.complete()})))}}function mp(n,e){return(0,$i.e)(WI(n,e,arguments.length>=2,!0))}function hu(n,e){return(0,$i.e)((t,r)=>{let o=0;t.subscribe((0,br.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function ol(n){return(0,$i.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,br.x)(t,void 0,void 0,d=>{u=(0,da.Xf)(n(d,ol(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Ai=k(5577);function yp(n,e){return(0,Nm.m)(e)?(0,Ai.z)(n,e,1):(0,Ai.z)(n,1)}function vp(n){return n<=0?()=>cu.E:(0,$i.e)((e,t)=>{let r=[];e.subscribe((0,br.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function k_(n=ZI){return(0,$i.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ZI(){return new sl}function F_(n){return(0,$i.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Pc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hu((o,u)=>n(o,u,r)):rl.y,Lo(1),t?F_(e):k_(()=>new sl))}var cs=k(8505);class Vo{constructor(e,t){this.id=e,this.url=t}}class ks extends Vo{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ia extends Vo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class km extends Vo{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class L_ extends Vo{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class V_ extends Vo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _A extends Vo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EA extends Vo{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wA extends Vo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fm extends Vo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ep{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wp{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class IA{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DA{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class U_{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YI{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Kt="primary";class QI{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function al(n){return new QI(n)}const sh="ngNavigationCancelingError";function Lm(n){const e=Error("NavigationCancelingError: "+n);return e[sh]=!0,e}function JI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Uo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!j_(n[o],e[o]))return!1;return!0}function j_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Ip(n){return Array.prototype.concat.apply([],n)}function Um(n){return n.length>0?n[n.length-1]:null}function ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Bo(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,xn.D)(Promise.resolve(n)):Tt(n)}const eD={exact:function Dp(n,e,t){if(!ll(n.segments,e.segments)||!Cp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dp(n.children[r],e.children[r],t))return!1;return!0},subset:$_},tD={exact:function oh(n,e){return Uo(n,e)},subset:function rD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>j_(n[t],e[t]))},ignored:()=>!0};function nD(n,e,t){return eD[t.paths](n.root,e.root,t.matrixParams)&&tD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function $_(n,e,t){return bp(n,e,e.segments,t)}function bp(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ll(o,t)||e.hasChildren()||!Cp(o,t,r))}if(n.segments.length===t.length){if(!ll(n.segments,t)||!Cp(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!$_(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ll(n.segments,o)&&Cp(n.segments,o,r)&&n.children[Kt])&&bp(n.children[Kt],e,u,r)}}function Cp(n,e,t){return e.every((r,o)=>tD[t](n[o].parameters,r.parameters))}class ul{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=al(this.queryParams)),this._queryParamMap}toString(){return oD.serialize(this)}}class Wt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ei(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tp(this)}}class ah{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=al(this.parameters)),this._parameterMap}toString(){return aD(this)}}function ll(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class H_{}class G_{parse(e){const t=new cD(e);return new ul(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uh(e.root,!0)}`,r=function CA(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Da(t)}=${Da(o)}`).join("&"):`${Da(t)}=${Da(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function jo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const oD=new G_;function Tp(n){return n.segments.map(e=>aD(e)).join("/")}function uh(n,e){if(!n.hasChildren())return Tp(n);if(e){const t=n.children[Kt]?uh(n.children[Kt],!1):"",r=[];return ei(n.children,(o,u)=>{u!==Kt&&r.push(`${u}:${uh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function sD(n,e){let t=[];return ei(n.children,(r,o)=>{o===Kt&&(t=t.concat(e(r,o)))}),ei(n.children,(r,o)=>{o!==Kt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Kt?[uh(n.children[Kt],!1)]:[`${o}:${uh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${Tp(n)}/${t[0]}`:`${Tp(n)}/(${t.join("//")})`}}function q_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Da(n){return q_(n).replace(/%3B/gi,";")}function z_(n){return q_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bm(n){return decodeURIComponent(n)}function jm(n){return Bm(n.replace(/\+/g,"%20"))}function aD(n){return`${z_(n.path)}${function W_(n){return Object.keys(n).map(e=>`;${z_(e)}=${z_(n[e])}`).join("")}(n.parameters)}`}const Z_=/^[^\/()?;=#]+/;function Ap(n){const e=n.match(Z_);return e?e[0]:""}const K_=/^[^=?&#]+/,lD=/^[^&#]+/;class cD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new Wt(e,t)),r}parseSegment(){const e=Ap(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ah(Bm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ap(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ap(this.remaining);o&&(r=o,this.capture(r))}e[Bm(t)]=Bm(r)}parseQueryParam(e){const t=function uD(n){const e=n.match(K_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function oo(n){const e=n.match(lD);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=jm(t),u=jm(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ap(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Kt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Kt]:new Wt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class $m{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Hm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Hm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Gm(e,this._root).map(t=>t.value)}}function Hm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Hm(n,t);if(r)return r}return null}function Gm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gm(n,t);if(r.length)return r.unshift(e),r}return[]}class ba{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function kc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class qm extends $m{constructor(e,t){super(e),this.snapshot=t,Lc(this,e)}toString(){return this.snapshot.toString()}}function Y_(n,e){const t=function dD(n,e){const d=new lh([],{},{},"",{},Kt,e,null,n.root,-1,{});return new zm("",new ba(d,[]))}(n,e),r=new Ps([new ah("",{})]),o=new Ps({}),u=new Ps({}),d=new Ps({}),g=new Ps(""),_=new Fc(r,o,d,g,u,Kt,e,t.root);return _.snapshot=t.root,new qm(new ba(_,[]),t)}class Fc{constructor(e,t,r,o,u,d,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>al(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>al(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function St(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Q_(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lh{constructor(e,t,r,o,u,d,g,_,b,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=al(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=al(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zm extends $m{constructor(e,t){super(t),this.url=e,Lc(this,t)}toString(){return Fs(this._root)}}function Lc(n,e){e.value._routerState=n,e.children.forEach(t=>Lc(n,t))}function Fs(n){const e=n.children.length>0?` { ${n.children.map(Fs).join(", ")} } `:"";return`${n.value}${e}`}function Sp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Uo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Uo(e.params,t.params)||n.params.next(t.params),function mr(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Uo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Uo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Wm(n,e){const t=Uo(n.params,e.params)&&function iD(n,e){return ll(n,e)&&n.every((t,r)=>Uo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Wm(n.parent,e.parent))}function ds(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Km(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ds(n,r,o);return ds(n,r)})}(n,e,t);return new ba(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>ds(n,g)),d}}const r=function J_(n){return new Fc(new Ps(n.url),new Ps(n.params),new Ps(n.queryParams),new Ps(n.fragment),new Ps(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>ds(n,u));return new ba(r,o)}}function Qm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Vc(n){return"object"==typeof n&&null!=n&&n.outlets}function X_(n,e,t,r,o){let u={};if(r&&ei(r,(g,_)=>{u[_]=Array.isArray(g)?g.map(b=>`${b}`):`${g}`}),n===e)return new ul(t,u,o);const d=ch(n,e,t);return new ul(d,u,o)}function ch(n,e,t){const r={};return ei(n.children,(o,u)=>{r[u]=o===e?t:ch(o,e,t)}),new Wt(n.segments,r)}class dh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qm(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Vc);if(o&&o!==Um(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function e0(n,e,t){if(n||(n=new Wt([],{})),0===n.segments.length&&n.hasChildren())return xp(n,e,t);const r=function fD(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(Vc(g))break;const _=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!pD(_,b,d))return u;r+=2}else{if(!pD(_,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Wt(n.segments.slice(0,r.pathIndex),{});return u.children[Kt]=new Wt(n.segments.slice(r.pathIndex),n.children),xp(u,0,o)}return r.match&&0===o.length?new Wt(n.segments,{}):r.match&&!n.hasChildren()?Mp(n,e,t):r.match?xp(n,0,o):Mp(n,e,t)}function xp(n,e,t){if(0===t.length)return new Wt(n.segments,{});{const r=function hD(n){return Vc(n[0])?n[0].outlets:{[Kt]:n}}(t),o={};return ei(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=e0(n.children[d],e,u))}),ei(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Wt(n.segments,o)}}function Mp(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Vc(u)){const _=AA(u.outlets);return new Wt(r,_)}if(0===o&&Qm(t[0])){r.push(new ah(n.segments[e].path,t0(t[0]))),o++;continue}const d=Vc(u)?u.outlets[Kt]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&Qm(g)?(r.push(new ah(d,t0(g))),o+=2):(r.push(new ah(d,{})),o++)}return new Wt(r,{})}function AA(n){const e={};return ei(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Mp(new Wt([],{}),0,t))}),e}function t0(n){const e={};return ei(n,(t,r)=>e[r]=`${t}`),e}function pD(n,e,t){return n==t.path&&Uo(e,t.parameters)}class r0{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=kc(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),ei(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=kc(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=kc(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=kc(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new YI(u.value.snapshot))}),e.children.length&&this.forwardEvent(new DA(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Sp(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),Sp(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=function gD(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),_=g?g.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=_,d.outlet&&d.outlet.activateWith(o,_),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class fh{constructor(e,t){this.routes=e,this.module=t}}function cl(n){return"function"==typeof n}function Uc(n){return n instanceof ul}const Rp=Symbol("INITIAL_VALUE");function Np(){return Ti(n=>function Rm(...n){const e=(0,tn.yG)(n),t=(0,tn.jO)(n),{args:r,keys:o}=So(n);if(0===r.length)return(0,xn.D)([],e);const u=new Qs.y(function il(n,e,t=rl.y){return r=>{R_(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let _=0;_<o;_++)R_(e,()=>{const b=(0,xn.D)(n[_],e);let A=!1;b.subscribe((0,br.x)(r,N=>{u[_]=N,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Gu(o,d):rl.y));return t?u.pipe(Hd(t)):u}(n.map(e=>e.pipe(Lo(1),du(Rp)))).pipe(mp((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==Rp?o:(u===Rp&&(r=!0),r||!1!==u&&d!==t.length-1&&!Uc(u)?o:u),e)},Rp),hu(e=>e!==Rp),(0,It.U)(e=>Uc(e)?e:!0===e),Lo(1)))}class OA{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ls,this.attachRef=null}}class Ls{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new OA,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ph=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=u||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,_=new mD(t,g,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ls),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class mD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fc?this.route:e===Ls?this.childContexts:this.parent.get(e,t)}}let ey=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[ph],encapsulation:2}),n})();function Op(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];s0(r,ty(e,r))}}function s0(n,e){n.children&&Op(n.children,e)}function ty(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ny(n){const e=n.children&&n.children.map(ny),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=ey),t}function Tr(n){return n.outlet||Kt}function ry(n,e){const t=n.filter(r=>Tr(r)===e);return t.push(...n.filter(r=>Tr(r)!==e)),t}const o0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},o0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||JI)(t,n,e);if(!u)return Object.assign({},o0);const d={};ei(u.posParams,(_,b)=>{d[b]=_.path});const g=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Pp(n,e,t,r,o="corrected"){if(t.length>0&&function vD(n,e,t){return t.some(r=>Ca(n,e,r)&&Tr(r)!==Kt)}(n,t,r)){const d=new Wt(e,function yD(n,e,t,r){const o={};o[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Tr(u)!==Kt){const d=new Wt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Tr(u)]=d}return o}(n,e,r,new Wt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function gh(n,e,t){return t.some(r=>Ca(n,e,r))}(n,t,r)){const d=new Wt(n.segments,function a0(n,e,t,r,o,u){const d={};for(const g of r)if(Ca(n,t,g)&&!o[Tr(g)]){const _=new Wt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Tr(g)]=_}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Wt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ca(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function kp(n,e,t,r){return!!(Tr(n)===r||r!==Kt&&Ca(e,t,n))&&("**"===n.path||Bc(e,n,t).matched)}function dl(n,e,t){return 0===e.length&&!n.children[t]}class fu{constructor(e){this.segmentGroup=e||null}}class hl{constructor(e){this.urlTree=e}}function mh(n){return Om(new fu(n))}function iy(n){return Om(new hl(n))}class l0{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Pp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Wt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Kt).pipe((0,It.U)(u=>this.createUrlTree(ay(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ol(u=>{if(u instanceof hl)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof fu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Kt).pipe((0,It.U)(o=>this.createUrlTree(ay(o),e.queryParams,e.fragment))).pipe(ol(o=>{throw o instanceof fu?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Wt([],{[Kt]:e}):e;return new ul(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new Wt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,xn.D)(o).pipe(yp(u=>{const d=r.children[u],g=ry(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,It.U)(_=>({segment:_,outlet:u})))}),mp((u,d)=>(u[d.outlet]=d.segment,u),{}),function KI(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hu((o,u)=>n(o,u,r)):rl.y,vp(1),t?F_(e):k_(()=>new sl))}())}expandSegment(e,t,r,o,u,d){return(0,xn.D)(r).pipe(yp(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(ol(b=>{if(b instanceof fu)return Tt(null);throw b}))),Pc(g=>!!g),ol((g,_)=>{if(g instanceof sl||"EmptyError"===g.name)return dl(t,o,u)?Tt(new Wt([],{})):mh(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return kp(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):mh(t):mh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?iy(u):this.lineralizeSegments(r,u).pipe((0,Ai.z)(d=>{const g=new Wt(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:_,remainingSegments:b,positionalParamSegments:A}=Bc(t,o,u);if(!g)return mh(t);const N=this.applyRedirectCommands(_,o.redirectTo,A);return o.redirectTo.startsWith("/")?iy(N):this.lineralizeSegments(o,N).pipe((0,Ai.z)(z=>this.expandSegment(e,t,r,z.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(N=>(r._loadedConfig=N,new Wt(o,{})))):Tt(new Wt(o,{}));const{matched:d,consumedSegments:g,remainingSegments:_}=Bc(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Ai.z)(A=>{const N=A.module,z=A.routes,{segmentGroup:K,slicedSegments:ce}=Pp(t,g,_,z),Le=new Wt(K.segments,K.children);if(0===ce.length&&Le.hasChildren())return this.expandChildren(N,z,Le).pipe((0,It.U)(Gt=>new Wt(g,Gt)));if(0===z.length&&0===ce.length)return Tt(new Wt(g,{}));const $e=Tr(r)===u;return this.expandSegment(N,Le,z,ce,$e?Kt:u,!0).pipe((0,It.U)(Bt=>new Wt(g.concat(Bt.segments),Bt.children)))})):mh(t)}getChildConfig(e,t,r){return t.children?Tt(new fh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Ai.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,It.U)(u=>(t._loadedConfig=u,u))):function sy(n){return Om(Lm(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Tt(new fh([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Tt(o.map(d=>{const g=e.get(d);let _;if(function xA(n){return n&&cl(n.canLoad)}(g))_=g.canLoad(t,r);else{if(!cl(g))throw new Error("Invalid CanLoad guard");_=g(t,r)}return Bo(_)})).pipe(Np(),(0,cs.b)(d=>{if(!Uc(d))return;const g=Lm(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw g.url=d,g}),(0,It.U)(d=>!0===d)):Tt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Tt(r);if(o.numberOfChildren>1||!o.children[Kt])return Om(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new ul(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ei(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return ei(t.children,(g,_)=>{d[_]=this.createSegmentGroup(e,g,r,o)}),new Wt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function ay(n){const e={};for(const r of Object.keys(n.children)){const u=ay(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Fp(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new Wt(n.segments.concat(e.segments),e.children)}return n}(new Wt(n.segments,e))}class _D{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yh{constructor(e,t){this.component=e,this.route=t}}function d0(n,e,t){const r=n._root;return _h(r,e?e._root:null,t,[r.value])}function vh(n,e,t){const r=function wD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function _h(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=kc(e);return n.children.forEach(d=>{(function hs(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const _=function ID(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ll(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ll(n.url,e.url)||!Uo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wm(n,e)||!Uo(n.queryParams,e.queryParams);default:return!Wm(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new _D(r)):(u.data=d.data,u._resolvedData=d._resolvedData),_h(n,e,u.component?g?g.children:null:t,r,o),_&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new yh(g.outlet.component,d))}else d&&Eh(e,g,o),o.canActivateChecks.push(new _D(r)),_h(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),ei(u,(d,g)=>Eh(d,t.getContext(g),o)),o}function Eh(n,e,t){const r=kc(n),o=n.value;ei(r,(u,d)=>{Eh(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new yh(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class CD{}function p0(n){return new Qs.y(e=>e.error(n))}class TD{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Pp(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Kt);if(null===t)return null;const r=new lh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ba(r,t),u=new zm(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=St(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],g=ry(e,u),_=this.processSegmentGroup(g,d,u);if(null===_)return null;r.push(..._)}const o=ly(r);return function m0(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return dl(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!kp(e,t,r,o))return null;let u,d=[],g=[];if("**"===e.path){const K=r.length>0?Um(r).parameters:{};u=new lh(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lp(e),Tr(e),e.component,e,y0(t),ao(t)+r.length,v0(e))}else{const K=Bc(t,e,r);if(!K.matched)return null;d=K.consumedSegments,g=K.remainingSegments,u=new lh(d,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lp(e),Tr(e),e.component,e,y0(t),ao(t)+d.length,v0(e))}const _=function AD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=Pp(t,d,g,_.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const K=this.processChildren(_,b);return null===K?null:[new ba(u,K)]}if(0===_.length&&0===A.length)return[new ba(u,[])];const N=Tr(e)===o,z=this.processSegment(_,b,A,N?Kt:o);return null===z?null:[new ba(u,z)]}}function SD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ly(n){const e=[],t=new Set;for(const r of n){if(!SD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=ly(r.children);e.push(new ba(r.value,o))}return e.filter(r=>!t.has(r))}function y0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ao(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Lp(n){return n.data||{}}function v0(n){return n.resolve||{}}function E0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wh(n){return Ti(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,It.U)(()=>e)):Tt(e)})}class Vp extends class PD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ih=new p.OlP("ROUTES");class w0{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new fh(Ip(d.injector.get(Ih,void 0,p.XFs.Self|p.XFs.Optional)).map(ny),d)}),ol(u=>{throw t._loader$=void 0,u}));return t._loader$=new zI(o,()=>new lu.x).pipe(P_()),t._loader$}loadModuleFactory(e){return Bo(e()).pipe((0,Ai.z)(t=>t instanceof p.YKP?Tt(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class dy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function I0(n){throw n}function VA(n,e,t){return e.parse("/")}function kD(n,e){return Tt(null)}const hy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},UA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fi=(()=>{class n{constructor(t,r,o,u,d,g,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new lu.x,this.errorHandler=I0,this.malformedUriErrorHandler=VA,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kD,afterPreactivation:kD},this.urlHandlingStrategy=new dy,this.routeReuseStrategy=new Vp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(p.h0i),this.console=d.get(p.c2e);const N=d.get(p.R0b);this.isNgZoneEnabled=N instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function XI(){return new ul(new Wt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new w0(d,g,z=>this.triggerEvent(new Ep(z)),z=>this.triggerEvent(new wp(z))),this.routerState=Y_(this.currentUrlTree,this.rootComponentType),this.transitions=new Ps({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(hu(o=>0!==o.id),(0,It.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ti(o=>{let u=!1,d=!1;return Tt(o).pipe((0,cs.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ti(g=>{const _=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return fy(g.source)&&(this.browserUrlTree=g.extractedUrl),Tt(g).pipe(Ti(N=>{const z=this.transitions.getValue();return r.next(new ks(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),z!==this.transitions.getValue()?cu.E:Promise.resolve(N)}),function c0(n,e,t,r){return Ti(o=>function oy(n,e,t,r,o){return new l0(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,cs.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function MD(n,e,t,r,o){return(0,Ai.z)(u=>function g0(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new TD(n,e,t,r,o,u).recognize();return null===d?p0(new CD):Tt(d)}catch(d){return p0(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,It.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,cs.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(K,N)}this.browserUrlTree=N.urlAfterRedirects}const z=new V_(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(z)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:z,extractedUrl:K,source:ce,restoredState:Le,extras:$e}=g,Pt=new ks(z,this.serializeUrl(K),ce,Le);r.next(Pt);const Bt=Y_(K,this.rootComponentType).snapshot;return Tt(Object.assign(Object.assign({},g),{targetSnapshot:Bt,urlAfterRedirects:K,extras:Object.assign(Object.assign({},$e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),cu.E}),wh(g=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:K}}=g;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!K})}),(0,cs.b)(g=>{const _=new _A(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),(0,It.U)(g=>Object.assign(Object.assign({},g),{guards:d0(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function PA(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function kA(n,e,t,r){return(0,xn.D)(n).pipe((0,Ai.z)(o=>function bD(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Tt(u.map(g=>{const _=vh(g,e,o);let b;if(function NA(n){return n&&cl(n.canDeactivate)}(_))b=Bo(_.canDeactivate(n,e,t,r));else{if(!cl(_))throw new Error("Invalid CanDeactivate guard");b=Bo(_(n,e,t,r))}return b.pipe(Pc())})).pipe(Np()):Tt(!0)}(o.component,o.route,t,e,r)),Pc(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Ai.z)(g=>g&&function SA(n){return"boolean"==typeof n}(g)?function h0(n,e,t,r){return(0,xn.D)(e).pipe(yp(o=>gp(function DD(n,e){return null!==n&&e&&e(new IA(n)),Tt(!0)}(o.route.parent,r),function FA(n,e){return null!==n&&e&&e(new U_(n)),Tt(!0)}(o.route,r),function f0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function ED(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Pm(()=>Tt(d.guards.map(_=>{const b=vh(_,d.node,t);let A;if(function RA(n){return n&&cl(n.canActivateChild)}(b))A=Bo(b.canActivateChild(r,n));else{if(!cl(b))throw new Error("Invalid CanActivateChild guard");A=Bo(b(r,n))}return A.pipe(Pc())})).pipe(Np())));return Tt(u).pipe(Np())}(n,o.path,t),function uy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Tt(!0);const o=r.map(u=>Pm(()=>{const d=vh(u,e,t);let g;if(function MA(n){return n&&cl(n.canActivate)}(d))g=Bo(d.canActivate(e,n));else{if(!cl(d))throw new Error("Invalid CanActivate guard");g=Bo(d(e,n))}return g.pipe(Pc())}));return Tt(o).pipe(Np())}(n,o.route,t))),Pc(o=>!0!==o,!0))}(r,u,n,e):Tt(g)),(0,It.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,cs.b)(g=>{if(Uc(g.guardsResult)){const b=Lm(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw b.url=g.guardsResult,b}const _=new EA(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(_)}),hu(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),wh(g=>{if(g.guards.canActivateChecks.length)return Tt(g).pipe((0,cs.b)(_=>{const b=new wA(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),Ti(_=>{let b=!1;return Tt(_).pipe(function LA(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Tt(t);let u=0;return(0,xn.D)(o).pipe(yp(d=>function _0(n,e,t,r){return function RD(n,e,t,r){const o=E0(n);if(0===o.length)return Tt({});const u={};return(0,xn.D)(o).pipe((0,Ai.z)(d=>function ND(n,e,t,r){const o=vh(n,e,r);return Bo(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,cs.b)(g=>{u[d]=g}))),vp(1),(0,Ai.z)(()=>E0(u).length===o.length?Tt(u):cu.E))}(n._resolve,n,e,r).pipe((0,It.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),St(n,t).resolve),null)))}(d.route,r,n,e)),(0,cs.b)(()=>u++),vp(1),(0,Ai.z)(d=>u===o.length?Tt(t):cu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,cs.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,cs.b)(_=>{const b=new Fm(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),wh(g=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:N,extras:{skipLocationChange:z,replaceUrl:K}}=g;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:N,skipLocationChange:!!z,replaceUrl:!!K})}),(0,It.U)(g=>{const _=function Zm(n,e,t){const r=ds(n,e._root,t?t._root:void 0);return new qm(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:_})}),(0,cs.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new r0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,cs.b)({next(){u=!0},complete(){u=!0}}),function _p(n){return(0,$i.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),ol(g=>{if(d=!0,function Vm(n){return n&&n[sh]}(g)){const _=Uc(g.url);_||(this.navigated=!0,this.restoreHistory(o,!0));const b=new km(o.id,this.serializeUrl(o.extractedUrl),g.message);r.next(b),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fy(o.source)};this.scheduleNavigation(A,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const _=new L_(o.id,this.serializeUrl(o.extractedUrl),g);r.next(_);try{o.resolve(this.errorHandler(g))}catch(b){o.reject(b)}}return cu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const _=Object.assign({},d);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Op(t),this.config=t.map(ny),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:_}=r,b=o||this.routerState.root,A=_?this.currentUrlTree.fragment:d;let N=null;switch(g){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function Ym(n,e,t,r,o){if(0===t.length)return X_(e.root,e.root,e.root,r,o);const u=function Jm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dh(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return ei(u.outlets,(_,b)=>{g[b]="string"==typeof _?_.split("/"):_}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new dh(t,e,r)}(t);if(u.toRoot())return X_(e.root,e.root,new Wt([],{}),r,o);const d=function Xm(n,e,t){if(n.isAbsolute)return new hh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new hh(u,u===e.root,0)}const r=Qm(n.commands[0])?0:1;return function TA(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new hh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=d.processChildren?xp(d.segmentGroup,d.index,u.commands):e0(d.segmentGroup,d.index,u.commands);return X_(e.root,d.segmentGroup,g,r,o)}(b,this.currentUrlTree,t,N,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Uc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function D0(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},hy):!1===r?Object.assign({},UA):r,Uc(t))return nD(this.currentUrlTree,t,o);const u=this.parseUrl(t);return nD(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ia(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var g,_;if(this.disposed)return Promise.resolve(!1);let b,A,N;d?(b=d.resolve,A=d.reject,N=d.promise):N=new Promise((ce,Le)=>{b=ce,A=Le});const z=++this.navigationId;let K;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),K=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):K=0,this.setTransition({id:z,targetPageId:K,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ce=>Promise.reject(ce))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new km(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function fy(n){return"imperative"!==n}let pu=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new lu.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:fl(this.skipLocationChange),replaceUrl:fl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(fi),p.Y36(Fc),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})(),Dh=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new lu.x,this.subscription=t.events.subscribe(u=>{u instanceof Ia&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const g={skipLocationChange:fl(this.skipLocationChange),replaceUrl:fl(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fl(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(fi),p.Y36(Fc),p.Y36(pe))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();function fl(n){return""===n||!!n}class b0{}class LD{preload(e,t){return Tt(null)}}let Bp=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new w0(o,r,_=>t.triggerEvent(new Ep(_)),_=>t.triggerEvent(new wp(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(hu(t=>t instanceof Ia),yp(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,xn.D)(o).pipe((0,Oc.J)(),(0,It.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Ai.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(b0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),jp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ks?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ia&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof B_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new B_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const uo=new p.OlP("ROUTER_CONFIGURATION"),T0=new p.OlP("ROUTER_FORROOT_GUARD"),py=[Ce,{provide:H_,useClass:G_},{provide:fi,useFactory:function UD(n,e,t,r,o,u,d={},g,_){const b=new fi(null,n,e,t,r,o,Ip(u));return g&&(b.urlHandlingStrategy=g),_&&(b.routeReuseStrategy=_),function M0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(A=>{var N,z;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(z=console.groupEnd)||void 0===z||z.call(console)}),b},deps:[H_,Ls,Ce,p.zs3,p.Sil,Ih,uo,[class cy{},new p.FiY],[class OD{},new p.FiY]]},Ls,{provide:Fc,useFactory:function jc(n){return n.routerState.root},deps:[fi]},Bp,LD,class FD{preload(e,t){return t().pipe(ol(()=>Tt(null)))}},{provide:uo,useValue:{enableTracing:!1}}];function A0(){return new p.PXZ("Router",fi)}let gy=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[py,x0(t),{provide:T0,useFactory:my,deps:[[fi,new p.FiY,new p.tp0]]},{provide:uo,useValue:r||{}},{provide:pe,useFactory:VD,deps:[oe,[new p.tBr(qe),new p.FiY],uo]},{provide:jp,useFactory:S0,deps:[fi,Ha,uo]},{provide:b0,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:LD},{provide:p.PXZ,multi:!0,useFactory:A0},[$p,{provide:p.ip1,multi:!0,useFactory:BD,deps:[$p]},{provide:pl,useFactory:jD,deps:[$p]},{provide:p.tb,multi:!0,useExisting:pl}]]}}static forChild(t){return{ngModule:n,providers:[x0(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(T0,8),p.LFG(fi,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function S0(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new jp(n,e,t)}function VD(n,e,t={}){return t.useHash?new Re(n,e):new He(n,e)}function my(n){return"guarded"}function x0(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:Ih,multi:!0,useValue:n}]}let $p=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new lu.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(g=>r=g),u=this.injector.get(fi),d=this.injector.get(uo);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(uo),o=this.injector.get(Bp),u=this.injector.get(jp),d=this.injector.get(fi),g=this.injector.get(p.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function BD(n){return n.appInitializer.bind(n)}function jD(n){return n.bootstrapListener.bind(n)}const pl=new p.OlP("Router Initializer");let HD=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-varify-email"]],decls:17,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],[1,"col-md-12","text-center"],[2,"text-decoration","none"],["routerLink","/login",1,"text-danger"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form")(6,"div",5)(7,"h4",6),p._uU(8,"Register"),p.qZA()(),p.TgZ(9,"div",5)(10,"label",7),p._uU(11,"Email"),p.qZA()(),p.TgZ(12,"div",8)(13,"a",9),p._uU(14,"Have an Account ? "),p.TgZ(15,"span",10),p._uU(16,"Login"),p.qZA()()()()()()()()())},directives:[zn,No,_a,pu],styles:[""]}),n})();var GD=k(8247),Ht=k(2090),Aa=k(9681),Sa=k(1877),bh=k(4859),R0=k(6451),Ch=k(5363),qD=k(6063);class zD extends lu.x{constructor(e=1/0,t=1/0,r=qD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)g=_;g&&r.splice(0,g+1)}}}var WD=k(3099);function N0(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,WD.B)({connector:()=>new zD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function yy(n,e){return(0,Nm.m)(e)?Ti(()=>n,e):Ti(()=>n)}var O0=k(9468),ti=k(5813),lo=k(2011);k(5867);var we=k(5861);const Th=new Map,L0={activated:!1,tokenObservers:[]},eb={initialized:!1,enabled:!1};function ni(n){return Th.get(n)||Object.assign({},L0)}function Gp(){return eb}class ib{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function Ey(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ar=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gu(n){if(!ni(n).activated)throw Ar.create("use-before-activation",{appName:n.name})}function Ah(n,e){return mu.apply(this,arguments)}function mu(){return(mu=(0,we.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const K=yield d.getHeartbeatsHeader();K&&(u["X-Firebase-Client"]=K)}const g={method:"POST",body:JSON.stringify(e),headers:u};let _,b;try{_=yield fetch(n,g)}catch(K){throw Ar.create("fetch-network-error",{originalErrorMessage:null===(r=K)||void 0===r?void 0:r.message})}if(200!==_.status)throw Ar.create("fetch-status-error",{httpStatus:_.status});try{b=yield _.json()}catch(K){throw Ar.create("fetch-parse-error",{originalErrorMessage:null===(o=K)||void 0===o?void 0:o.message})}const A=b.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw Ar.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const N=1e3*Number(A[1]),z=Date.now();return{token:b.token,expireTimeMillis:z+N,issuedAtTimeMillis:z}})).apply(this,arguments)}function Wc(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ho="firebase-app-check-store";let xa=null;function wy(){return xa||(xa=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(Ar.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Ho,{keyPath:"compositeKey"})}}catch(r){e(Ar.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),xa)}function zp(){return(zp=(0,we.Z)(function*(n,e){const r=(yield wy()).transaction(Ho,"readwrite"),u=r.objectStore(Ho).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=_=>{d()},r.onerror=_=>{var b;g(Ar.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Yc=new Sa.Yd("@firebase/app-check");function Zp(n,e){return(0,Ht.hl)()?function U0(n,e){return function Iy(n,e){return zp.apply(this,arguments)}(function $0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Yc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ty(){return Gp().enabled}function H0(){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,we.Z)(function*(){const n=Gp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ub={error:"UNKNOWN_ERROR"};function GA(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function Yp(n){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,we.Z)(function*(n,e=!1){const t=n.app;gu(t);const r=ni(t);let u,o=r.token;if(o&&!Qc(o)&&(r.token=void 0,o=void 0),!o){const _=yield r.cachedTokenPromise;_&&(Qc(_)?o=_:yield Zp(t,void 0))}if(!e&&o&&Qc(o))return{token:o.token};let g,d=!1;if(Ty()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ah(Wc(t,yield H0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const _=yield r.exchangeTokenPromise;return yield Zp(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield ni(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Yc.warn(_.message):Yc.error(_),u=_}return o?u?g=Qc(o)?{token:o.token,internalError:u}:Sy(u):(g={token:o.token},r.token=o,yield Zp(t,o)):g=Sy(u),d&&cb(t,g),g})).apply(this,arguments)}function Ay(n,e){const t=ni(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lb(n){const{app:e}=n,t=ni(e);let r=t.tokenRefresher;r||(r=function qA(n){const{app:e}=n;return new ib((0,we.Z)(function*(){let r;if(r=ni(e).token?yield Yp(n,!0):yield Yp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function cb(n,e){const t=ni(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Qc(n){return n.expireTimeMillis-Date.now()>0}function Sy(n){return{token:GA(ub),error:n}}class zA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ni(this.app);for(const t of e)Ay(this.app,t.next);return Promise.resolve()}}const J0="app-check-internal";!function tg(){(0,Aa._registerComponent)(new bh.wA("app-check",n=>function db(n,e){return new zA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(J0).initialize()})),(0,Aa._registerComponent)(new bh.wA(J0,n=>function Jc(n){return{getToken:e=>Yp(n,e),addTokenListener:e=>function xh(n,e,t,r){const{app:o}=n,u=ni(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Qc(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),lb(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>lb(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ay(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Aa.registerVersion)("@firebase/app-check","0.5.17")}();class X0{constructor(){return(0,ti.vb)("app-check")}}"undefined"!=typeof window&&window,k(127);const oE=new p.OlP("angularfire2.auth.use-emulator"),Py=new p.OlP("angularfire2.auth.settings"),ng=new p.OlP("angularfire2.auth.tenant-id"),ky=new p.OlP("angularfire2.auth.langugage-code"),Fy=new p.OlP("angularfire2.auth.use-device-language"),Ly=new p.OlP("angularfire.auth.persistence"),Vy=(n,e,t,r,o,u,d,g)=>(0,lo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),d)for(const[b,A]of Object.entries(d))_.settings[b]=A;return g&&_.setPersistence(g),_},[t,r,o,u,d,g]);let rg=(()=>{class n{constructor(t,r,o,u,d,g,_,b,A,N,z,K){const ce=new lu.x,Le=Tt(void 0).pipe((0,Ch.Q)(d.outsideAngular),Ti(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,It.U)(()=>(0,lo.on)(t,u,r)),(0,It.U)($e=>Vy($e,u,g,b,A,N,_,z)),N0({bufferSize:1,refCount:!1}));if(Dr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tt(null);else{Le.pipe(Pc()).subscribe();const Pt=Le.pipe(Ti(Vt=>Vt.getRedirectResult().then(kt=>kt,()=>null)),ti.iC,N0({bufferSize:1,refCount:!1})),Bt=Le.pipe(Ti(Vt=>new Qs.y(kt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onAuthStateChanged(Yt=>kt.next(Yt),Yt=>kt.error(Yt),()=>kt.complete()))})))),Gt=Le.pipe(Ti(Vt=>new Qs.y(kt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onIdTokenChanged(Yt=>kt.next(Yt),Yt=>kt.error(Yt),()=>kt.complete()))}))));this.authState=Pt.pipe(yy(Bt),(0,O0.R)(d.outsideAngular),(0,Ch.Q)(d.insideAngular)),this.user=Pt.pipe(yy(Gt),(0,O0.R)(d.outsideAngular),(0,Ch.Q)(d.insideAngular)),this.idToken=this.user.pipe(Ti(Vt=>Vt?(0,xn.D)(Vt.getIdToken()):Tt(null))),this.idTokenResult=this.user.pipe(Ti(Vt=>Vt?(0,xn.D)(Vt.getIdTokenResult()):Tt(null))),this.credential=(0,R0.T)(Pt,ce,this.authState.pipe(hu(Vt=>!Vt))).pipe((0,It.U)(Vt=>(null==Vt?void 0:Vt.user)?Vt:null),(0,O0.R)(d.outsideAngular),(0,Ch.Q)(d.insideAngular))}return(0,lo.pX)(this,Le,u,{spy:{apply:($e,Pt,Bt)=>{($e.startsWith("signIn")||$e.startsWith("createUser"))&&Bt.then(Gt=>ce.next(Gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(lo.Dh),p.LFG(lo.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ti.HU),p.LFG(oE,8),p.LFG(Py,8),p.LFG(ng,8),p.LFG(ky,8),p.LFG(Fy,8),p.LFG(Ly,8),p.LFG(X0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ph=(()=>{class n{constructor(t,r){this.fireAuth=t,this.router=r}login(t,r){this.fireAuth.signInWithEmailAndPassword(t,r).then(o=>{localStorage.setItem("token","true"),this.router.navigate(["/dashboard"])},o=>{console.log("The password is invalid or the user does not have a password")})}register(t,r){this.fireAuth.createUserWithEmailAndPassword(t,r).then(o=>{alert("Successful"),this.router.navigate(["/login"]),this.sendEmailForVarification(o.user),console.log(o.user)},o=>{console.log(o.message)})}logOut(){this.fireAuth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireAuth.sendPasswordResetEmail(t).then(r=>{console.log(r),this.router.navigate(["/varify-email"])},r=>{alert(r.message)})}sendEmailForVarification(t){t.sendEmailVarification().then(r=>{this.router.navigate(["/varify-email"])},r=>{alert("something went worng"),console.log(r)})}googleSignIn(){return this.fireAuth.signInWithPopup(new GD.Q).then(t=>{var r;this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(null===(r=t.user)||void 0===r?void 0:r.uid))},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(rg),p.LFG(fi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aE=(()=>{class n{constructor(t){this.authService=t,this.email=""}forgotPassword(){this.authService.forgotPassword(this.email),this.email=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ph))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-forgot-password"]],decls:20,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-info",3,"click"],[1,"col-md-12","text-center"],[2,"text-decoration","none"],["routerLink","/login",1,"text-danger"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form")(6,"div",5)(7,"h4",6),p._uU(8,"Forgot password"),p.qZA()(),p.TgZ(9,"div",5)(10,"label",7),p._uU(11,"Email"),p.qZA(),p.TgZ(12,"input",8),p.NdJ("ngModelChange",function(u){return r.email=u}),p.qZA()(),p.TgZ(13,"button",9),p.NdJ("click",function(){return r.forgotPassword()}),p._uU(14,"Send"),p.qZA(),p.TgZ(15,"div",10)(16,"a",11),p._uU(17,"Back to "),p.TgZ(18,"span",12),p._uU(19,"Login"),p.qZA()()()()()()()()()),2&t&&(p.xp6(12),p.Q6J("ngModel",r.email))},directives:[zn,No,_a,hi,pr,Ea,pu],styles:[""]}),n})();var YA=k(4986);function Uy(){return(0,$i.e)((n,e)=>{let t,r=!1;n.subscribe((0,br.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function uE(n,e){return n===e}k(5881);var ct,xr=k(3942),lE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ma={},ig=ig||{},xt=lE||self;function kh(){}function Fh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Go(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var By="closure_uid_"+(1e9*Math.random()>>>0),cE=0;function Sb(n,e,t){return n.call.apply(n.bind,arguments)}function dE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function xi(n,e,t){return(xi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sb:dE).apply(null,arguments)}function Lh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function ri(){this.s=this.s,this.o=this.o}ri.prototype.s=!1,ri.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ab(n){Object.prototype.hasOwnProperty.call(n,By)&&n[By]||(n[By]=++cE)}(this)},ri.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Vs(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Us(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Fh(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function Mn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Mn.prototype.h=function(){this.defaultPrevented=!0};var fE=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{xt.addEventListener("test",kh,e),xt.removeEventListener("test",kh,e)}catch(t){}return n}();function Vh(n){return/^[\s\xa0]*$/.test(n)}var pE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function jy(n,e){return n<e?-1:n>e?1:0}function sg(){var n=xt.navigator;return n&&(n=n.userAgent)?n:""}function qo(n){return-1!=sg().indexOf(n)}function Uh(n){return Uh[" "](n),n}Uh[" "]=kh;var jh,n,Mb=qo("Opera"),ml=qo("Trident")||qo("MSIE"),gE=qo("Edge"),og=gE||ml,$y=qo("Gecko")&&!(-1!=sg().toLowerCase().indexOf("webkit")&&!qo("Edge"))&&!(qo("Trident")||qo("MSIE"))&&!qo("Edge"),ag=-1!=sg().toLowerCase().indexOf("webkit")&&!qo("Edge");function mE(){var n=xt.document;return n?n.documentMode:void 0}e:{var ug="",$h=(n=sg(),$y?/rv:([^\);]+)(\)|;)/.exec(n):gE?/Edge\/([\d\.]+)/.exec(n):ml?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ag?/WebKit\/(\S+)/.exec(n):Mb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($h&&(ug=$h?$h[1]:""),ml){var Hh=mE();if(null!=Hh&&Hh>parseFloat(ug)){jh=String(Hh);break e}}jh=ug}var yE={};var _E=xt.document&&ml&&(mE()||parseInt(jh,10))||void 0;function Xc(n,e){if(Mn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($y){e:{try{Uh(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:EE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xc.X.h.call(this)}}Mr(Xc,Mn);var EE={2:"touch",3:"pen",4:"mouse"};Xc.prototype.h=function(){Xc.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ed="closure_listenable_"+(1e6*Math.random()|0),Rb=0;function Nb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Rb,this.ba=this.ea=!1}function cg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Gy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function wE(n){const e={};for(const t in n)e[t]=n[t];return e}const IE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<IE.length;u++)t=IE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function dg(n){this.src=n,this.g={},this.h=0}function qy(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=hE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(cg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zy(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}dg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=zy(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new Nb(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var Wy="closure_lm_"+(1e6*Math.random()|0),Zy={};function bE(n,e,t,r,o){if(r&&r.once)return TE(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)bE(n,e[u],t,r,o);return null}return t=pg(t),n&&n[ed]?n.N(e,t,Go(r)?!!r.capture:!!r,o):CE(n,e,t,!1,r,o)}function CE(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Go(o)?!!o.capture:!!o,g=hg(n);if(g||(n[Wy]=g=new dg(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function Ob(){const e=SE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Yy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function TE(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)TE(n,e[u],t,r,o);return null}return t=pg(t),n&&n[ed]?n.O(e,t,Go(r)?!!r.capture:!!r,o):CE(n,e,t,!0,r,o)}function AE(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)AE(n,e[u],t,r,o);else r=Go(r)?!!r.capture:!!r,t=pg(t),n&&n[ed]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zy(u=n.g[e],t,r,o))&&(cg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=hg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zy(e,t,r,o)),(t=-1<n?e[n]:null)&&Ky(t))}function Ky(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ed])qy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Yy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=hg(e))?(qy(t,n),0==t.h&&(t.src=null,e[Wy]=null)):cg(n)}}}function Yy(n){return n in Zy?Zy[n]:Zy[n]="on"+n}function SE(n,e){if(n.ba)n=!0;else{e=new Xc(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Ky(n),n=t.call(r,e)}return n}function hg(n){return(n=n[Wy])instanceof dg?n:null}var fg="__closure_events_fn_"+(1e9*Math.random()>>>0);function pg(n){return"function"==typeof n?n:(n[fg]||(n[fg]=function(e){return n.handleEvent(e)}),n[fg])}function Rr(){ri.call(this),this.i=new dg(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mn(e,n);else if(e instanceof Mn)e.target=e.target||n;else{var o=e;DE(e=new Mn(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Gh(d,r,!0,e)&&o}if(o=Gh(d=e.g=n,r,!0,e)&&o,o=Gh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Gh(d=e.g=t[u],r,!1,e)&&o}function Gh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,_=d.ha||d.src;d.ea&&qy(n.i,d),o=!1!==g.call(_,r)&&o}}return o&&!r.defaultPrevented}Mr(Rr,ri),Rr.prototype[ed]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){AE(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)cg(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var gg=xt.JSON.stringify;function xE(){var n=Jy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var RE,yu=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Pb,n=>n.reset());class Pb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kb(n){xt.setTimeout(()=>{throw n},0)}function yl(n,e){RE||function Qy(){var n=xt.Promise.resolve(void 0);RE=function(){n.then(OE)}}(),NE||(RE(),NE=!0),Jy.add(n,e)}var NE=!1,Jy=new class ME{constructor(){this.h=this.g=null}add(e,t){const r=yu.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function OE(){for(var n;n=xE();){try{n.h.call(n.g)}catch(t){kb(t)}var e=yu;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}NE=!1}function Xy(n,e){Rr.call(this),this.h=n||1,this.g=e||xt,this.j=xi(this.lb,this),this.l=Date.now()}function _t(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ev(n,e,t){if("function"==typeof n)t&&(n=xi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xi(n.handleEvent,n)}return 2147483647<Number(e)?-1:xt.setTimeout(n,e||0)}function PE(n){n.g=ev(()=>{n.g=null,n.i&&(n.i=!1,PE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mr(Xy,Rr),(ct=Xy.prototype).ca=!1,ct.R=null,ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$r(this,"tick"),this.ca&&(_t(this),this.start()))}},ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){Xy.X.M.call(this),_t(this),delete this.g};class Fb extends ri{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:PE(this)}M(){super.M(),this.g&&(xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(n){ri.call(this),this.h=n,this.g={}}Mr(vu,ri);var kE=[];function qh(n,e,t,r){Array.isArray(t)||(t&&(kE[0]=t.toString()),t=kE);for(var o=0;o<t.length;o++){var u=bE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function zh(n){Gy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ky(e)},n),n.g={}}function Fn(){this.g=!0}function td(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function LE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return gg(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}vu.prototype.M=function(){vu.X.M.call(this),zh(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fn.prototype.Aa=function(){this.g=!1},Fn.prototype.info=function(){};var _u={},tv=null;function Wh(){return tv=tv||new Rr}function VE(n){Mn.call(this,_u.Pa,n)}function Zh(n){const e=Wh();$r(e,new VE(e))}function UE(n,e){Mn.call(this,_u.STAT_EVENT,n),this.stat=e}function Nr(n){const e=Wh();$r(e,new UE(e,n))}function BE(n,e){Mn.call(this,_u.Qa,n),this.size=e}function Kh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){n()},e)}_u.Pa="serverreachability",Mr(VE,Mn),_u.STAT_EVENT="statevent",Mr(UE,Mn),_u.Qa="timingevent",Mr(BE,Mn);var mg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Yh={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function yg(){}function rv(){}yg.prototype.h=null;var iv,Qh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function vl(){Mn.call(this,"d")}function _l(){Mn.call(this,"c")}function vg(){}function Jh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new vu(this),this.O=jE,this.T=new Xy(n=og?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new sv}function sv(){this.i=null,this.g="",this.h=!1}Mr(vl,Mn),Mr(_l,Mn),Mr(vg,yg),vg.prototype.g=function(){return new XMLHttpRequest},vg.prototype.i=function(){return{}},iv=new vg;var jE=45e3,_g={},Eg={};function wg(n,e,t){n.K=1,n.v=bg(Ra(e)),n.s=t,n.P=!0,$E(n,null)}function $E(n,e){n.F=Date.now(),Ig(n),n.A=Ra(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),XE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new sv,n.g=Yb(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Fb(xi(n.La,n,n.g),n.N)),qh(n.S,n.g,"readystatechange",n.ib),e=n.H?wE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Zh(),function JA(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),_=0;_<g.length;_++){var b=g[_].split("=");if(1<b.length){var A=b[0];b=b[1];var N=A.split("_");d=2<=N.length&&"type"==N[1]?d+(A+"=")+b+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function HE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Vb(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=XA(n,t),o==Eg){4==e&&(n.o=4,Nr(14),r=!1),td(n.j,n.m,null,"[Incomplete Response]");break}if(o==_g){n.o=4,Nr(15),td(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}td(n.j,n.m,o,null),ov(n,o)}HE(n)&&o!=Eg&&o!=_g&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Nr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Dl(e),e.K=!0,Nr(11))):(td(n.j,n.m,t,"[Invalid Chunked Response]"),El(n),Eu(n))}function XA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Eg:(t=Number(e.substring(t,r)),isNaN(t)?_g:(r+=1)+t>e.length?Eg:(e=e.substr(r,t),n.C=r+t,e))}function Ig(n){n.V=Date.now()+n.O,Ub(n,n.O)}function Ub(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kh(xi(n.gb,n),e)}function Xh(n){n.B&&(xt.clearTimeout(n.B),n.B=null)}function Eu(n){0==n.l.G||n.I||gv(n.l,n)}function El(n){Xh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,_t(n.T),zh(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ov(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||uv(t.h,n)))if(!n.J&&uv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Kh(xi(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;lf(t),uf(t)}od(t),Nr(18)}if(1>=rw(t.h)&&t.ja){try{t.ja()}catch(b){}t.ja=void 0}}else bl(t,11)}else if((n.J||t.g==n)&&lf(t),!Vh(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const A=b[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const z=b[5];null!=z&&"number"==typeof z&&0<z&&(t.J=r=1.5*z,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const ce=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var u=r.h;u.g||-1==ce.indexOf("spdy")&&-1==ce.indexOf("quic")&&-1==ce.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(lv(u,u.h),u.h=null))}if(r.D){const Le=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(r.za=Le,En(r.F,r.D,Le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=vw(r,r.H?r.ka:null,r.V),d.J){iw(r.h,d);var g=d,_=r.J;_&&g.setTimeout(_),g.B&&(Xh(g),Ig(g)),r.g=d}else xg(r);0<t.i.length&&Sg(t)}else"stop"!=b[0]&&"close"!=b[0]||bl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?bl(t,7):fw(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Zh()}catch(b){}}function qE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Fh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ef(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Fh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function GE(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Fh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ct=Jh.prototype).setTimeout=function(n){this.O=n},ct.ib=function(n){n=n.target;const e=this.L;e&&3==Oa(n)?e.l():this.La(n)},ct.La=function(n){try{if(n==this.g)e:{const A=Oa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||og||this.g&&(this.h.h||this.g.fa()||af(this.g)))){this.I||4!=A||7==e||Zh(),Xh(this);var t=this.g.aa();this.Y=t;t:if(HE(this)){var r=af(this.g);n="";var o=r.length,u=4==Oa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){El(this),Eu(this);var d="";break t}this.h.i=new xt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function FE(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vh(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Nr(12),El(this),Eu(this);break e}td(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ov(this,t)}this.P?(Vb(this,A,d),og&&this.i&&3==A&&(qh(this.S,this.T,"tick",this.hb),this.T.start())):(td(this.j,this.m,d,null),ov(this,d)),4==A&&El(this),this.i&&!this.I&&(4==A?gv(this.l,this):(this.i=!1,Ig(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Nr(12)):(this.o=0,Nr(13)),El(this),Eu(this)}}}catch(A){}},ct.hb=function(){if(this.g){var n=Oa(this.g),e=this.g.fa();this.C<e.length&&(Xh(this),Vb(this,n,e),this.i&&4!=n&&Ig(this))}},ct.cancel=function(){this.I=!0,El(this)},ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Lb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zh(),Nr(17)),El(this),this.o=2,Eu(this)):Ub(this,this.V-n)};var zE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof wl){this.h=void 0!==e?e:n.h,tf(this,n.j),this.s=n.s,this.g=n.g,Dg(this,n.m),this.l=n.l,e=n.i;var t=new rd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),WE(this,t),this.o=n.o}else n&&(t=String(n).match(zE))?(this.h=!!e,tf(this,t[1]||"",!0),this.s=nd(t[2]||""),this.g=nd(t[3]||"",!0),Dg(this,t[4]),this.l=nd(t[5]||"",!0),WE(this,t[6]||"",!0),this.o=nd(t[7]||"")):(this.h=!!e,this.i=new rd(null,this.h))}function Ra(n){return new wl(n)}function tf(n,e,t){n.j=t?nd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Dg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function WE(n,e,t){e instanceof rd?(n.i=e,function Hb(n,e){e&&!n.j&&(Na(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(QE(this,r),XE(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nf(e,av)),n.i=new rd(e,n.h))}function En(n,e,t){n.i.set(e,t)}function bg(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nf(e,KE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nf(e,KE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nf(t,"/"==t.charAt(0)?jb:YE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nf(t,$b)),n.join("")};var KE=/[#\/\?@]/g,YE=/[#\?:]/g,jb=/[#\?]/g,av=/[#\?@]/g,$b=/#/g;function rd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Na(n){n.g||(n.g=new Map,n.h=0,n.i&&function Bb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function QE(n,e){Na(n),e=wu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function JE(n,e){return Na(n),e=wu(n,e),n.g.has(e)}function XE(n,e,t){QE(n,e),0<t.length&&(n.i=null,n.g.set(wu(n,e),Vs(t)),n.h+=t.length)}function wu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tw(n){this.l=n||Gb,n=xt.PerformanceNavigationTiming?0<(n=xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(xt.g&&xt.g.Ga&&xt.g.Ga()&&xt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=rd.prototype).add=function(n,e){Na(this),this.i=null,n=wu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){Na(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ct.oa=function(){Na(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ct.W=function(n){Na(this);let e=[];if("string"==typeof n)JE(this,n)&&(e=e.concat(this.g.get(wu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ct.set=function(n,e){return Na(this),this.i=null,JE(this,n=wu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var Gb=10;function nw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rw(n){return n.h?1:n.g?n.g.size:0}function uv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function lv(n,e){n.g?n.g.add(e):n.h=e}function iw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Vs(n.i)}function Cg(){}function ow(){this.g=new Cg}function qb(n,e,t){const r=t||"";try{qE(n,function(o,u){let d=o;Go(o)&&(d=gg(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function rf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function sf(n){this.l=n.ac||null,this.j=n.jb||!1}function Tg(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tw.prototype.cancel=function(){if(this.i=sw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Cg.prototype.stringify=function(n){return xt.JSON.stringify(n,void 0)},Cg.prototype.parse=function(n){return xt.JSON.parse(n,void 0)},Mr(sf,yg),sf.prototype.g=function(){return new Tg(this.l,this.j)},sf.prototype.i=function(n){return function(){return n}}({}),Mr(Tg,Rr);var cv=0;function Ag(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Il(n){n.readyState=4,n.l=null,n.j=null,n.A=null,id(n)}function id(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=Tg.prototype).open=function(n,e){if(this.readyState!=cv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,id(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||xt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Il(this)),this.readyState=cv},ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,id(this)),this.g&&(this.readyState=3,id(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==xt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ag(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Il(this):id(this),3==this.readyState&&Ag(this)}},ct.Va=function(n){this.g&&(this.response=this.responseText=n,Il(this))},ct.Ua=function(n){this.g&&(this.response=n,Il(this))},ct.ga=function(){this.g&&Il(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dv=xt.JSON.parse;function nr(n){Rr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aw,this.K=this.L=!1}Mr(nr,Rr);var aw="",hv=/^https?$/i,Wb=["POST","PUT"];function lw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fv(n),of(n)}function fv(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function cw(n){if(n.h&&void 0!==ig&&(!n.C[1]||4!=Oa(n)||2!=n.aa()))if(n.v&&4==Oa(n))ev(n.Ha,0,n);else if($r(n,"readystatechange"),4==Oa(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(zE)[1]||null;if(!o&&xt.self&&xt.self.location){var u=xt.self.location.protocol;o=u.substr(0,u.length-1)}r=!hv.test(o?o.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var d=2<Oa(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.aa()+"]",fv(n)}}finally{of(n)}}}function of(n,e){if(n.g){Zb(n);const t=n.g,r=n.C[0]?kh:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Zb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(xt.clearTimeout(n.A),n.A=null)}function Oa(n){return n.g?n.g.readyState:0}function af(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case aw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function dw(n){let e="";return Gy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Iu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function Pa(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hw(n){this.Ca=0,this.i=[],this.j=new Fn,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Pa("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Pa("baseRetryDelayMs",5e3,n),this.bb=Pa("retryDelaySeedMs",1e4,n),this.$a=Pa("forwardChannelMaxRetries",2,n),this.ta=Pa("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new tw(n&&n.concurrentRequestLimit),this.Fa=new ow,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function fw(n){if(pw(n),3==n.G){var e=n.U++,t=Ra(n.F);En(t,"SID",n.I),En(t,"RID",e),En(t,"TYPE","terminate"),sd(n,t),(e=new Jh(n,n.j,e,void 0)).K=2,e.v=bg(Ra(t)),t=!1,xt.navigator&&xt.navigator.sendBeacon&&(t=xt.navigator.sendBeacon(e.v.toString(),"")),!t&&xt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Yb(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ig(e)}Mg(n)}function uf(n){n.g&&(Dl(n),n.g.cancel(),n.g=null)}function pw(n){uf(n),n.u&&(xt.clearTimeout(n.u),n.u=null),lf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&xt.clearTimeout(n.m),n.m=null)}function Sg(n){nw(n.h)||n.m||(n.m=!0,yl(n.Ja,n),n.C=0)}function gw(n,e){var t;t=e?e.m:n.U++;const r=Ra(n.F);En(r,"SID",n.I),En(r,"RID",t),En(r,"AID",n.T),sd(n,r),n.o&&n.s&&Iu(r,n.o,n.s),t=new Jh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=pv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),lv(n.h,t),wg(t,r,e)}function sd(n,e){n.ia&&Gy(n.ia,function(t,r){En(e,r,t)}),n.l&&qE({},function(t,r){En(e,r,t)})}function pv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?xi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let b=o[_].h;const A=o[_].g;if(b-=u,0>b)u=Math.max(0,o[_].h-100),g=!1;else try{qb(A,d,"req"+b+"_")}catch(N){r&&r(A)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function xg(n){n.g||n.u||(n.Z=1,yl(n.Ia,n),n.A=0)}function od(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Kh(xi(n.Ia,n),yw(n,n.A)),n.A++,0))}function Dl(n){null!=n.B&&(xt.clearTimeout(n.B),n.B=null)}function mw(n){n.g=new Jh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ra(n.sa);En(e,"RID","rpc"),En(e,"SID",n.I),En(e,"CI",n.L?"0":"1"),En(e,"AID",n.T),En(e,"TYPE","xmlhttp"),sd(n,e),n.o&&n.s&&Iu(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=bg(Ra(e)),t.s=null,t.P=!0,$E(t,n)}function lf(n){null!=n.v&&(xt.clearTimeout(n.v),n.v=null)}function gv(n,e){var t=null;if(n.g==e){lf(n),Dl(n),n.g=null;var r=2}else{if(!uv(n.h,e))return;t=e.D,iw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;$r(r=Wh(),new BE(r,t)),Sg(n)}else xg(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function Kb(n,e){return!(rw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Kh(xi(n.Ja,n,e),yw(n,n.C)),n.C++,0)))}(n,e)||2==r&&od(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:bl(n,5);break;case 4:bl(n,10);break;case 3:bl(n,6);break;default:bl(n,2)}}function yw(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function bl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=xi(n.kb,n);t||(t=new wl("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||tf(t,"https"),bg(t)),function zb(n,e){const t=new Fn;if(xt.Image){const r=new Image;r.onload=Lh(rf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lh(rf,t,r,"TestLoadImage: error",!1,e),r.onabort=Lh(rf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lh(rf,t,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Nr(2);n.G=0,n.l&&n.l.va(e),Mg(n),pw(n)}function Mg(n){if(n.G=0,n.la=[],n.l){const e=sw(n.h);(0!=e.length||0!=n.i.length)&&(Us(n.la,e),Us(n.la,n.i),n.h.i.length=0,Vs(n.i),n.i.length=0),n.l.ua()}}function vw(n,e,t){var r=t instanceof wl?Ra(t):new wl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Dg(r,r.m);else{var o=xt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new wl(null,void 0);r&&tf(u,r),e&&(u.g=e),o&&Dg(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&En(r,t,e),En(r,"VER",n.ma),sd(n,r),r}function Yb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Da&&!n.ra?new sf({jb:!0}):n.ra)).Ka(n.H),e}function _w(){}function Rg(){if(ml&&!(10<=Number(_E)))throw Error("Environmental error: no available transport.")}function Hr(n,e){Rr.call(this),this.g=new hw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new cf(this)}function mv(n){vl.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Cl(){_l.call(this),this.status=1}function cf(n){this.g=n}(ct=nr.prototype).Ka=function(n){this.L=n},ct.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():iv.g(),this.C=function nv(n){return n.h||(n.h=n.i())}(this.u?this.u:iv),this.g.onreadystatechange=xi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void lw(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=xt.FormData&&n instanceof xt.FormData,!(0<=hE(Wb,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zb(this),0<this.B&&((this.K=function uw(n){return ml&&function vE(){return function Bh(n){var e=yE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=pE(String(jh)).split("."),t=pE("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=jy(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||jy(0==o[2].length,0==u[2].length)||jy(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xi(this.qa,this)):this.A=ev(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){lw(this,u)}},ct.qa=function(){void 0!==ig&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),of(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),of(this,!0)),nr.X.M.call(this)},ct.Ha=function(){this.s||(this.F||this.v||this.l?cw(this):this.fb())},ct.fb=function(){cw(this)},ct.aa=function(){try{return 2<Oa(this)?this.g.status:-1}catch(n){return-1}},ct.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dv(e)}},ct.Ea=function(){return this.m},ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=hw.prototype).ma=8,ct.G=1,ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Jh(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=wE(u),DE(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pv(this,o,e),En(t=Ra(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),sd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(dw(u)))+"&"+e:this.o&&Iu(t,this.o,u)),lv(this.h,o),this.Ya&&En(t,"TYPE","init"),this.O?(En(t,"$req",e),En(t,"SID","null"),o.Z=!0,wg(o,t,null)):wg(o,t,e),this.G=2}}else 3==this.G&&(n?gw(this,n):0==this.i.length||nw(this.h)||gw(this))},ct.Ia=function(){if(this.u=null,mw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Kh(xi(this.eb,this),n)}},ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Nr(10),uf(this),mw(this))},ct.cb=function(){null!=this.v&&(this.v=null,uf(this),od(this),Nr(19))},ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Nr(2)):(this.j.info("Failed to ping google.com"),Nr(1))},(ct=_w.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Ra=function(){},Rg.prototype.g=function(n,e){return new Hr(n,e)},Mr(Hr,Rr),Hr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Nr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=vw(n,null,n.V),Sg(n)},Hr.prototype.close=function(){fw(this.g)},Hr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=gg(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Sg(e)},Hr.prototype.M=function(){this.g.l=null,delete this.j,fw(this.g),delete this.g,Hr.X.M.call(this)},Mr(mv,vl),Mr(Cl,_l),Mr(cf,_w),cf.prototype.xa=function(){$r(this.g,"a")},cf.prototype.wa=function(n){$r(this.g,new mv(n))},cf.prototype.va=function(n){$r(this.g,new Cl)},cf.prototype.ua=function(){$r(this.g,"b")},Rg.prototype.createWebChannel=Rg.prototype.g,Hr.prototype.send=Hr.prototype.u,Hr.prototype.open=Hr.prototype.m,Hr.prototype.close=Hr.prototype.close,mg.NO_ERROR=0,mg.TIMEOUT=8,mg.HTTP_ERROR=6,Yh.COMPLETE="complete",rv.EventType=Qh,Qh.OPEN="a",Qh.CLOSE="b",Qh.ERROR="c",Qh.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.Oa,nr.prototype.getLastErrorCode=nr.prototype.Ea,nr.prototype.getStatus=nr.prototype.aa,nr.prototype.getResponseJson=nr.prototype.Sa,nr.prototype.getResponseText=nr.prototype.fa,nr.prototype.send=nr.prototype.da,nr.prototype.setWithCredentials=nr.prototype.Ka;var Ew=Ma.createWebChannelTransport=function(){return new Rg},Qb=Ma.getStatEventTarget=function(){return Wh()},ww=Ma.ErrorCode=mg,Iw=Ma.EventType=Yh,eS=Ma.Event=_u,yv=Ma.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},vv=Ma.FetchXmlHttpFactory=sf,Ng=Ma.WebChannel=rv,Jb=Ma.XhrIo=nr;const Dw="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let ad="9.14.0";const Du=new Sa.Yd("@firebase/firestore");function _v(){return Du.logLevel}function Fe(n,...e){if(Du.logLevel<=Sa.in.DEBUG){const t=e.map(Og);Du.debug(`Firestore (${ad}): ${n}`,...t)}}function lr(n,...e){if(Du.logLevel<=Sa.in.ERROR){const t=e.map(Og);Du.error(`Firestore (${ad}): ${n}`,...t)}}function ho(n,...e){if(Du.logLevel<=Sa.in.WARN){const t=e.map(Og);Du.warn(`Firestore (${ad}): ${n}`,...t)}}function Og(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${ad}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function Dt(n,e){n||st()}function Je(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nC{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=d;e.enqueueRetryable((0,we.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Or)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new Cw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Gr(e)}}class df{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new df(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zo{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.A=t.token,new Pg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ev(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ud{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Ev(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function ld(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Tw(n){return n+"\0"}class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new An(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new An(0,0))}static max(){return new Et(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hf{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends hf{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const Aw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends hf{construct(e,t,r){return new Wn(e,t,r)}static isValidIdentifier(e){return Aw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(sn.fromString(e))}static fromName(e){return new Ke(sn.fromString(e).popFirst(5))}static empty(){return new Ke(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new sn(e.slice()))}}class ff{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function wv(n){return n.fields.find(e=>2===e.kind)}function Tl(n){return n.fields.filter(e=>2!==e.kind)}ff.UNKNOWN_ID=-1;class cd{constructor(e,t){this.fieldPath=e,this.kind=t}}class dd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dd(0,fs.min())}}function kg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new An(t+1,0):new An(t,r));return new fs(o,Ke.empty(),e)}function Fg(n){return new fs(n.readTime,n.key,-1)}class fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fs(Et.min(),Ke.empty(),-1)}static max(){return new fs(Et.max(),Ke.empty(),-1)}}function Dv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const Sw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ka(n){return pf.apply(this,arguments)}function pf(){return pf=(0,we.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==Sw)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),pf.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},_=>r(_))}),d=!0,u===o&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(o=>o?ue.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(A=>{d[b]=A,++g,g===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new ue((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Lg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new gf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Cv(r.target.error);this.P.reject(new gf(e,o))}}static open(e,t,r,o){try{return new Lg(t,e.transaction(o,r))}catch(u){throw new gf(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Rw(t)}}class Bs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Bs.D((0,Ht.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Al(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ht.hl)())return!1;if(Bs.N())return!0;const e=(0,Ht.z$)(),t=Bs.D(e),r=0<t&&t<10,o=Bs.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,we.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Ne(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ne(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new gf(e,g))},u.onupgradeneeded=d=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,we.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const _=Lg.open(u.db,e,d?"readonly":"readwrite",r),b=o(_).next(A=>(_.V(),A)).catch(A=>(_.abort(A),ue.reject(A))).toPromise();return b.catch(()=>{}),yield _.v,b}catch(_){const b=_,A="FirebaseError"!==b.name&&g<3;if(Fe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Mw{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Al(this.U.delete())}}class gf extends Ne{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fa(n){return"IndexedDbTransactionError"===n.name}class Rw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Al(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Al(this.store.add(e))}get(e){return Al(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Al(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Al(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ue((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ue((r,o)=>{t.onerror=u=>{const d=Cv(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new ue((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const _=new Mw(g),b=t(g.primaryKey,g.value,_);if(b instanceof ue){const A=b.catch(N=>(_.done(),ue.reject(N)));r.push(A)}_.isDone?o():null===_.G?g.continue():g.continue(_.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Al(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Cv(r.target.error);t(o)}})}let bv=!1;function Cv(n){const e=Bs.D((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bv||(bv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Mi{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Fa(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ka(r)}yield t.nt(6e4)}))}}class hd{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ue.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Fe("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(g=>(Fe("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=Fg(u);Dv(d,r)>0&&(r=d)}),new fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Nw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Hi.at=-1;class rr{constructor(e,t){this.comparator=e,this.root=t||ii.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gd(this.root,e,this.comparator,!0)}}class gd{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ii.RED,this.left=null!=o?o:ii.EMPTY,this.right=null!=u?u:ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ii(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ii.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1,ii.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ow(this.data.getIterator())}getIteratorFrom(e){return new Ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class Ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function md(n){return n.hasNext()?n.getNext():void 0}class Ri{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new Ri([])}unionWith(e){let t=new wn(Wn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ri(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ld(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const Vg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=Vg.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bu(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function Tv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Av(n){const e=n.mapValue.fields.__previous_value__;return Tv(e)?Av(e):e}function Cu(n){const e=Wo(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}class kw{constructor(e,t,r,o,u,d,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class Tu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}function Sl(n){return null==n}function xl(n){return 0===n&&1/n==-1/0}function iC(n){return"number"==typeof n&&Number.isInteger(n)&&!xl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Au={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ug={nullValue:"NULL_VALUE"};function Su(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tv(n)?4:Fw(n)?9007199254740991:10:st()}function fo(n,e){if(n===e)return!0;const t=Su(n);if(t!==Su(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cu(n).isEqual(Cu(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Wo(r.timestampValue),d=Wo(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,bu(n.bytesValue).isEqual(bu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return cr(r.geoPointValue.latitude)===cr(o.geoPointValue.latitude)&&cr(r.geoPointValue.longitude)===cr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return cr(r.integerValue)===cr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=cr(r.doubleValue),d=cr(o.doubleValue);return u===d?xl(u)===xl(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ld(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Nw(u)!==Nw(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!fo(u[g],d[g])))return!1;return!0}(n,e);default:return st()}var o}function mf(n,e){return void 0!==(n.values||[]).find(t=>fo(t,e))}function La(n,e){if(n===e)return 0;const t=Su(n),r=Su(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=cr(o.integerValue||o.doubleValue),g=cr(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return Sv(n.timestampValue,e.timestampValue);case 4:return Sv(Cu(n),Cu(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=bu(o),g=bu(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let _=0;_<d.length&&_<g.length;_++){const b=Mt(d[_],g[_]);if(0!==b)return b}return Mt(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Mt(cr(o.latitude),cr(u.latitude));return 0!==d?d:Mt(cr(o.longitude),cr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let _=0;_<d.length&&_<g.length;++_){const b=La(d[_],g[_]);if(b)return b}return Mt(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Au.mapValue&&u===Au.mapValue)return 0;if(o===Au.mapValue)return 1;if(u===Au.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),_=u.fields||{},b=Object.keys(_);g.sort(),b.sort();for(let A=0;A<g.length&&A<b.length;++A){const N=Mt(g[A],b[A]);if(0!==N)return N;const z=La(d[g[A]],_[b[A]]);if(0!==z)return z}return Mt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function Sv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=Wo(n),r=Wo(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function yd(n){return xv(n)}function xv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Wo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bu(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=xv(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${xv(r.fields[g])}`;return u+"}"}(n.mapValue):st();var e}function xu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Mv(n){return!!n&&"integerValue"in n}function vd(n){return!!n&&"arrayValue"in n}function Rv(n){return!!n&&"nullValue"in n}function Nv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yf(n){return!!n&&"mapValue"in n}function vf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Fw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rS(n){return"nullValue"in n?Ug:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xu(Tu.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function Lw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xu(Tu.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Au:st()}function sC(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oC(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vf(t)}setAll(e){let t=Wn.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=vf(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];yf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){fd(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new pi(vf(this.value))}}function aC(n){const e=[];return fd(n.fields,(t,r)=>{const o=new Wn([t]);if(yf(r)){const u=aC(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ri(e)}class Ln{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Ln(e,0,Et.min(),Et.min(),pi.empty(),0)}static newFoundDocument(e,t,r){return new Ln(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new Ln(e,2,t,Et.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Et.min(),pi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iS{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.ht=null}}function uC(n,e=null,t=[],r=[],o=null,u=null,d=null){return new iS(n,e,t,r,o,u,d)}function _d(n){const e=Je(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+yd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Sl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yd(r)).join(",")),e.ht=t}return e.ht}function jg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!oS(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!fo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Uw(n.startAt,e.startAt)&&Uw(n.endAt,e.endAt)}function _f(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ed(n,e){return n.filters.filter(t=>t instanceof gi&&t.field.isEqual(e))}function Ov(n,e,t){let r=Ug,o=!0;for(const u of Ed(n,e)){let d=Ug,g=!0;switch(u.op){case"<":case"<=":d=rS(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=Ug}sC({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];sC({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Pv(n,e,t){let r=Au,o=!0;for(const u of Ed(n,e)){let d=Au,g=!0;switch(u.op){case">=":case">":d=Lw(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Au}oC({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];oC({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class gi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new kv(e,t,r):"array-contains"===t?new sS(e,r):"in"===t?new cC(e,r):"not-in"===t?new dC(e,r):"array-contains-any"===t?new Lv(e,r):new gi(e,t,r)}static lt(e,t,r){return"in"===t?new Vw(e,r):new lC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(La(t,this.value)):null!==t&&Su(this.value)===Su(t)&&this.ft(La(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class kv extends gi{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class Vw extends gi{constructor(e,t){super(e,"in",t),this.keys=Fv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lC extends gi{constructor(e,t){super(e,"not-in",t),this.keys=Fv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class sS extends gi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vd(t)&&mf(t.arrayValue,this.value)}}class cC extends gi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mf(this.value.arrayValue,t)}}class dC extends gi{constructor(e,t){super(e,"not-in",t)}matches(e){if(mf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mf(this.value.arrayValue,t)}}class Lv extends gi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mf(this.value.arrayValue,r))}}class Mu{constructor(e,t){this.position=e,this.inclusive=t}}class Ef{constructor(e,t="asc"){this.field=e,this.dir=t}}function oS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hC(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(d.referenceValue),t.key):La(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Uw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}class Va{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=_,this._t=null,this.wt=null}}function Bw(n,e,t,r,o,u,d,g){return new Va(n,e,t,r,o,u,d,g)}function wf(n){return new Va(n)}function jw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function If(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vv(n){for(const e of n.filters)if(e.dt())return e.field;return null}function ps(n){return null!==n.collectionGroup}function wd(n){const e=Je(n);if(null===e._t){e._t=[];const t=Vv(e),r=If(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Ef(t)),e._t.push(new Ef(Wn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ef(Wn.keyField(),u))}}}return e._t}function si(n){const e=Je(n);if(!e.wt)if("F"===e.limitType)e.wt=uC(e.path,e.collectionGroup,wd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of wd(e))t.push(new Ef(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Mu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Mu(e.startAt.position,e.startAt.inclusive):null;e.wt=uC(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function $g(n,e,t){return new Va(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Df(n,e){return jg(si(n),si(e))&&n.limitType===e.limitType}function Hg(n){return`${_d(si(n))}|lt:${n.limitType}`}function Gg(n){return`Query(target=${function Bg(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${yd(r.value)}`;var r}).join(", ")}]`),Sl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>yd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>yd(t)).join(",")),`Target(${e})`}(si(n))}; limitType=${n.limitType})`}function qg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ke.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=hC(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,wd(t),r)||t.endAt&&!function(o,u,d){const g=hC(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,wd(t),r)));var t,r}function $w(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Uv(n){return(e,t)=>{let r=!1;for(const o of wd(n)){const u=fC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function fC(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),_=d.data.field(o);return null!==g&&null!==_?La(g,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Hw(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xl(e)?"-0":e}}function Gw(n){return{integerValue:""+n}}function zg(n,e){return iC(e)?Gw(e):Hw(n,e)}class Zo{constructor(){this._=void 0}}function qw(n,e,t){return n instanceof bf?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Ml?Zw(n,e):n instanceof Rl?Bv(n,e):function(r,o){const u=Ww(r,o),d=Kw(u)+Kw(r.yt);return Mv(u)&&Mv(r.yt)?Gw(d):Hw(r.It,d)}(n,e)}function zw(n,e,t){return n instanceof Ml?Zw(n,e):n instanceof Rl?Bv(n,e):t}function Ww(n,e){return n instanceof Id?Mv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bf extends Zo{}class Ml extends Zo{constructor(e){super(),this.elements=e}}function Zw(n,e){const t=pC(e);for(const r of n.elements)t.some(o=>fo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Rl extends Zo{constructor(e){super(),this.elements=e}}function Bv(n,e){let t=pC(e);for(const r of n.elements)t=t.filter(o=>!fo(o,r));return{arrayValue:{values:t}}}class Id extends Zo{constructor(e,t){super(),this.It=e,this.yt=t}}function Kw(n){return cr(n.integerValue||n.doubleValue)}function pC(n){return vd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nl{constructor(e,t){this.field=e,this.transform=t}}class gC{constructor(e,t){this.version=e,this.transformResults=t}}class Hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Dd{}function Wg(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Cd(n.key,Hn.none()):new bd(n.key,n.data,Hn.none());{const t=n.data,r=pi.empty();let o=new wn(Wn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Ua(n.key,r,new Ri(o.toArray()),Hn.none())}}function Qw(n,e,t){n instanceof bd?function(r,o,u){const d=r.value.clone(),g=yC(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ua?function(r,o,u){if(!Cf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=yC(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(mC(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Tf(n,e,t,r){return n instanceof bd?function(o,u,d,g){if(!Cf(o.precondition,u))return d;const _=o.value.clone(),b=$v(o.fieldTransforms,g,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ua?function(o,u,d,g){if(!Cf(o.precondition,u))return d;const _=$v(o.fieldTransforms,g,u),b=u.data;return b.setAll(mC(o)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,Cf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function Jw(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Ww(r.transform,o||null);null!=u&&(null===t&&(t=pi.empty()),t.set(r.field,u))}return t||null}function jv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ld(t,r,(o,u)=>function Yw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ml&&r instanceof Ml||t instanceof Rl&&r instanceof Rl?ld(t.elements,r.elements,fo):t instanceof Id&&r instanceof Id?fo(t.yt,r.yt):t instanceof bf&&r instanceof bf);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class bd extends Dd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ua extends Dd{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function mC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yC(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,zw(d,g,t[o]))}return r}function $v(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,qw(u,d,e))}return r}class Cd extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hv extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vC{constructor(e){this.count=e}}var Pr,cn;function _C(n){switch(n){default:return st();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function EC(n){if(void 0===n)return lr("GRPC error has no .code"),de.UNKNOWN;switch(n){case Pr.OK:return de.OK;case Pr.CANCELLED:return de.CANCELLED;case Pr.UNKNOWN:return de.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return de.INTERNAL;case Pr.UNAVAILABLE:return de.UNAVAILABLE;case Pr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Pr.NOT_FOUND:return de.NOT_FOUND;case Pr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Pr.ABORTED:return de.ABORTED;case Pr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Pr.DATA_LOSS:return de.DATA_LOSS;default:return st()}}(cn=Pr||(Pr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class Ol{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){fd(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return pd(this.inner)}size(){return this.innerSize}}const wC=new rr(Ke.comparator);function oi(){return wC}const Xw=new rr(Ke.comparator);function Af(...n){let e=Xw;for(const t of n)e=e.insert(t.key,t);return e}function Gv(n){let e=Xw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function mi(){return Pl()}function qv(){return Pl()}function Pl(){return new Ol(n=>n.toString(),(n,e)=>n.isEqual(e))}const zv=new rr(Ke.comparator),IC=new wn(Ke.comparator);function Ot(...n){let e=IC;for(const t of n)e=e.add(t);return e}const Wv=new wn(Mt);function kl(){return Wv}class Zg{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Kg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zg(Et.min(),o,kl(),oi(),Ot())}}class Kg{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kg(r,t,Ot(),Ot(),Ot())}}class Zv{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class DC{constructor(e,t){this.targetId=e,this.At=t}}class Kv{constructor(e,t,r=yr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class eI{constructor(){this.Rt=0,this.bt=nI(),this.Pt=yr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ot(),t=Ot(),r=Ot();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new Kg(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=nI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class bC{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=oi(),this.qt=tI(),this.Kt=new wn(Mt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(_f(u))if(0===r){const d=new Ke(u.path);this.jt(t,d,Ln.newNoDocument(d,Et.min()))}else Dt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const g=this.Xt(d);if(g){if(u.current&&_f(g.target)){const _=new Ke(g.target.path);null!==this.Ut.get(_)||this.ee(d,_)||this.jt(d,_,Ln.newNoDocument(_,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Ot();this.qt.forEach((u,d)=>{let g=!0;d.forEachWhile(_=>{const b=this.Xt(_);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new Zg(e,t,this.Kt,this.Ut,r);return this.Ut=oi(),this.qt=tI(),this.Kt=new wn(Mt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new eI,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new wn(Mt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new eI),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function tI(){return new rr(Ke.comparator)}function nI(){return new rr(Ke.comparator)}const rI={asc:"ASCENDING",desc:"DESCENDING"},iI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sI{constructor(e,t){this.databaseId=e,this.gt=t}}function Sf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oI(n,e){return n.gt?e.toBase64():e.toUint8Array()}function aI(n,e){return Sf(n,e.toTimestamp())}function vr(n){return Dt(!!n),Et.fromTimestamp(function(e){const t=Wo(e);return new An(t.seconds,t.nanos)}(n))}function uI(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Yv(n){const e=sn.fromString(n);return Dt(I(e)),e}function Fl(n,e){return uI(n.databaseId,e.path)}function Ko(n,e){const t=Yv(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(lI(t))}function Qv(n,e){return uI(n.databaseId,e)}function CC(n){const e=Yv(n);return 4===e.length?sn.emptyPath():lI(e)}function Yg(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lI(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cI(n,e,t){return{name:Fl(n,e),fields:t.value.mapValue.fields}}function TC(n,e,t){const r=Ko(n,e.name),o=vr(e.updateTime),u=new pi({mapValue:{fields:e.fields}}),d=Ln.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Qg(n,e){let t;if(e instanceof bd)t={update:cI(n,e.key,e.value)};else if(e instanceof Cd)t={delete:Fl(n,e.key)};else if(e instanceof Ua)t={update:cI(n,e.key,e.data),updateMask:E(e.fieldMask)};else{if(!(e instanceof Hv))return st();t={verify:Fl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof bf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ml)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Rl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Id)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:aI(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function dI(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Hn.updateTime(vr(o.updateTime)):void 0!==o.exists?Hn.exists(o.exists):Hn.none():Hn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(Dt("REQUEST_TIME"===d.setToServerValue),g=new bf):"appendMissingElements"in d?g=new Ml(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new Rl(d.removeAllFromArray.values||[]):"increment"in d?g=new Id(u,d.increment):st();const _=Wn.fromServerFormat(d.fieldPath);return new Nl(_,g)}(n,o)):[];var o;if(e.update){const o=Ko(n,e.update.name),u=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ri((e.updateMask.fieldPaths||[]).map(b=>Wn.fromServerFormat(b)));return new Ua(o,u,d,t,r)}return new bd(o,u,t,r)}if(e.delete){const o=Ko(n,e.delete);return new Cd(o,t)}if(e.verify){const o=Ko(n,e.verify);return new Hv(o,t)}return st()}function SC(n,e){return{documents:[Qv(n,e.path)]}}function hI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Qv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Qv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0===_.length)return;const b=_.map(A=>function(N){if("=="===N.op){if(Nv(N.value))return{unaryFilter:{field:l(N.field),op:"IS_NAN"}};if(Rv(N.value))return{unaryFilter:{field:l(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Nv(N.value))return{unaryFilter:{field:l(N.field),op:"IS_NOT_NAN"}};if(Rv(N.value))return{unaryFilter:{field:l(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:l(N.field),op:a(N.op),value:N.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:l((A=b).field),direction:s(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.gt||Sl(b)?b:{value:b});var b,g,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function xC(n){let e=CC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=i(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Ef(c((N=A).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(A){let N;return N="object"==typeof A?A.value:A,Sl(N)?null:N}(t.limit));let _=null;var A;t.startAt&&(_=new Mu((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Mu(A.values||[],!A.before)}(t.endAt)),Bw(e,o,d,u,g,"F",_,b)}function i(n){return n?void 0!==n.unaryFilter?[y(n)]:void 0!==n.fieldFilter?[h(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>i(e)).reduce((e,t)=>e.concat(t)):st():[]}function s(n){return rI[n]}function a(n){return iI[n]}function l(n){return{fieldPath:n.canonicalString()}}function c(n){return Wn.fromServerFormat(n.fieldPath)}function h(n){return gi.create(c(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function y(n){switch(n.unaryFilter.op){case"IS_NAN":const e=c(n.unaryFilter.field);return gi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=c(n.unaryFilter.field);return gi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=c(n.unaryFilter.field);return gi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=c(n.unaryFilter.field);return gi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function E(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function T(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=F(e)),e=M(n.get(t),e);return F(e)}function M(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function F(n){return n+"\x01\x01"}function $(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&st(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let _;0===o.length?_=g:(o+=g,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:st()}u=d+2}return new sn(r)}const Q=["userId","batchId"];function ve(n,e){return[n,T(e)]}function Ve(n,e,t){return[n,T(e),t]}const Ye={},ot=["prefixPath","collectionGroup","readTime","documentId"],Me=["prefixPath","collectionGroup","documentId"],vt=["collectionGroup","readTime","prefixPath","documentId"],Qt=["canonicalId","targetId"],yn=["targetId","path"],gs=["path","targetId"],Ll=["collectionId","parent"],Jv=["indexId","uid"],Xv=["uid","sequenceNumber"],e_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],t_=["indexId","uid","orderedDocumentKey"],n_=["userId","collectionPath","documentId"],r_=["userId","collectionPath","largestBatchId"],i_=["userId","collectionGroup","largestBatchId"],Jg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],s_=[...Jg,"documentOverlays"],cS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dS=cS,bM=[...dS,"indexConfiguration","indexState","indexEntries"];class MC extends xw{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function yi(n,e){const t=Je(n);return Bs.M(t.ie,e)}class RC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Qw(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qv();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const _=Wg(d,g);null!==_&&r.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&ld(this.mutations,e.mutations,(t,r)=>jv(t,r))&&ld(this.baseMutations,e.baseMutations,(t,r)=>jv(t,r))}}class NC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=zv;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new NC(e,t,r,o)}}class OC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Td{constructor(e,t,r,o,u=Et.min(),d=Et.min(),g=yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Td(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Td(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Td(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class hS{constructor(e){this.re=e}}function fS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Fl(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Sf(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xf(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:xf(e.version)}}var o,u;return r}function fI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mf(n){const e=new An(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Rf(n,e){const t=(e.baseMutations||[]).map(u=>dI(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>dI(n.re,u)),o=An.fromMillis(e.localWriteTimeMs);return new RC(e.batchId,o,t,r)}function o_(n){const e=Mf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mf(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=si(wf(CC(o.documents[0])))):r=si(xC(n.query)),new Td(r,n.targetId,0,n.lastListenSequenceNumber,e,t,yr.fromBase64String(n.resumeToken))}function pS(n,e){const t=xf(e.snapshotVersion),r=xf(e.lastLimboFreeSnapshotVersion);let o;o=_f(e.target)?SC(n.re,e.target):hI(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_d(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function PC(n){const e=xC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$g(e,e.limit,"L"):e}function kC(n,e){return new OC(e.largestBatchId,dI(n.re,e.overlayMutation))}function gS(n,e){const t=e.path.lastSegment();return[n,T(e.path.popLast()),t]}function mS(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xf(r.readTime),documentKey:T(r.documentKey.path),largestBatchId:r.largestBatchId}}class TM{getBundleMetadata(e,t){return yS(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Mf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return yS(e).put({bundleId:(r=t).id,createTime:xf(vr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return vS(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:PC(o.bundledQuery),readTime:Mf(o.readTime)};var o})}saveNamedQuery(e,t){return vS(e).put({name:(r=t).name,readTime:xf(vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function yS(n){return yi(n,"bundles")}function vS(n){return yi(n,"namedQueries")}class pI{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new pI(e,t.uid||"")}getOverlay(e,t){return a_(e).get(gS(this.userId,t)).next(r=>r?kC(this.It,r):null)}getOverlays(e,t){const r=mi();return ue.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new OC(t,d);o.push(this.ue(e,g))}),ue.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(T(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(a_(e).Y("collectionPathOverlayIndex",g))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const o=mi(),u=T(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return a_(e).W("collectionPathOverlayIndex",d).next(g=>{for(const _ of g){const b=kC(this.It,_);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=mi();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return a_(e).Z({index:"collectionGroupOverlayIndex",range:g},(_,b,A)=>{const N=kC(this.It,b);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return a_(e).put(function(r,o,u){const[d,g,_]=gS(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Qg(r.re,u.mutation)}}(this.It,this.userId,t))}}function a_(n){return yi(n,"documentOverlays")}class Nf{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(cr(e.integerValue));else if("doubleValue"in e){const r=cr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),xl(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(bu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Fw(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):st()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function AM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _S(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=AM(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Nf.Te=new Nf;class SM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=_S(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=_S(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class xM{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class MM{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class u_{constructor(){this.Be=new SM,this.Le=new xM(this.Be),this.Ue=new MM(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Of{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Of(this.indexId,this.documentKey,this.arrayValue,r)}}function Pf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ES(n.arrayValue,e.arrayValue),0!==t?t:(t=ES(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function ES(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class RM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=wv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Tl(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class NM{constructor(){this.Ye=new FC}addToCollectionParentIndex(e,t){return this.Ye.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(fs.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class FC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new wn(sn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new wn(sn.comparator)).toArray()}}const gI=new Uint8Array(0);class OM{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new FC,this.Ze=new Ol(r=>_d(r),(r,o)=>jg(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:T(o)};return wS(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Tw(t),""],!1,!0);return wS(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push($(d.parent))}return r})}addFieldIndex(e,t){const r=mI(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=c_(e);return u.next(g=>{d.put(mS(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=mI(e),o=c_(e),u=l_(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=l_(e);let o=!0;const u=new Map;return ue.forEach(this.tn(t),d=>this.en(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=Ot();const g=[];return ue.forEach(u,(_,b)=>{var A;Fe("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Gt=>`${Gt.fieldPath}:${Gt.kind}`).join(",")}`} to execute ${_d(t)}`);const N=function(Gt,Vt){const kt=wv(Vt);if(void 0===kt)return null;for(const Yt of Ed(Gt,kt.fieldPath))switch(Yt.op){case"array-contains-any":return Yt.value.arrayValue.values||[];case"array-contains":return[Yt.value]}return null}(b,_),z=function(Gt,Vt){const kt=new Map;for(const Yt of Tl(Vt))for(const ai of Ed(Gt,Yt.fieldPath))switch(ai.op){case"==":case"in":kt.set(Yt.fieldPath.canonicalString(),ai.value);break;case"not-in":case"!=":return kt.set(Yt.fieldPath.canonicalString(),ai.value),Array.from(kt.values())}return null}(b,_),K=function(Gt,Vt){const kt=[];let Yt=!0;for(const ai of Tl(Vt)){const C_=0===ai.kind?Ov(Gt,ai.fieldPath,Gt.startAt):Pv(Gt,ai.fieldPath,Gt.startAt);kt.push(C_.value),Yt&&(Yt=C_.inclusive)}return new Mu(kt,Yt)}(b,_),ce=function(Gt,Vt){const kt=[];let Yt=!0;for(const ai of Tl(Vt)){const C_=0===ai.kind?Pv(Gt,ai.fieldPath,Gt.endAt):Ov(Gt,ai.fieldPath,Gt.endAt);kt.push(C_.value),Yt&&(Yt=C_.inclusive)}return new Mu(kt,Yt)}(b,_),Le=this.nn(_,b,K),$e=this.nn(_,b,ce),Pt=this.sn(_,b,z),Bt=this.rn(_.indexId,N,Le,K.inclusive,$e,ce.inclusive,Pt);return ue.forEach(Bt,Gt=>r.J(Gt,t.limit).next(Vt=>{Vt.forEach(kt=>{const Yt=Ke.fromSegments(kt.documentKey);d.has(Yt)||(d=d.add(Yt),g.push(Yt))})}))}).next(()=>g)}return ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),A=[];for(let N=0;N<_;++N){const z=t?this.on(t[N/b]):gI,K=this.un(e,z,r[N%b],o),ce=this.cn(e,z,u[N%b],d),Le=g.map($e=>this.un(e,z,$e,!0));A.push(...this.createRange(K,ce,Le))}return A}un(e,t,r,o){const u=new Of(e,Ke.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new Of(e,Ke.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new RM(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.We(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;return ue.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new wn(Wn.comparator),_=!1;for(const b of d.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?_=!0:g=g.add(A.field))}for(const b of d.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(_?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new u_;for(const o of Tl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Nf.Te.ce(u,d)}return r.$e()}on(e){const t=new u_;return Nf.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new u_;return Nf.Te.ce(xu(this.databaseId,t),r.qe(function(o){const u=Tl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new u_);let u=0;for(const d of Tl(e)){const g=r[u++];for(const _ of o)if(this.ln(t,d.fieldPath)&&vd(g))o=this.fn(o,d,g);else{const b=_.qe(d.kind);Nf.Te.ce(g,b)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const _=new u_;_.seed(g.$e()),Nf.Te.ce(d,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof gi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=mI(e),o=c_(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return ue.forEach(u,g=>o.get([g.indexId,this.uid]).next(_=>{d.push(function(b,A){const N=A?new dd(A.sequenceNumber,new fs(Mf(A.readTime),new Ke($(A.documentKey)),A.largestBatchId)):dd.empty(),z=b.fields.map(([K,ce])=>new cd(Wn.fromServerFormat(K),ce));return new ff(b.indexId,b.collectionGroup,z,N)}(g,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=mI(e),u=c_(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ue.forEach(g,_=>u.put(mS(_.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ue.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ue.forEach(g,_=>this.wn(e,o,_).next(b=>{const A=this.mn(u,_);return b.isEqual(A)?ue.resolve():this.gn(e,u,_,b,A)}))))})}yn(e,t,r,o){return l_(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return l_(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=l_(e);let u=new wn(Pf);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,g)=>{u=u.add(new Of(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}mn(e,t){let r=new wn(Pf);const o=this.an(t,e);if(null==o)return r;const u=wv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(vd(d))for(const g of d.arrayValue.values||[])r=r.add(new Of(t.indexId,e.key,this.on(g),o))}else r=r.add(new Of(t.indexId,e.key,gI,o));return r}gn(e,t,r,o,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,_,b,A,N){const z=g.getIterator(),K=_.getIterator();let ce=md(z),Le=md(K);for(;ce||Le;){let $e=!1,Pt=!1;if(ce&&Le){const Bt=b(ce,Le);Bt<0?Pt=!0:Bt>0&&($e=!0)}else null!=ce?Pt=!0:$e=!0;$e?(A(Le),Le=md(K)):Pt?(N(ce),ce=md(z)):(ce=md(z),Le=md(K))}}(o,u,Pf,g=>{d.push(this.yn(e,t,r,g))},g=>{d.push(this.pn(e,t,r,g))}),ue.waitFor(d)}_n(e){let t=1;return c_(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>Pf(d,g)).filter((d,g,_)=>!g||0!==Pf(d,_[g-1]));const o=[];o.push(e);for(const d of r){const g=Pf(d,e),_=Pf(d,t);if(0===g)o[0]=e.Ke();else if(g>0&&_<0)o.push(d),o.push(d.Ke());else if(_>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,gI,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,gI,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IS)}getMinOffset(e,t){return ue.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||st())).next(IS)}}function wS(n){return yi(n,"collectionParents")}function l_(n){return yi(n,"indexEntries")}function mI(n){return yi(n,"indexConfiguration")}function c_(n){return yi(n,"indexState")}function IS(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Dv(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}const DS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new js(e,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bS(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const _=r.Z({range:d},(A,N,z)=>(g++,z.delete()));u.push(_.next(()=>{Dt(1===g)}));const b=[];for(const A of t.mutations){const N=Ve(e,A.key.path,t.batchId);u.push(o.delete(N)),b.push(A.key)}return ue.waitFor(u).next(()=>b)}function yI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);class vI{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new vI(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Xg(e),d=Ad(e);return d.add({}).next(g=>{Dt("number"==typeof g);const _=new RC(g,t,r,o),b=function(z,K,ce){const Le=ce.baseMutations.map(Pt=>Qg(z.re,Pt)),$e=ce.mutations.map(Pt=>Qg(z.re,Pt));return{userId:K,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Le,mutations:$e}}(this.It,this.userId,_),A=[];let N=new wn((z,K)=>Mt(z.canonicalString(),K.canonicalString()));for(const z of o){const K=Ve(this.userId,z.key.path,g);N=N.add(z.key.path.popLast()),A.push(d.put(b)),A.push(u.put(K,Ye))}return N.forEach(z=>{A.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.In[g]=_.keys()}),ue.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Ad(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Rf(this.It,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ad(e).Z({index:"userMutationsIndex",range:o},(d,g,_)=>{g.userId===this.userId&&(Dt(g.batchId>=r),u=Rf(this.It,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ad(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).W("userMutationsIndex",t).next(r=>r.map(o=>Rf(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ve(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Xg(e).Z({range:o},(d,g,_)=>{const[b,A,N]=d,z=$(A);if(b===this.userId&&t.path.isEqual(z))return Ad(e).get(N).next(K=>{if(!K)throw st();Dt(K.userId===this.userId),u.push(Rf(this.It,K))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Mt);const o=[];return t.forEach(u=>{const d=ve(this.userId,u.path),g=IDBKeyRange.lowerBound(d),_=Xg(e).Z({range:g},(b,A,N)=>{const[z,K,ce]=b,Le=$(K);z===this.userId&&u.path.isEqual(Le)?r=r.add(ce):N.done()});o.push(_)}),ue.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=ve(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new wn(Mt);return Xg(e).Z({range:d},(_,b,A)=>{const[N,z,K]=_,ce=$(z);N===this.userId&&r.isPrefixOf(ce)?ce.length===o&&(g=g.add(K)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ad(e).get(u).next(d=>{if(null===d)throw st();Dt(d.userId===this.userId),r.push(Rf(this.It,d))}))}),ue.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return bS(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Xg(e).Z({range:r},(u,d,g)=>{if(u[0]===this.userId){const _=$(u[1]);o.push(_)}else g.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return CS(e,this.userId,t)}Rn(e){return TS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function CS(n,e,t){const r=ve(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Xg(n).Z({range:u,X:!0},(g,_,b)=>{const[A,N,z]=g;A===e&&N===o&&(d=!0),b.done()}).next(()=>d)}function Ad(n){return yi(n,"mutations")}function Xg(n){return yi(n,"documentMutations")}function TS(n){return yi(n,"mutationQueues")}class kf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kf(0)}static vn(){return new kf(-1)}}class PM{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new kf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Et.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>em(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return em(e).Z((d,g)=>{const _=o_(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(u)).next(()=>o)}forEachTarget(e,t){return em(e).Z((r,o)=>{const u=o_(o);t(u)})}Vn(e){return AS(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Sn(e,t){return AS(e).put("targetGlobalKey",t)}Dn(e,t){return em(e).put(pS(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_d(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return em(e).Z({range:o,index:"queryTargetsIndex"},(d,g,_)=>{const b=o_(g);jg(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Sd(e);return t.forEach(d=>{const g=T(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),ue.waitFor(o)}removeMatchingKeys(e,t,r){const o=Sd(e);return ue.forEach(t,u=>{const d=T(u.path);return ue.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Sd(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Sd(e);let u=Ot();return o.Z({range:r,X:!0},(d,g,_)=>{const b=$(d[1]),A=new Ke(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=T(t.path),o=IDBKeyRange.bound([r],[Tw(r)],!1,!0);let u=0;return Sd(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,g],_,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}se(e,t){return em(e).get(t).next(r=>r?o_(r):null)}}function em(n){return yi(n,"targets")}function AS(n){return yi(n,"targetGlobal")}function Sd(n){return yi(n,"targetDocuments")}function SS([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class kM{constructor(e){this.xn=e,this.buffer=new wn(SS),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();SS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fa(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ka(r)}yield t.Fn(3e5)}))}}class LM{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Hi.at);const r=new kM(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(DS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DS):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,g,_,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),_v()<=Sa.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${N} documents in `+(b-_)+`ms\nTotal Duration: ${b-A}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class VM{constructor(e,t){this.db=e,this.garbageCollector=new LM(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return _I(e,r)}removeReference(e,t,r){return _I(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _I(e,t)}Gn(e,t){return function(r,o){let u=!1;return TS(r).tt(d=>CS(r,d,o).next(g=>(g&&(u=!0),ue.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,g)=>{if(g<=t){const _=this.Gn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Et.min()),Sd(e).delete([0,T(d.path)])))});o.push(_)}}).next(()=>ue.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _I(e,t)}Kn(e,t){const r=Sd(e);let o,u=Hi.at;return r.Z({index:"documentTargetsIndex"},([d,g],{path:_,sequenceNumber:b})=>{0===d?(u!==Hi.at&&t(new Ke($(o)),u),u=b,o=_):u=Hi.at}).next(()=>{u!==Hi.at&&t(new Ke($(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _I(n,e){return Sd(n).put((r=n.currentSequenceNumber,{targetId:0,path:T(e.path),sequenceNumber:r}));var r}class xS{constructor(){this.changes=new Ol(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UM{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ff(e).put(r)}removeEntry(e,t,r){return Ff(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],fI(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Ln.newInvalidDocument(t);return Ff(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(d_(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Ln.newInvalidDocument(t)};return Ff(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(d_(t))},(o,u)=>{r={document:this.jn(t,u),size:yI(u)}}).next(()=>r)}getEntries(e,t){let r=oi();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=oi(),o=new rr(Ke.comparator);return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);r=r.insert(u,g),o=o.insert(u,yI(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let o=new wn(OS);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(d_(o.first()),d_(o.last())),d=o.getIterator();let g=d.getNext();return Ff(e).Z({index:"documentKeyIndex",range:u},(_,b,A)=>{const N=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&OS(g,N)<0;)r(g,null),g=d.getNext();g&&g.isEqual(N)&&(r(g,b),g=d.hasNext()?d.getNext():null),g?A.j(d_(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),fI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ff(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let g=oi();for(const _ of d){const b=this.jn(Ke.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=oi();const d=NS(t,r),g=NS(t,fs.max());return Ff(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(_,b,A)=>{const N=this.jn(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new BM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return RS(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Qn(e,t){return RS(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function CM(n,e){let t;if(e.document)t=TC(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),o=Mf(e.noDocument.readTime);t=Ln.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ke.fromSegments(e.unknownDocument.path),o=Mf(e.unknownDocument.version);t=Ln.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new An(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Ln.newInvalidDocument(e)}}function MS(n){return new UM(n)}class BM extends xS{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ol(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new wn((u,d)=>Mt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const _=fS(this.Yn.It,d);o=o.add(u.path.popLast()),r+=yI(_)-g.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=fS(this.Yn.It,d.convertToNoDocument(Et.min()));t.push(this.Yn.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function RS(n){return yi(n,"remoteDocumentGlobal")}function Ff(n){return yi(n,"remoteDocumentsV14")}function d_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NS(n,e){const t=e.documentKey.path.toArray();return[n,fI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OS(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class jM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class PS{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Tf(r.mutation,o,Ri.empty(),An.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const o=mi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Af();return u.forEach((g,_)=>{d=d.insert(g,_.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=mi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=oi();const d=Pl(),g=Pl();return t.forEach((_,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof Ua)?u=u.insert(b.key,b):void 0!==A&&(d.set(b.key,A.mutation.getFieldMask()),Tf(A.mutation,b,A.mutation.getFieldMask(),An.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,A)=>d.set(b,A)),t.forEach((b,A)=>{var N;return g.set(b,new jM(A,null!==(N=d.get(b))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Pl();let o=new rr((d,g)=>d-g),u=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let A=r.get(_)||Ri.empty();A=g.applyToLocalView(b,A),r.set(_,A);const N=(o.get(g.batchId)||Ot()).add(_);o=o.insert(g.batchId,N)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),b=_.key,A=_.value,N=qv();A.forEach(z=>{if(!u.has(z)){const K=Wg(t.get(z),r.get(z));null!==K&&N.set(z,K),u=u.add(z)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ue.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ps(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ue.resolve(mi());let g=-1,_=u;return d.next(b=>ue.forEach(b,(A,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(A)?ue.resolve():this.getBaseDocument(e,A,N).next(z=>{_=_.insert(A,z)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,Ot())).next(A=>({batchId:g,changes:Gv(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let o=Af();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Af();return this.indexManager.getCollectionParents(e,o).next(d=>ue.forEach(d,g=>{const _=(b=t,A=g.child(o),new Va(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,_)=>{const b=_.getKey();null===o.get(b)&&(o=o.insert(b,Ln.newInvalidDocument(b)))});let d=Af();return o.forEach((g,_)=>{const b=u.get(g);void 0!==b&&Tf(b.mutation,_,Ri.empty(),An.now()),qg(t,_)&&(d=d.insert(g,_))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve(Ln.newInvalidDocument(t))}}class $M{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:vr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:PC(r.bundledQuery),readTime:vr(r.readTime)}),ue.resolve();var r}}class HM{constructor(){this.overlays=new rr(Ke.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=mi();return ue.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const o=mi(),u=t.length+1,d=new Ke(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new rr((b,A)=>b-A);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=mi(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const g=mi(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,A)=>g.set(b,A)),!(g.size()>=o)););return ue.resolve(g)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new OC(t,r));let u=this.es.get(t);void 0===u&&(u=Ot(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class LC{constructor(){this.ns=new wn(vi.ss),this.rs=new wn(vi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new vi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new vi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new sn([])),r=new vi(t,e),o=new vi(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new sn([])),r=new vi(t,e),o=new vi(t,e+1);let u=Ot();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new vi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||Mt(e._s,t._s)}static os(e,t){return Mt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class GM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new wn(vi.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new RC(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.gs=this.gs.add(new vi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(d)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),o=new vi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const g=this.ys(d._s);u.push(g)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Mt);return t.forEach(o=>{const u=new vi(o,0),d=new vi(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],g=>{r=r.add(g._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const d=new vi(new Ke(u),0);let g=new wn(Mt);return this.gs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(_._s)),!0)},d),ue.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,o=>{const u=new vi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new vi(t,0),o=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qM{constructor(e){this.Es=e,this.docs=new rr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=oi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Ln.newInvalidDocument(o))}),ue.resolve(r)}getAllFromCollection(e,t,r){let o=oi();const u=new Ke(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:_}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Dv(Fg(_),r)<=0||(o=o.insert(_.key,_.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,t,r,o){st()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zM(this)}getSize(e){return ue.resolve(this.size)}}class zM extends xS{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class WM{constructor(e){this.persistence=e,this.Rs=new Ol(t=>_d(t),jg),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.bs=0,this.Ps=new LC,this.targetCount=0,this.vs=kf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ue.waitFor(u).next(()=>o)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class kS{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Hi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new WM(this),this.indexManager=new NM,this.remoteDocumentCache=new qM(r=>this.referenceDelegate.xs(r)),this.It=new hS(t),this.Ns=new $M(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new GM(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new ZM(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class ZM extends xw{constructor(e){super(),this.currentSequenceNumber=e}}class EI{constructor(e){this.persistence=e,this.Fs=new LC,this.$s=null}static Bs(e){return new EI(e)}get Ls(){if(this.$s)return this.$s;throw st()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const o=Ke.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,Et.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class KM{constructor(e){this.It=e}$(e,t,r,o){const u=new Lg("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Q,{unique:!0}),g.createObjectStore("documentMutations"),FS(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=ue.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),FS(e)),d=d.next(()=>function(g){const _=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,_){return _.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Q,{unique:!0});const A=_.store("mutations"),N=b.map(z=>A.put(z));return ue.waitFor(N)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:n_});_.createIndex("collectionPathOverlayIndex",r_,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",i_,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:ot});_.createIndex("documentKeyIndex",Me),_.createIndex("collectionGroupIndex",vt)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Jv}).createIndex("sequenceNumberIndex",Xv,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:e_}).createIndex("documentKeyIndex",t_,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=yI(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ue.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>ue.forEach(g,_=>{Dt(_.userId===u.userId);const b=Rf(this.It,_);return bS(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,g)=>{const _=new sn(d),b=[0,T(_)];u.push(t.get(b).next(A=>A?ue.resolve():t.put({targetId:0,path:T(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Ll});const r=t.store("collectionParents"),o=new FC,u=d=>{if(o.add(d)){const g=d.lastSegment(),_=d.popLast();return r.put({collectionId:g,parent:T(_)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const _=new sn(d);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,_],b)=>{const A=$(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=o_(o),d=pS(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const g=t.store("remoteDocumentsV14"),_=(b=d,b.document?new Ke(sn.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(A))}).next(()=>ue.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=MS(this.It),u=new kS(EI.Bs,this.It.re);return r.W().next(d=>{const g=new Map;return d.forEach(_=>{var b;let A=null!==(b=g.get(_.userId))&&void 0!==b?b:Ot();Rf(this.It,_).keys().forEach(N=>A=A.add(N)),g.set(_.userId,A)}),ue.forEach(g,(_,b)=>{const A=new Gr(b),N=pI.oe(this.It,A),z=u.getIndexManager(A),K=vI.oe(A,this.It,z,u.referenceDelegate);return new PS(o,K,N,z).recalculateAndSaveOverlaysForDocumentKeys(new MC(t,Hi.at),_).next()})})}}function FS(n){n.createObjectStore("targetDocuments",{keyPath:yn}).createIndex("documentTargetsIndex",gs,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qt,{unique:!0}),n.createObjectStore("targetGlobal")}const VC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class UC{constructor(e,t,r,o,u,d,g,_,b,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=g,this.Js=b,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=z=>Promise.resolve(),!UC.C())throw new Ne(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VM(this,o),this.ii=t+"main",this.It=new hS(_),this.ri=new Bs(this.ii,this.Xs,new KM(this.It)),this.Cs=new PM(this.referenceDelegate,this.It),this.remoteDocumentCache=MS(this.It),this.Ns=new TM,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,VC);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Hi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,we.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Fa(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return h_(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return wI(e).delete(this.clientId)}yi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=yi(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),g=u.filter(_=>-1===d.indexOf(_));return ue.forEach(g,_=>o.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):h_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,VC);return!1}}return!(!this.networkEnabled||!this.inForeground)||wI(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new MC(t,Hi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>wI(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return vI.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OM(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return pI.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?bM:14===d?dS:13===d?cS:12===d?s_:11===d?Jg:void st();var d;let g;return this.ri.runTransaction(e,o,u,_=>(g=new MC(_,this.Ss?this.Ss.next():Hi.at),"readwrite-primary"===t?this.fi(g).next(b=>!!b||this.di(g)).next(b=>{if(!b)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(de.FAILED_PRECONDITION,Sw);return r(g)}).next(b=>this.wi(g).next(()=>b)):this.Vi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Vi(e){return h_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(de.FAILED_PRECONDITION,VC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return h_(e).put("owner",t)}static C(){return Bs.C()}_i(e){const t=h_(e);return t.get("owner").next(r=>this.mi(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function h_(n){return yi(n,"owner")}function wI(n){return yi(n,"clientMetadata")}function BC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jC{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Ot(),o=Ot();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jC(e,t.fromCache,r,o)}}class LS{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(jw(t))return ue.resolve(null);let r=si(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=$g(t,null,"F"),r=si(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Ot(...u);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Fi(t,g);return this.$i(t,b,d,_.readTime)?this.ki(e,$g(t,null,"F")):this.Bi(e,b,t,_)}))})))}Oi(e,t,r,o){return jw(t)||o.isEqual(Et.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(_v()<=Sa.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Gg(t)),this.Bi(e,d,t,kg(o,-1)))})}Fi(e,t){let r=new wn(Uv(e));return t.forEach((o,u)=>{qg(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return _v()<=Sa.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Gg(t)),this.Ni.getDocumentsMatchingQuery(e,t,fs.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class YM{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new rr(Mt),this.qi=new Ol(u=>_d(u),jg),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PS(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function VS(n,e,t,r){return new YM(n,e,t,r)}function US(n,e){return $C.apply(this,arguments)}function $C(){return $C=(0,we.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let _=Ot();for(const b of o){d.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}for(const b of u){g.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}return t.localDocuments.getDocuments(r,_).next(b=>({ji:b,removedBatchIds:d,addedBatchIds:g}))})})}),$C.apply(this,arguments)}function QM(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,_,b){const A=_.batch,N=A.keys();let z=ue.resolve();return N.forEach(K=>{z=z.next(()=>b.getEntry(g,K)).next(ce=>{const Le=_.docVersions.get(K);Dt(null!==Le),ce.version.compareTo(Le)<0&&(A.applyToRemoteDocument(ce,_),ce.isValidDocument()&&(ce.setReadTime(_.commitVersion),b.addEntry(ce)))})}),z.next(()=>d.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Ot();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(g=g.add(d.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function BS(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function JM(n,e){const t=Je(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const g=[];e.targetChanges.forEach((A,N)=>{const z=o.get(N);if(!z)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let K=z.withSequenceNumber(u.currentSequenceNumber);var ce,Le,$e;e.targetMismatches.has(N)?K=K.withResumeToken(yr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):A.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(A.resumeToken,r)),o=o.insert(N,K),Le=K,$e=A,(0===(ce=z).resumeToken.approximateByteSize()||Le.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,K))});let _=oi(),b=Ot();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(jS(u,d,e.documentUpdates).next(A=>{_=A.Wi,b=A.zi})),!r.isEqual(Et.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return ue.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.Ui=o,u))}function jS(n,e,t){let r=Ot(),o=Ot();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=oi();return t.forEach((g,_)=>{const b=u.get(g);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(Et.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):Fe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",_.version)}),{Wi:d,zi:o}})}function XM(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tm(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,ue.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Td(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function nm(n,e,t){return HC.apply(this,arguments)}function HC(){return HC=(0,we.Z)(function*(n,e,t){const r=Je(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Fa(d))throw d;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),HC.apply(this,arguments)}function II(n,e,t){const r=Je(n);let o=Et.min(),u=Ot();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,_,b){const A=Je(g),N=A.qi.get(b);return void 0!==N?ue.resolve(A.Ui.get(N)):A.Cs.getTargetData(_,b)}(r,d,si(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,g.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:Et.min(),t?u:Ot())).next(g=>(GS(r,$w(e),g),{documents:g,Hi:u})))}function $S(n,e){const t=Je(n),r=Je(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function HS(n,e){const t=Je(n),r=t.Ki.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,kg(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(GS(t,e,o),o))}function GS(n,e,t){let r=n.Ki.get(e)||Et.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function GC(){return GC=(0,we.Z)(function*(n,e,t,r){const o=Je(n);let u=Ot(),d=oi();for(const b of t){const A=e.Ji(b.metadata.name);b.document&&(u=u.add(A));const N=e.Yi(b);N.setReadTime(e.Xi(b.metadata.readTime)),d=d.insert(A,N)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),_=yield tm(o,(b=r,si(wf(sn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>jS(b,g,d).next(A=>(g.apply(b),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>o.Cs.addMatchingKeys(b,u,_.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.Wi,A.zi)).next(()=>A.Wi)))}),GC.apply(this,arguments)}function tR(n,e){return qC.apply(this,arguments)}function qC(){return qC=(0,we.Z)(function*(n,e,t=Ot()){const r=yield tm(n,si(PC(e.bundledQuery))),o=Je(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=vr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(yr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),qC.apply(this,arguments)}function qS(n,e){return`firestore_clients_${n}_${e}`}function zS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zC(n,e){return`firestore_targets_${n}_${e}`}class DI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ne(o.error.code,o.error.message))),d?new DI(e,t,o.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class f_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ne(r.error.code,r.error.message))),u?new f_(e,r.state,o):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=kl();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=iC(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new bI(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class WC{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new WC(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZC{constructor(){this.activeTargetIds=kl()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KC{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new rr(Mt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=qS(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new ZC),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(qS(e.persistenceKey,o));if(u){const d=bI.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(zC(this.persistenceKey,e));if(r){const o=f_.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zC(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=Hi.at;if(null!=u)try{const g=JSON.parse(u);Dt("number"==typeof g),d=g}catch(g){lr("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==Hi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new DI(this.currentUser,e,t,r),u=zS(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=zS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=zC(this.persistenceKey,e),u=new f_(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return bI.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return DI.Zi(new Gr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return f_.Zi(o,t)}yr(e){return WC.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],g=[];return u.forEach(_=>{o.has(_)||d.push(_)}),o.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Br(d,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=kl();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class WS{constructor(){this.Lr=new ZC,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ZC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nR{qr(e){}shutdown(){}}class ZS{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const rR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iR{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class sR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Fe("RestConnection","Sending: ",d,r);const g={};return this.lo(g,o,u),this.fo(e,d,g,r).then(_=>(Fe("RestConnection","Received: ",_),_),_=>{throw ho("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ad,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${rR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const g=new Jb;g.setWithCredentials(!0),g.listenOnce(Iw.COMPLETE,()=>{var b;try{switch(g.getLastErrorCode()){case ww.NO_ERROR:const A=g.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(A)),u(A);break;case ww.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),d(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case ww.HTTP_ERROR:const N=g.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',N,"response text:",g.getResponseText()),N>0){let z=g.getResponseJson();Array.isArray(z)&&(z=z[0]);const K=null===(b=z)||void 0===b?void 0:b.error;if(K&&K.status&&K.message){const ce=function(Le){const $e=Le.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf($e)>=0?$e:de.UNKNOWN}(K.status);d(new Ne(ce,K.message))}else d(new Ne(de.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(o);g.send(t,"POST",_,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Ew(),d=Qb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new vv({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=o.join("");Fe("Connection","Creating WebChannel: "+_,g);const b=u.createWebChannel(_,g);let A=!1,N=!1;const z=new iR({Hr:ce=>{N?Fe("Connection","Not sending because WebChannel is closed:",ce):(A||(Fe("Connection","Opening WebChannel transport."),b.open(),A=!0),Fe("Connection","WebChannel sending:",ce),b.send(ce))},Jr:()=>b.close()}),K=(ce,Le,$e)=>{ce.listen(Le,Pt=>{try{$e(Pt)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return K(b,Ng.EventType.OPEN,()=>{N||Fe("Connection","WebChannel transport opened.")}),K(b,Ng.EventType.CLOSE,()=>{N||(N=!0,Fe("Connection","WebChannel transport closed"),z.io())}),K(b,Ng.EventType.ERROR,ce=>{N||(N=!0,ho("Connection","WebChannel transport errored:",ce),z.io(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),K(b,Ng.EventType.MESSAGE,ce=>{var Le;if(!N){const $e=ce.data[0];Dt(!!$e);const Pt=$e,Bt=Pt.error||(null===(Le=Pt[0])||void 0===Le?void 0:Le.error);if(Bt){Fe("Connection","WebChannel received error:",Bt);const Gt=Bt.status;let Vt=function(Yt){const ai=Pr[Yt];if(void 0!==ai)return EC(ai)}(Gt),kt=Bt.message;void 0===Vt&&(Vt=de.INTERNAL,kt="Unknown error status: "+Gt+" with message "+Bt.message),N=!0,z.io(new Ne(Vt,kt)),b.close()}else Fe("Connection","WebChannel received:",$e),z.ro($e)}}),K(d,eS.STAT_EVENT,ce=>{ce.stat===yv.PROXY?Fe("Connection","Detected buffering proxy"):ce.stat===yv.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.so()},0),z}}function KS(){return"undefined"!=typeof window?window:null}function CI(){return"undefined"!=typeof document?document:null}function p_(n){return new sI(n,!0)}class YC{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class YS{constructor(e,t,r,o,u,d,g,_){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new YC(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,we.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,we.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Ne(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,we.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oR extends YS{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function uS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),o=e.targetChange.targetIds||[],u=function(_,b){return _.gt?(Dt(void 0===b||"string"==typeof b),yr.fromBase64String(b||"")):(Dt(void 0===b||b instanceof Uint8Array),yr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(_){const b=void 0===_.code?de.UNKNOWN:EC(_.code);return new Ne(b,_.message||"")}(d);t=new Kv(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Ko(n,r.document.name),u=vr(r.document.updateTime),d=new pi({mapValue:{fields:r.document.fields}}),g=Ln.newFoundDocument(o,u,d);t=new Zv(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Ko(n,r.document),u=r.readTime?vr(r.readTime):Et.min(),d=Ln.newNoDocument(o,u);t=new Zv([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Ko(n,r.document);t=new Zv([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new vC(r.count||0);t=new DC(r.targetId,u)}}var _;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return Et.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?vr(u.readTime):Et.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Yg(this.It),t.addTarget=function(o,u){let d;const g=u.target;return d=_f(g)?{documents:SC(o,g)}:{query:hI(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=oI(o,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(d.readTime=Sf(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function lS(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Yg(this.It),t.removeTarget=e,this.Bo(t)}}class aR extends YS{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function AC(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let u=vr(r.updateTime?r.updateTime:o);return u.isEqual(Et.min())&&(u=vr(o)),new gC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.Zo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Yg(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qg(this.It,r))};this.Bo(t)}}class uR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(de.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(de.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class cR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(lr(t),this.ou=!1):Fe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class dR{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(g=>{r.enqueueAndForget((0,we.Z)(function*(){var _;Vl(d)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,we.Z)(function*(b){const A=Je(b);A._u.add(4),yield rm(A),A.gu.set("Unknown"),A._u.delete(4),yield g_(A)}),function(b){return _.apply(this,arguments)})(d))}))}),this.gu=new cR(r,o)}}function g_(n){return JC.apply(this,arguments)}function JC(){return JC=(0,we.Z)(function*(n){if(Vl(n))for(const e of n.wu)yield e(!0)}),JC.apply(this,arguments)}function rm(n){return XC.apply(this,arguments)}function XC(){return XC=(0,we.Z)(function*(n){for(const e of n.wu)yield e(!1)}),XC.apply(this,arguments)}function TI(n,e){const t=Je(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),nT(t)?tT(t):sm(t).ko()&&eT(t,e))}function m_(n,e){const t=Je(n),r=sm(t);t.du.delete(e),r.ko()&&QS(t,e),0===t.du.size&&(r.ko()?r.Fo():Vl(t)&&t.gu.set("Unknown"))}function eT(n,e){n.yu.Mt(e.targetId),sm(n).zo(e)}function QS(n,e){n.yu.Mt(e),sm(n).Ho(e)}function tT(n){n.yu=new bC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),sm(n).start(),n.gu.uu()}function nT(n){return Vl(n)&&!sm(n).No()&&n.du.size>0}function Vl(n){return 0===Je(n)._u.size}function JS(n){n.yu=void 0}function hR(n){return rT.apply(this,arguments)}function rT(){return rT=(0,we.Z)(function*(n){n.du.forEach((e,t)=>{eT(n,e)})}),rT.apply(this,arguments)}function fR(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,we.Z)(function*(n,e){JS(n),nT(n)?(n.gu.hu(e),tT(n)):n.gu.set("Unknown")}),iT.apply(this,arguments)}function pR(n,e,t){return sT.apply(this,arguments)}function sT(){return sT=(0,we.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Kv&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield AI(n,r)}else if(e instanceof Zv?n.yu.Gt(e):e instanceof DC?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Et.min()))try{const r=yield BS(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.du.get(_);b&&o.du.set(_,b.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const _=o.du.get(g);if(!_)return;o.du.set(g,_.withResumeToken(yr.EMPTY_BYTE_STRING,_.snapshotVersion)),QS(o,g);const b=new Td(_.target,g,1,_.sequenceNumber);eT(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield AI(n,r)}var r}),sT.apply(this,arguments)}function AI(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,we.Z)(function*(n,e,t){if(!Fa(e))throw e;n._u.add(1),yield rm(n),n.gu.set("Offline"),t||(t=()=>BS(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield g_(n)}))}),oT.apply(this,arguments)}function XS(n,e){return e().catch(t=>AI(n,t,e))}function im(n){return aT.apply(this,arguments)}function aT(){return aT=(0,we.Z)(function*(n){const e=Je(n),t=xd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;gR(e);)try{const o=yield XM(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,mR(e,o)}catch(o){yield AI(e,o)}ex(e)&&tx(e)}),aT.apply(this,arguments)}function gR(n){return Vl(n)&&n.fu.length<10}function mR(n,e){n.fu.push(e);const t=xd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function ex(n){return Vl(n)&&!xd(n).No()&&n.fu.length>0}function tx(n){xd(n).start()}function yR(n){return uT.apply(this,arguments)}function uT(){return uT=(0,we.Z)(function*(n){xd(n).eu()}),uT.apply(this,arguments)}function vR(n){return lT.apply(this,arguments)}function lT(){return lT=(0,we.Z)(function*(n){const e=xd(n);for(const t of n.fu)e.Xo(t.mutations)}),lT.apply(this,arguments)}function _R(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,we.Z)(function*(n,e,t){const r=n.fu.shift(),o=NC.from(r,e,t);yield XS(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield im(n)}),cT.apply(this,arguments)}function ER(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,we.Z)(function*(n,e){var t;e&&xd(n).Yo&&(yield(t=(0,we.Z)(function*(r,o){if(_C(u=o.code)&&u!==de.ABORTED){const d=r.fu.shift();xd(r).Mo(),yield XS(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield im(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),ex(n)&&tx(n)}),dT.apply(this,arguments)}function nx(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,we.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Vl(t);t._u.add(3),yield rm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield g_(t)}),hT.apply(this,arguments)}function fT(n,e){return pT.apply(this,arguments)}function pT(){return pT=(0,we.Z)(function*(n,e){const t=Je(n);e?(t._u.delete(2),yield g_(t)):e||(t._u.add(2),yield rm(t),t.gu.set("Unknown"))}),pT.apply(this,arguments)}function sm(n){return n.pu||(n.pu=function(e,t,r){const o=Je(e);return o.su(),new oR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:hR.bind(null,n),Zr:fR.bind(null,n),Wo:pR.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.pu.Mo(),nT(n)?tT(n):n.gu.set("Unknown")):(yield n.pu.stop(),JS(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function xd(n){return n.Iu||(n.Iu=function(e,t,r){const o=Je(e);return o.su(),new aR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:yR.bind(null,n),Zr:ER.bind(null,n),tu:vR.bind(null,n),Zo:_R.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Iu.Mo(),yield im(n)):(yield n.Iu.stop(),n.fu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class gT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new gT(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function om(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Fa(n))return new Ne(de.UNAVAILABLE,`${e}: ${n}`);throw n}class am{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Af(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new am(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof am)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new am;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class rx{constructor(){this.Tu=new rr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):st():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class um{constructor(e,t,r,o,u,d,g,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new um(e,t,am.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class wR{constructor(){this.Au=void 0,this.listeners=[]}}class IR{constructor(){this.queries=new Ol(e=>Hg(e),Df),this.onlineState="Unknown",this.Ru=new Set}}function mT(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,we.Z)(function*(n,e){const t=Je(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new wR),o)try{u.Au=yield t.onListen(r)}catch(d){const g=om(d,`Initialization of query '${Gg(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&ET(t)}),yT.apply(this,arguments)}function vT(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,we.Z)(function*(n,e){const t=Je(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),_T.apply(this,arguments)}function DR(n,e){const t=Je(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Pu(o)&&(r=!0);d.Au=o}}r&&ET(t)}function bR(n,e,t){const r=Je(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function ET(n){n.Ru.forEach(e=>{e.next()})}class wT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new um(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=um.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class CR{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class ix{constructor(e){this.It=e}Ji(e){return Ko(this.It,e)}Yi(e){return e.metadata.exists?TC(this.It,e.document,!1):Ln.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return vr(e)}}class TR{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=sn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new ix(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||Ot()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function eR(n,e,t,r){return GC.apply(this,arguments)}(e.localStore,new ix(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield tR(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function sx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ox{constructor(e){this.key=e}}class ax{constructor(e){this.key=e}}class ux{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ot(),this.mutatedKeys=Ot(),this.Gu=Uv(e),this.Qu=new am(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new rx,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const z=o.get(A),K=qg(this.query,N)?N:null,ce=!!z&&this.mutatedKeys.has(z.key),Le=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let $e=!1;z&&K?z.data.isEqual(K.data)?ce!==Le&&(r.track({type:3,doc:K}),$e=!0):this.Hu(z,K)||(r.track({type:2,doc:K}),$e=!0,(_&&this.Gu(K,_)>0||b&&this.Gu(K,b)<0)&&(g=!0)):!z&&K?(r.track({type:0,doc:K}),$e=!0):z&&!K&&(r.track({type:1,doc:z}),$e=!0,(_||b)&&(g=!0)),$e&&(K?(d=d.add(K),u=Le?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,A)=>function(N,z){const K=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return K(N)-K(z)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.qu;return this.qu=g,0!==u.length||_?{snapshot:new um(this.query,e.Qu,o,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new rx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ot(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new ax(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new ox(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ot();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return um.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class AR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class SR{constructor(e){this.key=e,this.nc=!1}}class xR{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new Ol(g=>Hg(g),Df),this.rc=new Map,this.oc=new Set,this.uc=new rr(Ke.comparator),this.cc=new Map,this.ac=new LC,this.hc={},this.lc=new Map,this.fc=kf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function MR(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,we.Z)(function*(n,e){const t=qT(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield tm(t.localStore,si(e));t.isPrimaryClient&&TI(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield DT(t,e,r,"current"===g,d.resumeToken)}return o}),IT.apply(this,arguments)}function DT(n,e,t,r,o){return bT.apply(this,arguments)}function bT(){return bT=(0,we.Z)(function*(n,e,t,r,o){n._c=(N,z,K)=>{return(ce=(0,we.Z)(function*(Le,$e,Pt,Bt){let Gt=$e.view.Wu(Pt);Gt.$i&&(Gt=yield II(Le.localStore,$e.query,!1).then(({documents:Yt})=>$e.view.Wu(Yt,Gt)));const Vt=Bt&&Bt.targetChanges.get($e.targetId),kt=$e.view.applyChanges(Gt,Le.isPrimaryClient,Vt);return PT(Le,$e.targetId,kt.Xu),kt.snapshot}),function(Le,$e,Pt,Bt){return ce.apply(this,arguments)})(n,N,z,K);var ce};const u=yield II(n.localStore,e,!0),d=new ux(e,u.Hi),g=d.Wu(u.documents),_=Kg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=d.applyChanges(g,n.isPrimaryClient,_);PT(n,t,b.Xu);const A=new AR(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),bT.apply(this,arguments)}function RR(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,we.Z)(function*(n,e){const t=Je(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!Df(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield nm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),m_(t.remoteStore,r.targetId),lm(t,r.targetId)}).catch(ka))):(lm(t,r.targetId),yield nm(t.localStore,r.targetId,!0))}),CT.apply(this,arguments)}function TT(){return TT=(0,we.Z)(function*(n,e,t){const r=zT(n);try{const o=yield function(u,d){const g=Je(u),_=An.now(),b=d.reduce((z,K)=>z.add(K.key),Ot());let A,N;return g.persistence.runTransaction("Locally write mutations","readwrite",z=>{let K=oi(),ce=Ot();return g.Gi.getEntries(z,b).next(Le=>{K=Le,K.forEach(($e,Pt)=>{Pt.isValidDocument()||(ce=ce.add($e))})}).next(()=>g.localDocuments.getOverlayedDocuments(z,K)).next(Le=>{A=Le;const $e=[];for(const Pt of d){const Bt=Jw(Pt,A.get(Pt.key).overlayedDocument);null!=Bt&&$e.push(new Ua(Pt.key,Bt,aC(Bt.value.mapValue),Hn.exists(!0)))}return g.mutationQueue.addMutationBatch(z,_,$e,d)}).next(Le=>{N=Le;const $e=Le.applyToLocalDocumentSet(A,ce);return g.documentOverlayCache.saveOverlays(z,Le.batchId,$e)})}).then(()=>({batchId:N.batchId,changes:Gv(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let _=u.hc[u.currentUser.toKey()];_||(_=new rr(Mt)),_=_.insert(d,g),u.hc[u.currentUser.toKey()]=_}(r,o.batchId,t),yield Ul(r,o.changes),yield im(r.remoteStore)}catch(o){const u=om(o,"Failed to persist write");t.reject(u)}}),TT.apply(this,arguments)}function lx(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,we.Z)(function*(n,e){const t=Je(n);try{const r=yield JM(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?Dt(d.nc):o.removedDocuments.size>0&&(Dt(d.nc),d.nc=!1))}),yield Ul(t,r,e)}catch(r){yield ka(r)}}),AT.apply(this,arguments)}function cx(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const g=d.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=Je(u);g.onlineState=d;let _=!1;g.queries.forEach((b,A)=>{for(const N of A.listeners)N.bu(d)&&(_=!0)}),_&&ET(g)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OR(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,we.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new rr(Ke.comparator);d=d.insert(u,Ln.newNoDocument(u,Et.min()));const g=Ot().add(u),_=new Zg(Et.min(),new Map,new wn(Mt),d,g);yield lx(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),kT(r)}else yield nm(r.localStore,e,!1).then(()=>lm(r,e,t)).catch(ka)}),ST.apply(this,arguments)}function PR(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,we.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const o=yield QM(t.localStore,e);OT(t,r,null),NT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ul(t,o)}catch(o){yield ka(o)}}),xT.apply(this,arguments)}function kR(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=(0,we.Z)(function*(n,e,t){const r=Je(n);try{const o=yield function(u,d){const g=Je(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return g.mutationQueue.lookupMutationBatch(_,d).next(A=>(Dt(null!==A),b=A.keys(),g.mutationQueue.removeMutationBatch(_,A))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,b,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>g.localDocuments.getDocuments(_,b))})}(r.localStore,e);OT(r,e,t),NT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ul(r,o)}catch(o){yield ka(o)}}),MT.apply(this,arguments)}function RT(){return RT=(0,we.Z)(function*(n,e){const t=Je(n);Vl(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Je(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=om(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),RT.apply(this,arguments)}function NT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function OT(n,e,t){const r=Je(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function lm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||dx(n,r)})}function dx(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(m_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),kT(n))}function PT(n,e,t){for(const r of t)r instanceof ox?(n.ac.addReference(r.key,e),LR(n,r)):r instanceof ax?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||dx(n,r.key)):st()}function LR(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.oc.add(r),kT(n))}function kT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ke(sn.fromString(e)),r=n.fc.next();n.cc.set(r,new SR(t)),n.uc=n.uc.insert(t,r),TI(n.remoteStore,new Td(si(wf(t.path)),r,2,Hi.at))}}function Ul(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,we.Z)(function*(n,e,t){const r=Je(n),o=[],u=[],d=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,_)=>{d.push(r._c(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,(null==b?void 0:b.fromCache)?"not-current":"current"),b){o.push(b);const A=jC.Ci(_.targetId,b);u.push(A)}}))}),yield Promise.all(d),r.sc.Wo(o),yield(g=(0,we.Z)(function*(_,b){const A=Je(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ue.forEach(b,z=>ue.forEach(z.Si,K=>A.persistence.referenceDelegate.addReference(N,z.targetId,K)).next(()=>ue.forEach(z.Di,K=>A.persistence.referenceDelegate.removeReference(N,z.targetId,K)))))}catch(N){if(!Fa(N))throw N;Fe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const z=N.targetId;if(!N.fromCache){const K=A.Ui.get(z),Le=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);A.Ui=A.Ui.insert(z,Le)}}}),function(_,b){return g.apply(this,arguments)})(r.localStore,u))}),FT.apply(this,arguments)}function VR(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,we.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield US(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(g=>{g.reject(new Ne(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ul(t,r.ji)}var o}),LT.apply(this,arguments)}function UR(n,e){const t=Je(n),r=t.cc.get(e);if(r&&r.nc)return Ot().add(r.key);{let o=Ot();const u=t.rc.get(e);if(!u)return o;for(const d of u){const g=t.ic.get(d);o=o.unionWith(g.view.ju)}return o}}function BR(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,we.Z)(function*(n,e){const t=Je(n),r=yield II(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&PT(t,e.targetId,o.Xu),o}),VT.apply(this,arguments)}function jR(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,we.Z)(function*(n,e){const t=Je(n);return HS(t.localStore,e).then(r=>Ul(t,r))}),UT.apply(this,arguments)}function $R(n,e,t,r){return BT.apply(this,arguments)}function BT(){return BT=(0,we.Z)(function*(n,e,t,r){const o=Je(n),u=yield function(d,g){const _=Je(d),b=Je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Tn(A,g).next(N=>N?_.localDocuments.getDocuments(A,N):ue.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield im(o.remoteStore):"acknowledged"===t||"rejected"===t?(OT(o,e,r||null),NT(o,e),g=e,Je(Je(o.localStore).mutationQueue).An(g)):st(),yield Ul(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),BT.apply(this,arguments)}function jT(){return jT=(0,we.Z)(function*(n,e){const t=Je(n);if(qT(t),zT(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield hx(t,r.toArray());t.dc=!0,yield fT(t.remoteStore,!0);for(const u of o)TI(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(lm(t,d),nm(t.localStore,d,!0))),m_(t.remoteStore,d)}),yield o,yield hx(t,r),function(u){const d=Je(u);d.cc.forEach((g,_)=>{m_(d.remoteStore,_)}),d.ac.fs(),d.cc=new Map,d.uc=new rr(Ke.comparator)}(t),t.dc=!1,yield fT(t.remoteStore,!1)}}),jT.apply(this,arguments)}function hx(n,e,t){return $T.apply(this,arguments)}function $T(){return $T=(0,we.Z)(function*(n,e,t){const r=Je(n),o=[],u=[];for(const d of e){let g;const _=r.rc.get(d);if(_&&0!==_.length){g=yield tm(r.localStore,si(_[0]));for(const b of _){const A=r.ic.get(b),N=yield BR(r,A);N.snapshot&&u.push(N.snapshot)}}else{const b=yield $S(r.localStore,d);g=yield tm(r.localStore,b),yield DT(r,fx(b),d,!1,g.resumeToken)}o.push(g)}return r.sc.Wo(u),o}),$T.apply(this,arguments)}function fx(n){return Bw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function GR(n){const e=Je(n);return Je(Je(e.localStore).persistence).vi()}function qR(n,e,t,r){return HT.apply(this,arguments)}function HT(){return HT=(0,we.Z)(function*(n,e,t,r){const o=Je(n);if(o.dc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield HS(o.localStore,$w(u[0])),g=Zg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,yr.EMPTY_BYTE_STRING);yield Ul(o,d,g);break}case"rejected":yield nm(o.localStore,e,!0),lm(o,e,r);break;default:st()}}),HT.apply(this,arguments)}function zR(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,we.Z)(function*(n,e,t){const r=qT(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield $S(r.localStore,o),d=yield tm(r.localStore,u);yield DT(r,fx(u),d.targetId,!1,d.resumeToken),TI(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield nm(r.localStore,o,!1).then(()=>{m_(r.remoteStore,o),lm(r,o)}).catch(ka))}}),GT.apply(this,arguments)}function qT(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OR.bind(null,e),e.sc.Wo=DR.bind(null,e.eventManager),e.sc.wc=bR.bind(null,e.eventManager),e}function zT(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kR.bind(null,e),e}class px{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.It=p_(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return VS(this.persistence,new LS,e.initialUser,this.It)}yc(e){return new kS(EI.Bs,this.It)}gc(e){return new WS}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gx extends px{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield zT(r.Ac.syncEngine),yield im(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return VS(this.persistence,new LS,e.initialUser,this.It)}Tc(e,t){return new FM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new hd(t,this.persistence);return new Mi(e.asyncQueue,r)}yc(e){const t=BC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new UC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KS(),CI(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new WS}}class ZR extends gx{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof KC&&(r.sharedClientState.syncEngine={Fr:$R.bind(null,o),$r:qR.bind(null,o),Br:zR.bind(null,o),vi:GR.bind(null,o),Mr:jR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,we.Z)(function*(d){yield function HR(n,e){return jT.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=KS();if(!KC.C(t))throw new Ne(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class WT{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>cx(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=VR.bind(null,r.syncEngine),yield fT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new IR}createDatastore(e){const t=p_(e.databaseInfo.databaseId),r=new sR(e.databaseInfo);return new uR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>cx(this.syncEngine,g,0),d=ZS.C()?new ZS:new nR,new dR(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,_,b){const A=new xR(r,o,u,d,g,_);return b&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=Je(t);Fe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield rm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ZT(n,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mx(n,e,t,r){if(!0===e&&!0===r)throw new Ne(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yx(n){if(!Ke.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vx(n){if(Ke.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SI(n);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _x(n,e){if(e<=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Ex=new Map;class wx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class y_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new eC;switch(t.type){case"gapi":return new rC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ex.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),Ex.delete(e),t.terminate())}(this),Promise.resolve()}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Ru extends Gi{constructor(e,t,r){super(e,t,wf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new Ke(e))}withConverter(e){return new Ru(this.firestore,e,this._path)}}function Dx(n,e,...t){if(n=(0,Ht.m9)(n),ZT("collection","path",e),n instanceof y_){const r=sn.fromString(e,...t);return vx(r),new Ru(n,null,r)}{if(!(n instanceof Zn||n instanceof Ru))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return vx(r),new Ru(n.firestore,null,r)}}function xI(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=ud.R()),ZT("doc","path",e),n instanceof y_){const r=sn.fromString(e,...t);return yx(r),new Zn(n,null,new Ke(r))}{if(!(n instanceof Zn||n instanceof Ru))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return yx(r),new Zn(n.firestore,n instanceof Ru?n.converter:null,new Ke(r))}}function bx(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof Zn||n instanceof Ru)&&(e instanceof Zn||e instanceof Ru)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function KT(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&Df(n._query,e._query)&&n.converter===e.converter}function Cx(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class YR{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Or,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new CR(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,we.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class XR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,we.Z)(function*(u,d){const g=Je(u),_=Yg(g.It)+"/documents",b={documents:d.map(K=>Fl(g.It,K))},A=yield g._o("BatchGetDocuments",_,b,d.length),N=new Map;A.forEach(K=>{const ce=function aS(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=Ko(t,r.found.name),u=vr(r.found.updateTime),d=new pi({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=Ko(t,r.missing),u=vr(r.readTime);return Ln.newNoDocument(o,u)}(n,e):st()}(g.It,K);N.set(ce.key.toString(),ce)});const z=[];return d.forEach(K=>{const ce=N.get(K.toString());Dt(!!ce),z.push(ce)}),z}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ke.fromPath(o);e.mutations.push(new Hv(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(o,u){const d=Je(o),g=Yg(d.It)+"/documents",_={writes:u.map(b=>Qg(d.It,b))};yield d.ao("Commit",g,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?Hn.exists(!1):Hn.updateTime(t):Hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Ne(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(t)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class eN{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new YC(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,we.Z)(function*(){const t=new XR(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Sl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!_C(t)}return!1}}class tN{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Gr.UNAUTHENTICATED,this.clientId=ud.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,we.Z)(function*(g){Fe("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=om(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Tx(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,we.Z)(function*(u){r.isEqual(u)||(yield US(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),YT.apply(this,arguments)}function Ax(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JT(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>nx(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>nx(e.remoteStore,u)),n.onlineComponents=e}),QT.apply(this,arguments)}function JT(n){return XT.apply(this,arguments)}function XT(){return XT=(0,we.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Tx(n,new px)),n.offlineComponents}),XT.apply(this,arguments)}function RI(n){return eA.apply(this,arguments)}function eA(){return eA=(0,we.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Ax(n,new WT)),n.onlineComponents}),eA.apply(this,arguments)}function Sx(n){return JT(n).then(e=>e.persistence)}function NI(n){return JT(n).then(e=>e.localStore)}function tA(n){return RI(n).then(e=>e.remoteStore)}function nA(n){return RI(n).then(e=>e.syncEngine)}function cm(n){return rA.apply(this,arguments)}function rA(){return rA=(0,we.Z)(function*(n){const e=yield RI(n),t=e.eventManager;return t.onListen=MR.bind(null,e.syncEngine),t.onUnlisten=RR.bind(null,e.syncEngine),t}),rA.apply(this,arguments)}function Mx(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,d,g,_){const b=new MI({next:N=>{u.enqueueAndForget(()=>vT(o,A));const z=N.docs.has(d);!z&&N.fromCache?_.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&N.fromCache&&g&&"server"===g.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),A=new wT(wf(d.path),b,{includeMetadataChanges:!0,Nu:!0});return mT(o,A)}(yield cm(n),n.asyncQueue,e,t,r)})),r.promise}function Rx(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(o,u,d,g,_){const b=new MI({next:N=>{u.enqueueAndForget(()=>vT(o,A)),N.fromCache&&"server"===g.source?_.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),A=new wT(d,b,{includeMetadataChanges:!0,Nu:!0});return mT(o,A)}(yield cm(n),n.asyncQueue,e,t,r)})),r.promise}class lN{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new YC(this,"async_queue_retry"),this.Wc=()=>{const t=CI();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=CI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=CI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Or;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Fa(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=gT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&st()}verifyOperationInProgress(){}Xc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function iA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class cN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends y_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new lN,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nx(this),this._firestoreClient.terminate()}}function kr(n){return n._firestoreClient||Nx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Nx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kw(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new tN(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Ox(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Tx(n,t),yield Ax(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===de.FAILED_PRECONDITION||d.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;ho("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function Px(n){if(n._initialized||n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nu(yr.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nu(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lf{constructor(e){this._methodName=e}}class OI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const EN=/^__.*__$/;class wN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms):new bd(e,this.data,t,this.fieldTransforms)}}class kx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ua(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Fx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class PI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new PI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return LI(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Fx(this.sa)&&EN.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class IN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||p_(e)}da(e,t,r,o=!1){return new PI({sa:e,methodName:t,fa:r,path:Wn.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Vf(n){const e=n._freezeSettings(),t=p_(n._databaseId);return new IN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kI(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);uA("Data must be an object, but it was:",d,r);const g=Ux(r,d);let _,b;if(u.merge)_=new Ri(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const z=lA(e,N,t);if(!d.contains(z))throw new Ne(de.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);jx(A,z)||A.push(z)}_=new Ri(A),b=d.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,b=d.fieldTransforms;return new wN(new pi(g),_,b)}class v_ extends Lf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof v_}}function Lx(n,e,t){return new PI({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class sA extends Lf{_toFieldTransform(e){return new Nl(e.path,new bf)}isEqual(e){return e instanceof sA}}class DN extends Lf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Lx(this,e,!0),r=this._a.map(u=>Uf(u,t)),o=new Ml(r);return new Nl(e.path,o)}isEqual(e){return this===e}}class bN extends Lf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Lx(this,e,!0),r=this._a.map(u=>Uf(u,t)),o=new Rl(r);return new Nl(e.path,o)}isEqual(e){return this===e}}class CN extends Lf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Id(e.It,zg(e.It,this.wa));return new Nl(e.path,t)}isEqual(e){return this===e}}function oA(n,e,t,r){const o=n.da(1,e,t);uA("Data must be an object, but it was:",o,r);const u=[],d=pi.empty();fd(r,(_,b)=>{const A=FI(e,_,t);b=(0,Ht.m9)(b);const N=o.ca(A);if(b instanceof v_)u.push(A);else{const z=Uf(b,N);null!=z&&(u.push(A),d.set(A,z))}});const g=new Ri(u);return new kx(d,g,o.fieldTransforms)}function aA(n,e,t,r,o,u){const d=n.da(1,e,t),g=[lA(e,r,t)],_=[o];if(u.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)g.push(lA(e,u[z])),_.push(u[z+1]);const b=[],A=pi.empty();for(let z=g.length-1;z>=0;--z)if(!jx(b,g[z])){const K=g[z];let ce=_[z];ce=(0,Ht.m9)(ce);const Le=d.ca(K);if(ce instanceof v_)b.push(K);else{const $e=Uf(ce,Le);null!=$e&&(b.push(K),A.set(K,$e))}}const N=new Ri(b);return new kx(A,N,d.fieldTransforms)}function Vx(n,e,t,r=!1){return Uf(t,n.da(r?4:3,e))}function Uf(n,e){if(Bx(n=(0,Ht.m9)(n)))return uA("Unsupported field value:",e,n),Ux(n,e);if(n instanceof Lf)return function(t,r){if(!Fx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=Uf(d,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zg(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=An.fromDate(t);return{timestampValue:Sf(r.It,o)}}if(t instanceof An){const o=new An(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sf(r.It,o)}}if(t instanceof OI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nu)return{bytesValue:oI(r.It,t._byteString)};if(t instanceof Zn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${SI(t)}`)}(n,e)}function Ux(n,e){const t={};return pd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fd(n,(r,o)=>{const u=Uf(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Bx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof An||n instanceof OI||n instanceof Nu||n instanceof Zn||n instanceof Lf)}function uA(n,e,t){if(!Bx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=SI(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function lA(n,e,t){if((e=(0,Ht.m9)(e))instanceof Bl)return e._internalPath;if("string"==typeof e)return FI(n,e);throw LI("Field path arguments must be of type string or ",n,!1,void 0,t)}const TN=new RegExp("[~\\*/\\[\\]]");function FI(n,e,t){if(e.search(TN)>=0)throw LI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bl(...e.split("."))._internalPath}catch(r){throw LI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function LI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||d)&&(_+=" (found",u&&(_+=` in field ${r}`),d&&(_+=` in document ${o}`),_+=")"),new Ne(de.INVALID_ARGUMENT,g+n+_)}function jx(n,e){return n.some(t=>t.isEqual(e))}class __{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new AN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class AN extends __{data(){return super.data()}}function VI(n,e){return"string"==typeof e?FI(n,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}function $x(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E_{}function Md(n,...e){for(const t of e)n=t._apply(n);return n}class SN extends E_{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Vf(e.firestore),r=function(o,u,d,g,_,b,A){let N;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Zx(A,b);const K=[];for(const ce of A)K.push(Wx(g,o,ce));N={arrayValue:{values:K}}}else N=Wx(g,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Zx(A,b),N=Vx(d,"where",A,"in"===b||"not-in"===b);const z=gi.create(_,b,N);return function(K,ce){if(ce.dt()){const $e=Vv(K);if(null!==$e&&!$e.isEqual(ce.field))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${$e.toString()}' and '${ce.field.toString()}'`);const Pt=If(K);null!==Pt&&Kx(0,ce.field,Pt)}const Le=function($e,Pt){for(const Bt of $e.filters)if(Pt.indexOf(Bt.op)>=0)return Bt.op;return null}(K,function($e){switch($e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ce.op));if(null!==Le)throw new Ne(de.INVALID_ARGUMENT,Le===ce.op?`Invalid query. You cannot use more than one '${ce.op.toString()}' filter.`:`Invalid query. You cannot use '${ce.op.toString()}' filters with '${Le.toString()}' filters.`)}(o,z),z}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Gi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Va(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class MN extends E_{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Ef(o,u);return function(g,_){if(null===If(g)){const b=Vv(g);null!==b&&Kx(0,b,_.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Gi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Va(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Hx extends E_{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Gi(e.firestore,e.converter,$g(e._query,this.Ia,this.Ta))}}class Gx extends E_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=zx(e,this.type,this.Ea,this.Aa);return new Gi(e.firestore,e.converter,(o=t,new Va((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class qx extends E_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=zx(e,this.type,this.Ea,this.Aa);return new Gi(e.firestore,e.converter,(o=t,new Va((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function zx(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof __)return function(o,u,d,g,_){if(!g)throw new Ne(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const A of wd(o))if(A.field.isKeyField())b.push(xu(u,g.key));else{const N=g.data.field(A.field);if(Tv(N))throw new Ne(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const z=A.field.canonicalString();throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}b.push(N)}return new Mu(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Vf(n.firestore);return function(u,d,g,_,b,A){const N=u.explicitOrderBy;if(b.length>N.length)throw new Ne(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let K=0;K<b.length;K++){const ce=b[K];if(N[K].field.isKeyField()){if("string"!=typeof ce)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ce}`);if(!ps(u)&&-1!==ce.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ce}' contains a slash.`);const Le=u.path.child(sn.fromString(ce));if(!Ke.isDocumentKey(Le))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Le}' is not because it contains an odd number of segments.`);const $e=new Ke(Le);z.push(xu(d,$e))}else{const Le=Vx(g,_,ce);z.push(Le)}}return new Mu(z,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Wx(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ps(e)&&-1!==t.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ke.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xu(n,new Ke(r))}if(t instanceof Zn)return xu(n,t._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SI(t)}.`)}function Zx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Kx(n,e,t){if(!t.isEqual(e))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class cA{convertValue(e,t="none"){switch(Su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return fd(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new OI(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Av(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}convertTimestamp(e){const t=Wo(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);Dt(I(r));const o=new Tu(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return o.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function UI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VN extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class Bf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jl extends __{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new w_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class w_ extends jl{data(e={}){return super.data(e)}}class Rd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new w_(this._firestore,this._userDataWriter,r.key,r,new Bf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new w_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Bf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new w_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Bf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==d.type&&(_=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:UN(d.type),doc:g,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function Yx(n,e){return n instanceof jl&&e instanceof jl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Rd&&e instanceof Rd&&n._firestore===e._firestore&&KT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Nd extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function Qx(n,e,t){n=on(n,Zn);const r=on(n.firestore,Kn),o=UI(n.converter,e,t);return dm(r,[kI(Vf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Hn.none())])}function Jx(n,e,t,...r){n=on(n,Zn);const o=on(n.firestore,Kn),u=Vf(o);let d;return d="string"==typeof(e=(0,Ht.m9)(e))||e instanceof Bl?aA(u,"updateDoc",n._key,e,t,r):oA(u,"updateDoc",n._key,e),dm(o,[d.toMutation(n._key,Hn.exists(!0))])}function Xx(n,...e){var t,r,o;n=(0,Ht.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||iA(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(iA(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let _,b,A;if(n instanceof Zn)b=on(n.firestore,Kn),A=wf(n._key.path),_={next:N=>{e[d]&&e[d](dA(b,n,N))},error:e[d+1],complete:e[d+2]};else{const N=on(n,Gi);b=on(N.firestore,Kn),A=N._query;const z=new Nd(b);_={next:K=>{e[d]&&e[d](new Rd(b,z,N,K))},error:e[d+1],complete:e[d+2]},$x(n._query)}return function(N,z,K,ce){const Le=new MI(ce),$e=new wT(z,Le,K);return N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return mT(yield cm(N),$e)})),()=>{Le.bc(),N.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return vT(yield cm(N),$e)}))}}(kr(b),A,g,_)}function dm(n,e){return function(t,r){const o=new Or;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function NR(n,e,t){return TT.apply(this,arguments)}(yield nA(t),r,o)})),o.promise}(kr(n),e)}function dA(n,e,t){const r=t.docs.get(e._key),o=new Nd(n);return new jl(n,o,e._key,r,new Bf(t.hasPendingWrites,t.fromCache),e.converter)}const KN={maxAttempts:5};class eM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vf(e)}set(e,t,r){this._verifyNotCommitted();const o=Od(e,this._firestore),u=UI(o.converter,t,r),d=kI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Hn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Od(e,this._firestore);let d;return d="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Bl?aA(this._dataReader,"WriteBatch.update",u._key,t,r,o):oA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Od(e,this._firestore);return this._mutations=this._mutations.concat(new Cd(t._key,Hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Od(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new Ne(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class YN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vf(e)}get(e){const t=Od(e,this._firestore),r=new VN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const u=o[0];if(u.isFoundDocument())return new __(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new __(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=Od(e,this._firestore),u=UI(o.converter,t,r),d=kI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Od(e,this._firestore);let d;return d="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Bl?aA(this._dataReader,"Transaction.update",u._key,t,r,o):oA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Od(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Od(e,this._firestore),r=new Nd(this._firestore);return super.get(e).then(o=>new jl(this._firestore,r,t._key,o._document,new Bf(!1,!1),t.converter))}}function hA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function nM(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function rM(){if(!function Pw(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ad=Aa.SDK_VERSION,(0,Aa._registerComponent)(new bh.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Kn(new nC(t.getProvider("auth-internal")),new zo(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(g.options.projectId,_)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Aa.registerVersion)(Dw,"3.7.3",n),(0,Aa.registerVersion)(Dw,"3.7.3","esm2017")}();class I_{constructor(e){this._delegate=e}static fromBase64String(e){return rM(),new I_(Nu.fromBase64String(e))}static fromUint8Array(e){return nM(),new I_(Nu.fromUint8Array(e))}toBase64(){return rM(),this._delegate.toBase64()}toUint8Array(){return nM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fA(n){return function sO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oO{enableIndexedDbPersistence(e,t){return function hN(n,e){Px(n=on(n,Kn));const t=kr(n),r=n._freezeSettings(),o=new WT;return Ox(t,o,new gx(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fN(n){Px(n=on(n,Kn));const e=kr(n),t=n._freezeSettings(),r=new WT;return Ox(e,r,new ZR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function pN(n){if(n._initialized&&!n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Bs.C())return Promise.resolve();const o=r+"main";yield Bs.delete(o)}),function(r){return t.apply(this,arguments)})(BC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class iM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ho("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Ix(n,e,t,r={}){var o;const u=(n=on(n,y_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ho("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=Gr.MOCK_USER;else{d=(0,Ht.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Gr(_)}n._authCredentials=new tC(new Cw(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function mN(n){return function nN(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Sx(n),t=yield tA(n);return e.setNetworkEnabled(!0),function(r){const o=Je(r);return o._u.delete(0),g_(o)}(t)}))}(kr(n=on(n,Kn)))}(this._delegate)}disableNetwork(){return function yN(n){return function rN(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield Sx(n),t=yield tA(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(o){const u=Je(o);u._u.add(0),yield rm(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(kr(n=on(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gN(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function FR(n,e){return RT.apply(this,arguments)}(yield nA(e),t)})),t.promise}(kr(n=on(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function ZN(n,e){return function oN(n,e){const t=new MI(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield cm(n),o=t,Je(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield cm(n),o=t,void Je(r).Ru.delete(o);var r,o}))}}(kr(n=on(n,Kn)),iA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hm(this,Dx(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new Yo(this,xI(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function KR(n,e){if(n=on(n,y_),ZT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new Va(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function QN(n,e,t){n=on(n,Kn);const r=Object.assign(Object.assign({},KN),t);return function(o){if(o.maxAttempts<1)throw new Ne(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const g=new Or;return o.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const _=yield function xx(n){return RI(n).then(e=>e.datastore)}(o);new eN(o.asyncQueue,_,d,u,g).run()})),g.promise}(kr(n),o=>e(new YN(n,o)),r)}(this._delegate,t=>e(new sM(this,t)))}batch(){return kr(this._delegate),new oM(new eM(this._delegate,e=>dm(this._delegate,e)))}loadBundle(e){return function vN(n,e){const t=kr(n=on(n,Kn)),r=new cN;return function aN(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return Cx(_,b);if(_ instanceof ArrayBuffer)return Cx(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new YR(_,d);var _}(t,p_(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function WR(n,e,t){const r=Je(n);var o;(o=(0,we.Z)(function*(u,d,g){try{const _=yield d.getMetadata();if(yield function(z,K){const ce=Je(z),Le=vr(K.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",$e=>ce.Ns.getBundleMetadata($e,K.id)).then($e=>!!$e&&$e.createTime.compareTo(Le)>=0)}(u.localStore,_))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(z=_).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);g._updateProgress(sx(_));const b=new TR(_,u.localStore,d.It);let A=yield d.mc();for(;A;){const z=yield b.Fu(A);z&&g._updateProgress(z),A=yield d.mc()}const N=yield b.complete();return yield Ul(u,N.Lu,void 0),yield function(z,K){const ce=Je(z);return ce.persistence.runTransaction("Save bundle","readwrite",Le=>ce.Ns.saveBundleMetadata(Le,K))}(u.localStore,_),g._completeWith(N.progress),Promise.resolve(N.Bu)}catch(_){return ho("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var z}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield nA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _N(n,e){return function uN(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const o=Je(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield NI(n),e)}))}(kr(n=on(n,Kn)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class BI extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new I_(new Nu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Yo.forKey(t,this.firestore,null)}}class sM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}get(e){const t=$f(e);return this._delegate.get(t).then(r=>new D_(this._firestore,new jl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=$f(e);return r?(hA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=$f(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=$f(e);return this._delegate.delete(t),this}}class oM{constructor(e){this._delegate=e}set(e,t,r){const o=$f(e);return r?(hA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=$f(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=$f(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new w_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new b_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new jf(e,new BI(e),t),o.set(t,u)),u}}jf.INSTANCES=new WeakMap;class Yo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Yo(t,new Zn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Yo(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hm(this.firestore,Dx(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Zn&&bx(this._delegate,e)}set(e,t){t=hA("DocumentReference.set",t);try{return t?Qx(this._delegate,e,t):Qx(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Jx(this._delegate,e):Jx(this._delegate,e,t,...r)}catch(o){throw ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function zN(n){return dm(on(n.firestore,Kn),[new Cd(n._key,Hn.none())])}(this._delegate)}onSnapshot(...e){const t=aM(e),r=uM(e,o=>new D_(this.firestore,new jl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Xx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jN(n){n=on(n,Zn);const e=on(n.firestore,Kn),t=kr(e),r=new Nd(e);return function iN(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,d){try{const g=yield function(_,b){const A=Je(_);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,b))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Ne(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=om(g,`Failed to get document '${u} from cache`);d.reject(_)}}),function(o,u,d){return r.apply(this,arguments)})(yield NI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new jl(e,r,n._key,o,new Bf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function $N(n){n=on(n,Zn);const e=on(n.firestore,Kn);return Mx(kr(e),n._key,{source:"server"}).then(t=>dA(e,n,t))}(this._delegate):function BN(n){n=on(n,Zn);const e=on(n.firestore,Kn);return Mx(kr(e),n._key).then(t=>dA(e,n,t))}(this._delegate),t.then(r=>new D_(this.firestore,new jl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Yo(this.firestore,this._delegate.withConverter(e?jf.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function aM(n){for(const e of n)if("object"==typeof e&&!fA(e))return e;return{}}function uM(n,e){var t,r;let o;return o=fA(n[0])?n[0]:fA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class D_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yx(this._delegate,e._delegate)}}class b_ extends D_{data(e){const t=this._delegate.data(e);return function bw(n,e){n||st()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}where(e,t,r){try{return new ys(this.firestore,Md(this._delegate,function xN(n,e,t){const r=e,o=VI("where",n);return new SN(o,r,t)}(e,t,r)))}catch(o){throw ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,Md(this._delegate,function RN(n,e="asc"){const t=e,r=VI("orderBy",n);return new MN(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,Md(this._delegate,function NN(n){return _x("limit",n),new Hx("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,Md(this._delegate,function ON(n){return _x("limitToLast",n),new Hx("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,Md(this._delegate,function PN(...n){return new Gx("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,Md(this._delegate,function kN(...n){return new Gx("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,Md(this._delegate,function FN(...n){return new qx("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,Md(this._delegate,function LN(...n){return new qx("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return KT(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function GN(n){n=on(n,Gi);const e=on(n.firestore,Kn),t=kr(e),r=new Nd(e);return function sN(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(o,u,d){try{const g=yield II(o,u,!0),_=new ux(u,g.Hi),b=_.Wu(g.documents),A=_.applyChanges(b,!1);d.resolve(A.snapshot)}catch(g){const _=om(g,`Failed to execute query '${u} against cache`);d.reject(_)}}),function(o,u,d){return r.apply(this,arguments)})(yield NI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Rd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function qN(n){n=on(n,Gi);const e=on(n.firestore,Kn),t=kr(e),r=new Nd(e);return Rx(t,n._query,{source:"server"}).then(o=>new Rd(e,r,n,o))}(this._delegate):function HN(n){n=on(n,Gi);const e=on(n.firestore,Kn),t=kr(e),r=new Nd(e);return $x(n._query),Rx(t,n._query).then(o=>new Rd(e,r,n,o))}(this._delegate),t.then(r=>new pA(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aM(e),r=uM(e,o=>new pA(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Xx(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?jf.getInstance(this.firestore,e):null))}}class uO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new b_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new b_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new b_(this._firestore,r))})}isEqual(e){return Yx(this._delegate,e._delegate)}}class hm extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yo(this.firestore,e):null}doc(e){try{return new Yo(this.firestore,void 0===e?xI(this._delegate):xI(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function WN(n,e){const t=on(n.firestore,Kn),r=xI(n),o=UI(n.converter,e);return dm(t,[kI(Vf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Yo(this.firestore,t))}isEqual(e){return bx(this._delegate,e._delegate)}withConverter(e){return new hm(this.firestore,this._delegate.withConverter(e?jf.getInstance(this.firestore,e):null))}}function $f(n){return on(n,Zn)}class gA{constructor(...e){this._delegate=new Bl(...e)}static documentId(){return new gA(Wn.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Bl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function XN(){return new sA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hf(e)}static delete(){const e=function JN(){return new v_("deleteField")}();return e._methodName="FieldValue.delete",new Hf(e)}static arrayUnion(...e){const t=function eO(...n){return new DN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hf(t)}static arrayRemove(...e){const t=function tO(...n){return new bN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hf(t)}static increment(e){const t=function nO(n){return new CN("increment",n)}(e);return t._methodName="FieldValue.increment",new Hf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lO={Firestore:iM,GeoPoint:OI,Timestamp:An,Blob:I_,Transaction:sM,WriteBatch:oM,DocumentReference:Yo,DocumentSnapshot:D_,Query:ys,QueryDocumentSnapshot:b_,QuerySnapshot:pA,CollectionReference:hm,FieldPath:gA,FieldValue:Hf,setLogLevel:function aO(n){!function Xb(n){Du.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function lM(n,e){return function hO(n,e=YA.z){return new Qs.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function mA(n,e){return lM(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function jI(n,e){return mA(n,e).pipe(du(void 0),Uy(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const _=o.find(A=>A.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function cM(n,e,t){return jI(n,t).pipe(mp((r,o)=>function pO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return yA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return yA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Tb(n,e=rl.y){return n=null!=n?n:uE,(0,$i.e)((t,r)=>{let o,u=!0;t.subscribe((0,br.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function yA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function dM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function dO(n){(function cO(n,e){n.INTERNAL.registerComponent(new bh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lO)))})(n,(e,t)=>new iM(e,t,new oO)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(xr.Z);class hM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(du(void 0),Uy(),hu(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(mp((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dM(e);return cM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return mA(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ti.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(ti.iC)}add(e){return this.ref.add(e)}doc(e){return new fM(this.ref.doc(e),this.afs)}}class fM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=pM(r,t);return new hM(o,u,this.afs)}snapshotChanges(){return function fO(n,e){return lM(n,e).pipe(du(void 0),Uy(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(ti.iC)}}class mO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),hu(t=>t.length>0),ti.iC):jI(this.query,this.afs.schedulers.outsideAngular).pipe(ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(mp((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=dM(e);return cM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return mA(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ti.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(ti.iC)}}const yO=new p.OlP("angularfire2.enableFirestorePersistence"),vO=new p.OlP("angularfire2.firestore.persistenceSettings"),_O=new p.OlP("angularfire2.firestore.settings"),EO=new p.OlP("angularfire2.firestore.use-emulator");function pM(n,e=(t=>t)){return{query:e(n),ref:n}}let wO=(()=>{class n{constructor(t,r,o,u,d,g,_,b,A,N,z,K,ce,Le,$e,Pt,Bt){this.schedulers=_;const Gt=(0,lo.on)(t,g,r),Vt=A;N&&Vy(Gt,g,z,ce,Le,$e,K,Pt),[this.firestore,this.persistenceEnabled$]=(0,lo.cc)(`${Gt.name}.firestore`,"AngularFirestore",Gt.name,()=>{const kt=g.runOutsideAngular(()=>Gt.firestore());if(u&&kt.settings(u),Vt&&kt.useEmulator(...Vt),o&&!Dr(d)){const Yt=()=>{try{return(0,xn.D)(kt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ai){return"undefined"!=typeof console&&console.warn(ai),Tt(!1)}};return[kt,g.runOutsideAngular(Yt)]}return[kt,Tt(!1)]},[u,Vt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=pM(o,r),g=this.schedulers.ngZone.run(()=>u);return new hM(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new mO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new fM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(lo.Dh),p.LFG(lo.xv,8),p.LFG(yO,8),p.LFG(_O,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ti.HU),p.LFG(vO,8),p.LFG(EO,8),p.LFG(rg,8),p.LFG(oE,8),p.LFG(Py,8),p.LFG(ng,8),p.LFG(ky,8),p.LFG(Fy,8),p.LFG(Ly,8),p.LFG(X0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IO=(()=>{class n{constructor(t){this.afs=t}addStudent(t){return t.id=this.afs.createId(),this.afs.collection("/Students").add(t)}getAllStudents(){return this.afs.collection("/Students").snapshotChanges()}deleteStudent(t){return this.afs.doc("/Students/"+t.id).delete()}updateStudent(t){this.deleteStudent(t),this.addStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wO))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DO(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"tr")(1,"th",28),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td")(12,"button",29),p.NdJ("click",function(){const u=p.CHM(t).$implicit;return p.oxw().deleteStudent(u)}),p._uU(13,"Delete"),p.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;p.xp6(2),p.Oqu(r+1),p.xp6(2),p.Oqu(t.first_name),p.xp6(2),p.Oqu(t.last_name),p.xp6(2),p.Oqu(t.email),p.xp6(2),p.Oqu(t.mobile)}}const bO=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"register",component:(()=>{class n{constructor(t){this.authService=t,this.email="",this.password=""}register(){""!=this.email?""!=this.password?(this.authService.register(this.email,this.password),this.email="",this.password=""):alert("Place enter password"):alert("Place enter email")}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ph))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-register"]],decls:24,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-info",3,"click"],[1,"col-md-12","text-center"],[2,"text-decoration","none"],["routerLink","/login",1,"text-danger"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form")(6,"div",5)(7,"h4",6),p._uU(8,"Register"),p.qZA()(),p.TgZ(9,"div",5)(10,"label",7),p._uU(11,"Email"),p.qZA(),p.TgZ(12,"input",8),p.NdJ("ngModelChange",function(u){return r.email=u}),p.qZA()(),p.TgZ(13,"div",5)(14,"label",9),p._uU(15,"Password"),p.qZA(),p.TgZ(16,"input",10),p.NdJ("ngModelChange",function(u){return r.password=u}),p.qZA()(),p.TgZ(17,"button",11),p.NdJ("click",function(){return r.register()}),p._uU(18,"Register"),p.qZA(),p.TgZ(19,"div",12)(20,"a",13),p._uU(21,"Have an Account ? "),p.TgZ(22,"span",14),p._uU(23,"Login"),p.qZA()()()()()()()()()),2&t&&(p.xp6(12),p.Q6J("ngModel",r.email),p.xp6(4),p.Q6J("ngModel",r.password))},directives:[zn,No,_a,hi,pr,Ea,pu],styles:[""]}),n})()},{path:"login",component:(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.email="",this.password=""}login(){""!=this.email?""!=this.password?(this.authService.login(this.email,this.password),this.email="",this.password=""):alert("Place enter password"):alert("Place enter email")}signInWithGoogle(){this.authService.googleSignIn()}removeToken(){localStorage.removeItem("token")}ngOnInit(){this.removeToken()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ph),p.Y36(fi))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:34,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-info",3,"click"],[1,"d-flex","justify-content-between"],[1,"col-md-6"],[2,"text-decoration","none"],["routerLink","/register",1,"text-danger"],["routerLink","/forgot-password",1,"text-dark",2,"text-decoration","none"],[1,"row","mt-2"],[2,"text-decoration","none",3,"click"],[1,"card","shadow","text-center"],["src","https://www.freepnglogos.com/uploads/google-logo-png/google-logo-png-webinar-optimizing-for-success-google-business-webinar-13.png","height","24px","width","24px","alt","logo",1,"h-100"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form")(6,"div",5)(7,"h4",6),p._uU(8,"Login"),p.qZA()(),p.TgZ(9,"div",5)(10,"label",7),p._uU(11,"Email"),p.qZA(),p.TgZ(12,"input",8),p.NdJ("ngModelChange",function(u){return r.email=u}),p.qZA()(),p.TgZ(13,"div",5)(14,"label",9),p._uU(15,"Password"),p.qZA(),p.TgZ(16,"input",10),p.NdJ("ngModelChange",function(u){return r.password=u}),p.qZA()(),p.TgZ(17,"button",11),p.NdJ("click",function(){return r.login()}),p._uU(18," Login "),p.qZA(),p.TgZ(19,"div",12)(20,"div",13)(21,"a",14),p._uU(22,"Need Account? "),p.TgZ(23,"span",15),p._uU(24,"Register"),p.qZA()()(),p.TgZ(25,"div",13)(26,"a",16),p._uU(27,"Forgot password"),p.qZA()()(),p.TgZ(28,"div",17)(29,"a",18),p.NdJ("click",function(){return r.signInWithGoogle()}),p.TgZ(30,"div",19)(31,"div",4),p._UZ(32,"img",20),p._uU(33," Sign In with Google "),p.qZA()()()()()()()()()()),2&t&&(p.xp6(12),p.Q6J("ngModel",r.email),p.xp6(4),p.Q6J("ngModel",r.password))},directives:[zn,No,_a,hi,pr,Ea,pu,Dh],styles:[""]}),n})()},{path:"forgot-password",component:aE},{path:"varify-email",component:HD},{path:"dashboard",component:(()=>{class n{constructor(t,r,o){this.authService=t,this.router=r,this.data=o,this.studentList=[],this.studentObj={id:"",first_name:"",last_name:"",email:"",mobile:""},this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}register(){this.authService.logOut()}getAllStudents(){this.data.getAllStudents().subscribe({next:t=>{console.log(t),this.studentList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},error:t=>{console.log(t)}})}resetForm(){this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}addStudent(){(""==this.first_name||""==this.last_name||""==this.email||""==this.mobile)&&alert("Fill all input fields"),this.studentObj.id="",this.studentObj.first_name=this.first_name,this.studentObj.last_name=this.last_name,this.studentObj.email=this.email,this.studentObj.mobile=this.mobile,this.data.addStudent(this.studentObj),this.resetForm()}updateStudent(){}deleteStudent(t){confirm("Are you sure you want to delete "+t.first_name+" "+t.last_name+"?")&&this.data.deleteStudent(t)}checkToken(){localStorage.getItem("token")||this.router.navigate(["/login"])}ngOnInit(){this.checkToken(),this.getAllStudents()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ph),p.Y36(fi),p.Y36(IO))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-dashboard"]],decls:55,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"card","shadow"],[1,"card-body","d-flex","justify-content-between"],[1,"m-0"],[1,"text-dark","text-muted","m-0","p-0"],["type","submit",1,"btn","btn-info",3,"click"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3"],[1,"text-center","text-warning"],["type","text","id","firstName","name","firstname","placeholder","first name",1,"form-control",3,"ngModel","ngModelChange"],["for","firstName"],["type","text","id","lastName","name","lastname","placeholder","last name",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName"],["type","text","id","email","name","email","placeholder","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","mobile","name","mobile","placeholder","mobile",1,"form-control",3,"ngModel","ngModelChange"],["for","mobile"],[1,"btn","btn-outline-success",3,"click"],[1,"col-md-8","mt-2"],[1,"text-danger"],[1,"card","p-3","shadow"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),p._uU(7,"Welcome"),p.qZA()(),p.TgZ(8,"button",7),p.NdJ("click",function(){return r.register()}),p._uU(9,"LogOut"),p.qZA()()()(),p.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"h4",11),p._uU(14,"Add Student"),p.qZA()(),p.TgZ(15,"div",10)(16,"input",12),p.NdJ("ngModelChange",function(u){return r.first_name=u}),p.qZA(),p.TgZ(17,"label",13),p._uU(18,"First Name"),p.qZA()(),p.TgZ(19,"div",10)(20,"input",14),p.NdJ("ngModelChange",function(u){return r.last_name=u}),p.qZA(),p.TgZ(21,"label",15),p._uU(22,"Last Name"),p.qZA()(),p.TgZ(23,"div",10)(24,"input",16),p.NdJ("ngModelChange",function(u){return r.email=u}),p.qZA(),p.TgZ(25,"label",17),p._uU(26,"Email"),p.qZA()(),p.TgZ(27,"div",10)(28,"input",18),p.NdJ("ngModelChange",function(u){return r.mobile=u}),p.qZA(),p.TgZ(29,"label",19),p._uU(30,"Mobile"),p.qZA()(),p.TgZ(31,"button",20),p.NdJ("click",function(){return r.addStudent()}),p._uU(32,"Add Student"),p.qZA()()(),p.TgZ(33,"div",21)(34,"h5",22),p._uU(35,"Student List"),p.qZA(),p.TgZ(36,"div",23)(37,"div",24)(38,"table",25)(39,"thead")(40,"tr")(41,"th",26),p._uU(42,"#"),p.qZA(),p.TgZ(43,"th",26),p._uU(44,"First Name"),p.qZA(),p.TgZ(45,"th",26),p._uU(46,"Last Name"),p.qZA(),p.TgZ(47,"th",26),p._uU(48,"Email"),p.qZA(),p.TgZ(49,"th",26),p._uU(50,"Mobile"),p.qZA(),p.TgZ(51,"th",26),p._uU(52,"Action"),p.qZA()()(),p.TgZ(53,"tbody"),p.YNc(54,DO,14,5,"tr",27),p.qZA()()()()()()()),2&t&&(p.xp6(16),p.Q6J("ngModel",r.first_name),p.xp6(4),p.Q6J("ngModel",r.last_name),p.xp6(4),p.Q6J("ngModel",r.email),p.xp6(4),p.Q6J("ngModel",r.mobile),p.xp6(26),p.Q6J("ngForOf",r.studentList))},directives:[hi,pr,Ea,jn],styles:[""]}),n})()}];let CO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[gy.forRoot(bO)],gy]}),n})(),TO=(()=>{class n{constructor(){this.title="login-fireBase"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[ph],styles:[""]}),n})();const gM_firebase={projectId:"login-fire-820c0",appId:"1:437486071860:web:f94efd58cdb48a7ab8da61",storageBucket:"login-fire-820c0.appspot.com",apiKey:"AIzaSyAN7wgxedOkXUT7ZRyfg7enyFj3M-hBqgI",authDomain:"login-fire-820c0.firebaseapp.com",messagingSenderId:"437486071860"};let AO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[TO]}),n.\u0275inj=p.cJS({providers:[],imports:[[Lu,CO,Mm,lo.hO.initializeApp(gM_firebase)]]}),n})();(0,p.G48)(),ic().bootstrapModule(AO).catch(n=>console.error(n))},5867:(rt,Ie,k)=>{k.d(Ie,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=k(9681);(0,p.registerVersion)("firebase","9.14.0","app")},127:(rt,Ie,k)=>{k.d(Ie,{Z:()=>p.Z});var p=k(3942);p.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(rt,Ie,k)=>{k.r(Ie);var p=k(5861),j=k(3942),O=k(8247),ie=k(2090),fe=(k(9681),k(1877),k(4859));function oe(){return window}function H(){return(H=(0,p.Z)(function*(U,R,L){var se;const{BuildInfo:Oe}=oe();(0,O.ap)(R.sessionId,"AuthEvent did not contain a session ID");const Xe=yield De(R.sessionId),at={};return(0,O.aq)()?at.ibi=Oe.packageName:(0,O.ar)()?at.apn=Oe.packageName:(0,O.as)(U,"operation-not-supported-in-this-environment"),Oe.displayName&&(at.appDisplayName=Oe.displayName),at.sessionId=Xe,(0,O.at)(U,L,R.type,void 0,null!==(se=R.eventId)&&void 0!==se?se:void 0,at)})).apply(this,arguments)}function Ue(){return(Ue=(0,p.Z)(function*(U){const{BuildInfo:R}=oe(),L={};(0,O.aq)()?L.iosBundleId=R.packageName:(0,O.ar)()?L.androidPackageName=R.packageName:(0,O.as)(U,"operation-not-supported-in-this-environment"),yield(0,O.au)(U,L)})).apply(this,arguments)}function je(){return(je=(0,p.Z)(function*(U,R,L){const{cordova:se}=oe();let Oe=()=>{};try{yield new Promise((Xe,at)=>{let Ct=null;function nt(){var Nt;Xe();const wr=null===(Nt=se.plugins.browsertab)||void 0===Nt?void 0:Nt.close;"function"==typeof wr&&wr(),"function"==typeof(null==L?void 0:L.close)&&L.close()}function nn(){Ct||(Ct=window.setTimeout(()=>{at((0,O.aw)(U,"redirect-cancelled-by-user"))},2e3))}function Qn(){"visible"===(null==document?void 0:document.visibilityState)&&nn()}R.addPassiveListener(nt),document.addEventListener("resume",nn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",Qn,!1),Oe=()=>{R.removePassiveListener(nt),document.removeEventListener("resume",nn,!1),document.removeEventListener("visibilitychange",Qn,!1),Ct&&window.clearTimeout(Ct)}})}finally{Oe()}})).apply(this,arguments)}function De(U){return qe.apply(this,arguments)}function qe(){return(qe=(0,p.Z)(function*(U){const R=He(U),L=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(L)).map(Oe=>Oe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function He(U){if((0,O.ap)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(U);const R=new ArrayBuffer(U.length),L=new Uint8Array(R);for(let se=0;se<U.length;se++)L[se]=U.charCodeAt(se);return L}class Ce extends O.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(R)),super.onEvent(R)}initialized(){var R=this;return(0,p.Z)(function*(){yield R.initPromise})()}}function ee(U){return he.apply(this,arguments)}function he(){return(he=(0,p.Z)(function*(U){const R=yield X()._get(ne(U));return R&&(yield X()._remove(ne(U))),R})).apply(this,arguments)}function Z(){const U=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const se=Math.floor(Math.random()*R.length);U.push(R.charAt(se))}return U.join("")}function X(){return(0,O.az)(O.b)}function ne(U){return(0,O.aA)("authEvent",U.config.apiKey,U.name)}function ke(U){if(!(null==U?void 0:U.includes("?")))return{};const[R,...L]=U.split("?");return(0,ie.zd)(L.join("?"))}function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Ut(){var U;return(null===(U=null==self?void 0:self.location)||void 0===U?void 0:U.protocol)||null}function bn(U=(0,ie.z$)()){return!("file:"!==Ut()&&"ionic:"!==Ut()&&"capacitor:"!==Ut()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function _i(){try{const U=self.localStorage,R=O.aI();if(U)return U.setItem(R,"1"),U.removeItem(R),!function qi(U=(0,ie.z$)()){return function qr(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Sn(U=(0,ie.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,ie.hl)()}catch(U){return ui()&&(0,ie.hl)()}return!1}function ui(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function Zt(){return"http:"===Ut()||"https:"===Ut()}()||(0,ie.ru)()||bn())&&!function Fr(){return(0,ie.b$)()||(0,ie.UG)()}()&&_i()&&!ui()}function Ni(){return bn()&&"undefined"!=typeof document}function dr(){return(dr=(0,p.Z)(function*(){return!!Ni()&&new Promise(U=>{const R=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),U(!0)})})})).apply(this,arguments)}const ln={LOCAL:"local",NONE:"none",SESSION:"session"},hr=O.ax,_r="persistence";function In(U){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(U){yield U._initializationPromise;const R=qt(),L=O.aA(_r,U.config.apiKey,U.name);R&&R.setItem(L,U._getPersistence())})).apply(this,arguments)}function qt(){var U;try{return(null===(U=function gn(){return"undefined"!=typeof window?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch(R){return null}}const lt=O.ax;class tt{constructor(){this.browserResolver=O.az(O.k),this.cordovaResolver=O.az(class Jt{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var L=this;return(0,p.Z)(function*(){const se=R._key();let Oe=L.eventManagers.get(se);return Oe||(Oe=new Ce(R),L.eventManagers.set(se,Oe),L.attachCallbackListeners(R,Oe)),Oe})()}_openPopup(R){(0,O.as)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,L,se,Oe){var Xe=this;return(0,p.Z)(function*(){!function pe(U){var R,L,se,Oe,Xe,at,Ct,nt,nn,Qn;const Nt=oe();(0,O.ax)("function"==typeof(null===(R=null==Nt?void 0:Nt.universalLinks)||void 0===R?void 0:R.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(L=null==Nt?void 0:Nt.BuildInfo)||void 0===L?void 0:L.packageName),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Xe=null===(Oe=null===(se=null==Nt?void 0:Nt.cordova)||void 0===se?void 0:se.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===Xe?void 0:Xe.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(nt=null===(Ct=null===(at=null==Nt?void 0:Nt.cordova)||void 0===at?void 0:at.plugins)||void 0===Ct?void 0:Ct.browsertab)||void 0===nt?void 0:nt.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Qn=null===(nn=null==Nt?void 0:Nt.cordova)||void 0===nn?void 0:nn.InAppBrowser)||void 0===Qn?void 0:Qn.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const at=yield Xe._initialize(R);yield at.initialized(),at.resetRedirect(),(0,O.aD)(),yield Xe._originValidation(R);const Ct=function Ee(U,R,L=null){return{type:R,eventId:L,urlResponse:null,sessionId:Z(),postBody:null,tenantId:U.tenantId,error:(0,O.aw)(U,"no-auth-event")}}(R,se,Oe);yield function Ge(U,R){return X()._set(ne(U),R)}(R,Ct);const nt=yield function q(U,R,L){return H.apply(this,arguments)}(R,Ct,L),nn=yield function Se(U){const{cordova:R}=oe();return new Promise(L=>{R.plugins.browsertab.isAvailable(se=>{let Oe=null;se?R.plugins.browsertab.openUrl(U):Oe=R.InAppBrowser.open(U,(0,O.av)()?"_blank":"_system","location=yes"),L(Oe)})})}(nt);return function Pe(U,R,L){return je.apply(this,arguments)}(R,at,nn)})()}_isIframeWebStorageSupported(R,L){throw new Error("Method not implemented.")}_originValidation(R){const L=R._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function te(U){return Ue.apply(this,arguments)}(R)),this.originValidationPromises[L]}attachCallbackListeners(R,L){const{universalLinks:se,handleOpenURL:Oe,BuildInfo:Xe}=oe(),at=setTimeout((0,p.Z)(function*(){yield ee(R),L.onEvent(ze())}),500),Ct=function(){var Qn=(0,p.Z)(function*(Nt){clearTimeout(at);const wr=yield ee(R);let Pi=null;wr&&(null==Nt?void 0:Nt.url)&&(Pi=function _e(U,R){var L,se;const Oe=function le(U){const R=ke(U),L=R.link?decodeURIComponent(R.link):void 0,se=ke(L).link,Oe=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return ke(Oe).link||Oe||se||L||U}(R);if(Oe.includes("/__/auth/callback")){const Xe=ke(Oe),at=Xe.firebaseError?function ye(U){try{return JSON.parse(U)}catch(R){return null}}(decodeURIComponent(Xe.firebaseError)):null,Ct=null===(se=null===(L=null==at?void 0:at.code)||void 0===L?void 0:L.split("auth/"))||void 0===se?void 0:se[1],nt=Ct?(0,O.aw)(Ct):null;return nt?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:nt,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Oe,postBody:null}}return null}(wr,Nt.url)),L.onEvent(Pi||ze())});return function(wr){return Qn.apply(this,arguments)}}();void 0!==se&&"function"==typeof se.subscribe&&se.subscribe(null,Ct);const nt=Oe,nn=`${Xe.packageName.toLowerCase()}://`;oe().handleOpenURL=function(){var Qn=(0,p.Z)(function*(Nt){if(Nt.toLowerCase().startsWith(nn)&&Ct({url:Nt}),"function"==typeof nt)try{nt(Nt)}catch(wr){console.error(wr)}});return function(Nt){return Qn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var L=this;return(0,p.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,L,se,Oe){var Xe=this;return(0,p.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openPopup(R,L,se,Oe)})()}_openRedirect(R,L,se,Oe){var Xe=this;return(0,p.Z)(function*(){return yield Xe.selectUnderlyingResolver(),Xe.assertedUnderlyingResolver._openRedirect(R,L,se,Oe)})()}_isIframeWebStorageSupported(R,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,L)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Ni()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,p.Z)(function*(){if(R.underlyingResolver)return;const L=yield function pt(){return dr.apply(this,arguments)}();R.underlyingResolver=L?R.cordovaResolver:R.browserResolver})()}}function Ei(U){return U.unwrap()}function zt(U){return Un(U)}function Un(U){const{_tokenResponse:R}=U instanceof ie.ZR?U.customData:U;if(!R)return null;if(!(U instanceof ie.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return O.P.credentialFromResult(U);const L=R.providerId;if(!L||L===O.o.PASSWORD)return null;let se;switch(L){case O.o.GOOGLE:se=O.Q;break;case O.o.FACEBOOK:se=O.N;break;case O.o.GITHUB:se=O.T;break;case O.o.TWITTER:se=O.W;break;default:const{oauthIdToken:Oe,oauthAccessToken:Xe,oauthTokenSecret:at,pendingToken:Ct,nonce:nt}=R;return Xe||at||Oe||Ct?Ct?L.startsWith("saml.")?O.aL._create(L,Ct):O.J._fromParams({providerId:L,signInMethod:L,pendingToken:Ct,idToken:Oe,accessToken:Xe}):new O.U(L).credential({idToken:Oe,accessToken:Xe,rawNonce:nt}):null}return U instanceof ie.ZR?se.credentialFromError(U):se.credentialFromResult(U)}function fn(U,R){return R.catch(L=>{throw L instanceof ie.ZR&&function Oi(U,R){var L,se;const Oe=null===(L=R.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===(null===(se=R)||void 0===se?void 0:se.code))R.resolver=new jt(U,O.an(U,R));else if(Oe){const Xe=Un(R),at=R;Xe&&(at.credential=Xe,at.tenantId=Oe.tenantId||void 0,at.email=Oe.email||void 0,at.phoneNumber=Oe.phoneNumber||void 0)}}(U,L),L}).then(L=>{const Oe=L.user;return{operationType:L.operationType,credential:zt(L),additionalUserInfo:O.al(L),user:Gn.getOrCreate(Oe)}})}function dt(U,R){return zr.apply(this,arguments)}function zr(){return(zr=(0,p.Z)(function*(U,R){const L=yield R;return{verificationId:L.verificationId,confirm:se=>fn(U,L.confirm(se))}})).apply(this,arguments)}class jt{constructor(R,L){this.resolver=L,this.auth=function Lr(U){return U.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return fn(Ei(this.auth),this.resolver.resolveSignIn(R))}}class Gn{constructor(R){this._delegate=R,this.multiFactor=O.ao(R)}static getOrCreate(R){return Gn.USER_MAP.has(R)||Gn.USER_MAP.set(R,new Gn(R)),Gn.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var L=this;return(0,p.Z)(function*(){return fn(L.auth,O.Z(L._delegate,R))})()}linkWithPhoneNumber(R,L){var se=this;return(0,p.Z)(function*(){return dt(se.auth,O.l(se._delegate,R,L))})()}linkWithPopup(R){var L=this;return(0,p.Z)(function*(){return fn(L.auth,O.d(L._delegate,R,tt))})()}linkWithRedirect(R){var L=this;return(0,p.Z)(function*(){return yield In(O.aE(L.auth)),O.g(L._delegate,R,tt)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var L=this;return(0,p.Z)(function*(){return fn(L.auth,O._(L._delegate,R))})()}reauthenticateWithPhoneNumber(R,L){return dt(this.auth,O.r(this._delegate,R,L))}reauthenticateWithPopup(R){return fn(this.auth,O.e(this._delegate,R,tt))}reauthenticateWithRedirect(R){var L=this;return(0,p.Z)(function*(){return yield In(O.aE(L.auth)),O.h(L._delegate,R,tt)})()}sendEmailVerification(R){return O.ab(this._delegate,R)}unlink(R){var L=this;return(0,p.Z)(function*(){return yield O.ak(L._delegate,R),L})()}updateEmail(R){return O.ag(this._delegate,R)}updatePassword(R){return O.ah(this._delegate,R)}updatePhoneNumber(R){return O.u(this._delegate,R)}updateProfile(R){return O.af(this._delegate,R)}verifyBeforeUpdateEmail(R,L){return O.ac(this._delegate,R,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Gn.USER_MAP=new WeakMap;const Qe=O.ax;let be=(()=>{class U{constructor(L,se){if(this.app=L,se.isInitialized())return this._delegate=se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Oe}=L.options;Qe(Oe,"invalid-api-key",{appName:L.name}),Qe(Oe,"invalid-api-key",{appName:L.name});const Xe="undefined"!=typeof window?tt:void 0;this._delegate=se.initialize({options:{persistence:mt(Oe,L.name),popupRedirectResolver:Xe}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,se){O.G(this._delegate,L,se)}applyActionCode(L){return O.a2(this._delegate,L)}checkActionCode(L){return O.a3(this._delegate,L)}confirmPasswordReset(L,se){return O.a1(this._delegate,L,se)}createUserWithEmailAndPassword(L,se){var Oe=this;return(0,p.Z)(function*(){return fn(Oe._delegate,O.a5(Oe._delegate,L,se))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return O.aa(this._delegate,L)}isSignInWithEmailLink(L){return O.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,p.Z)(function*(){Qe(Vn(),L._delegate,"operation-not-supported-in-this-environment");const se=yield O.j(L._delegate,tt);return se?fn(L._delegate,Promise.resolve(se)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function an(U,R){(0,O.aE)(U)._logFramework(R)}(this._delegate,L)}onAuthStateChanged(L,se,Oe){const{next:Xe,error:at,complete:Ct}=We(L,se,Oe);return this._delegate.onAuthStateChanged(Xe,at,Ct)}onIdTokenChanged(L,se,Oe){const{next:Xe,error:at,complete:Ct}=We(L,se,Oe);return this._delegate.onIdTokenChanged(Xe,at,Ct)}sendSignInLinkToEmail(L,se){return O.a7(this._delegate,L,se)}sendPasswordResetEmail(L,se){return O.a0(this._delegate,L,se||void 0)}setPersistence(L){var se=this;return(0,p.Z)(function*(){let Oe;switch(function Er(U,R){hr(Object.values(ln).includes(R),U,"invalid-persistence-type"),(0,ie.b$)()?hr(R!==ln.SESSION,U,"unsupported-persistence-type"):(0,ie.UG)()?hr(R===ln.NONE,U,"unsupported-persistence-type"):ui()?hr(R===ln.NONE||R===ln.LOCAL&&(0,ie.hl)(),U,"unsupported-persistence-type"):hr(R===ln.NONE||_i(),U,"unsupported-persistence-type")}(se._delegate,L),L){case ln.SESSION:Oe=O.a;break;case ln.LOCAL:Oe=(yield O.az(O.i)._isAvailable())?O.i:O.b;break;case ln.NONE:Oe=O.L;break;default:return O.as("argument-error",{appName:se._delegate.name})}return se._delegate.setPersistence(Oe)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return fn(this._delegate,O.X(this._delegate))}signInWithCredential(L){return fn(this._delegate,O.Y(this._delegate,L))}signInWithCustomToken(L){return fn(this._delegate,O.$(this._delegate,L))}signInWithEmailAndPassword(L,se){return fn(this._delegate,O.a6(this._delegate,L,se))}signInWithEmailLink(L,se){return fn(this._delegate,O.a9(this._delegate,L,se))}signInWithPhoneNumber(L,se){return dt(this._delegate,O.s(this._delegate,L,se))}signInWithPopup(L){var se=this;return(0,p.Z)(function*(){return Qe(Vn(),se._delegate,"operation-not-supported-in-this-environment"),fn(se._delegate,O.c(se._delegate,L,tt))})()}signInWithRedirect(L){var se=this;return(0,p.Z)(function*(){return Qe(Vn(),se._delegate,"operation-not-supported-in-this-environment"),yield In(se._delegate),O.f(se._delegate,L,tt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return O.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=ln,U})();function We(U,R,L){let se=U;"function"!=typeof U&&({next:se,error:R,complete:L}=U);const Oe=se;return{next:at=>Oe(at&&Gn.getOrCreate(at)),error:R,complete:L}}function mt(U,R){const L=function zi(U,R){const L=qt();if(!L)return[];const se=O.aA(_r,U,R);switch(L.getItem(se)){case ln.NONE:return[O.L];case ln.LOCAL:return[O.i,O.a];case ln.SESSION:return[O.a];default:return[]}}(U,R);if("undefined"!=typeof self&&!L.includes(O.i)&&L.push(O.i),"undefined"!=typeof window)for(const se of[O.b,O.a])L.includes(se)||L.push(se);return L.includes(O.L)||L.push(O.L),L}class gt{constructor(){this.providerId="phone",this._delegate=new O.P(Ei(j.Z.auth()))}static credential(R,L){return O.P.credential(R,L)}verifyPhoneNumber(R,L){return this._delegate.verifyPhoneNumber(R,L)}unwrap(){return this._delegate}}gt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,gt.PROVIDER_ID=O.P.PROVIDER_ID;const en=O.ax;class G{constructor(R,L,se=j.Z.app()){var Oe;en(null===(Oe=se.options)||void 0===Oe?void 0:Oe.apiKey,"invalid-api-key",{appName:se.name}),this._delegate=new O.R(R,L,se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function W(U){U.INTERNAL.registerComponent(new fe.wA("auth-compat",R=>{const L=R.getProvider("app-compat").getImmediate(),se=R.getProvider("auth");return new be(L,se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:gt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:G,TwitterAuthProvider:O.W,Auth:be,AuthCredential:O.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.2.24")}(j.Z)},8306:(rt,Ie,k)=>{k.d(Ie,{y:()=>q});var p=k(2961),j=k(727),O=k(8822),ie=k(4671);var fe=k(2416),oe=k(576),me=k(2806);let q=(()=>{class Se{constructor(je){je&&(this._subscribe=je)}lift(je){const pe=new Se;return pe.source=this,pe.operator=je,pe}subscribe(je,pe,De){const qe=function Ue(Se){return Se&&Se instanceof p.Lv||function te(Se){return Se&&(0,oe.m)(Se.next)&&(0,oe.m)(Se.error)&&(0,oe.m)(Se.complete)}(Se)&&(0,j.Nn)(Se)}(je)?je:new p.Hp(je,pe,De);return(0,me.x)(()=>{const{operator:He,source:Re}=this;qe.add(He?He.call(qe,Re):Re?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(je){try{return this._subscribe(je)}catch(pe){je.error(pe)}}forEach(je,pe){return new(pe=H(pe))((De,qe)=>{const He=new p.Hp({next:Re=>{try{je(Re)}catch(Ce){qe(Ce),He.unsubscribe()}},error:qe,complete:De});this.subscribe(He)})}_subscribe(je){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(je)}[O.L](){return this}pipe(...je){return function ge(Se){return 0===Se.length?ie.y:1===Se.length?Se[0]:function(je){return Se.reduce((pe,De)=>De(pe),je)}}(je)(this)}toPromise(je){return new(je=H(je))((pe,De)=>{let qe;this.subscribe(He=>qe=He,He=>De(He),()=>pe(qe))})}}return Se.create=Pe=>new Se(Pe),Se})();function H(Se){var Pe;return null!==(Pe=null!=Se?Se:fe.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(rt,Ie,k)=>{k.d(Ie,{x:()=>fe});var p=k(8306),j=k(727);const ie=(0,k(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=k(8737),ge=k(2806);let fe=(()=>{class me extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const te=new oe(this,this);return te.operator=H,te}_throwIfClosed(){if(this.closed)throw new ie}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:te}=this;for(;te.length;)te.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:te,isStopped:Ue,observers:Se}=this;return te||Ue?j.Lc:(this.currentObservers=null,Se.push(H),new j.w0(()=>{this.currentObservers=null,(0,ae.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:te,thrownError:Ue,isStopped:Se}=this;te?H.error(Ue):Se&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return me.create=(q,H)=>new oe(q,H),me})();class oe extends fe{constructor(q,H){super(),this.destination=q,this.source=H}next(q){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===te||te.call(H,q)}error(q){var H,te;null===(te=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===te||te.call(H,q)}complete(){var q,H;null===(H=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===H||H.call(q)}_subscribe(q){var H,te;return null!==(te=null===(H=this.source)||void 0===H?void 0:H.subscribe(q))&&void 0!==te?te:j.Lc}}},2961:(rt,Ie,k)=>{k.d(Ie,{Hp:()=>je,Lv:()=>te});var p=k(576),j=k(727),O=k(2416),ie=k(7849);function ae(){}const ge=me("C",void 0,void 0);function me(Re,Ce,Ee){return{kind:Re,value:Ce,error:Ee}}var q=k(3410),H=k(2806);class te extends j.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,j.Nn)(Ce)&&Ce.add(this)):this.destination=He}static create(Ce,Ee,Ge){return new je(Ce,Ee,Ge)}next(Ce){this.isStopped?qe(function oe(Re){return me("N",Re,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?qe(function fe(Re){return me("E",void 0,Re)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?qe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Se(Re,Ce){return Ue.call(Re,Ce)}class Pe{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Ce)}catch(Ge){pe(Ge)}}error(Ce){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Ce)}catch(Ge){pe(Ge)}else pe(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Ee){pe(Ee)}}}class je extends te{constructor(Ce,Ee,Ge){let ee;if(super(),(0,p.m)(Ce)||!Ce)ee={next:null!=Ce?Ce:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ge?Ge:void 0};else{let he;this&&O.v.useDeprecatedNextContext?(he=Object.create(Ce),he.unsubscribe=()=>this.unsubscribe(),ee={next:Ce.next&&Se(Ce.next,he),error:Ce.error&&Se(Ce.error,he),complete:Ce.complete&&Se(Ce.complete,he)}):ee=Ce}this.destination=new Pe(ee)}}function pe(Re){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Re):(0,ie.h)(Re)}function qe(Re,Ce){const{onStoppedNotification:Ee}=O.v;Ee&&q.z.setTimeout(()=>Ee(Re,Ce))}const He={closed:!0,next:ae,error:function De(Re){throw Re},complete:ae}},727:(rt,Ie,k)=>{k.d(Ie,{Lc:()=>ge,w0:()=>ae,Nn:()=>fe});var p=k(576);const O=(0,k(3888).d)(me=>function(H){me(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((te,Ue)=>`${Ue+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ie=k(8737);class ae{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:te}=this;if((0,p.m)(te))try{te()}catch(Se){q=Se instanceof O?Se.errors:[Se]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Se of Ue)try{oe(Se)}catch(Pe){q=null!=q?q:[],Pe instanceof O?q=[...q,...Pe.errors]:q.push(Pe)}}if(q)throw new O(q)}}add(q){var H;if(q&&q!==this)if(this.closed)oe(q);else{if(q instanceof ae){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(q)}}_hasParent(q){const{_parentage:H}=this;return H===q||Array.isArray(H)&&H.includes(q)}_addParent(q){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(q),H):H?[H,q]:q}_removeParent(q){const{_parentage:H}=this;H===q?this._parentage=null:Array.isArray(H)&&(0,ie.P)(H,q)}remove(q){const{_finalizers:H}=this;H&&(0,ie.P)(H,q),q instanceof ae&&q._removeParent(this)}}ae.EMPTY=(()=>{const me=new ae;return me.closed=!0,me})();const ge=ae.EMPTY;function fe(me){return me instanceof ae||me&&"closed"in me&&(0,p.m)(me.remove)&&(0,p.m)(me.add)&&(0,p.m)(me.unsubscribe)}function oe(me){(0,p.m)(me)?me():me.unsubscribe()}},2416:(rt,Ie,k)=>{k.d(Ie,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,Ie,k)=>{k.d(Ie,{E:()=>j});const j=new(k(8306).y)(ae=>ae.complete())},8996:(rt,Ie,k)=>{k.d(Ie,{D:()=>Ce});var p=k(8421),j=k(5363),O=k(9468),ge=k(8306),oe=k(2202),me=k(576),q=k(9672);function te(Ee,Ge){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(ee=>{(0,q.f)(ee,Ge,()=>{const he=Ee[Symbol.asyncIterator]();(0,q.f)(ee,Ge,()=>{he.next().then(_e=>{_e.done?ee.complete():ee.next(_e.value)})},0,!0)})})}var Ue=k(3670),Se=k(8239),Pe=k(1144),je=k(6495),pe=k(2206),De=k(4532),qe=k(3260);function Ce(Ee,Ge){return Ge?function Re(Ee,Ge){if(null!=Ee){if((0,Ue.c)(Ee))return function ie(Ee,Ge){return(0,p.Xf)(Ee).pipe((0,O.R)(Ge),(0,j.Q)(Ge))}(Ee,Ge);if((0,Pe.z)(Ee))return function fe(Ee,Ge){return new ge.y(ee=>{let he=0;return Ge.schedule(function(){he===Ee.length?ee.complete():(ee.next(Ee[he++]),ee.closed||this.schedule())})})}(Ee,Ge);if((0,Se.t)(Ee))return function ae(Ee,Ge){return(0,p.Xf)(Ee).pipe((0,O.R)(Ge),(0,j.Q)(Ge))}(Ee,Ge);if((0,pe.D)(Ee))return te(Ee,Ge);if((0,je.T)(Ee))return function H(Ee,Ge){return new ge.y(ee=>{let he;return(0,q.f)(ee,Ge,()=>{he=Ee[oe.h](),(0,q.f)(ee,Ge,()=>{let _e,Z;try{({value:_e,done:Z}=he.next())}catch(X){return void ee.error(X)}Z?ee.complete():ee.next(_e)},0,!0)}),()=>(0,me.m)(null==he?void 0:he.return)&&he.return()})}(Ee,Ge);if((0,qe.L)(Ee))return function He(Ee,Ge){return te((0,qe.Q)(Ee),Ge)}(Ee,Ge)}throw(0,De.z)(Ee)}(Ee,Ge):(0,p.Xf)(Ee)}},8421:(rt,Ie,k)=>{k.d(Ie,{Xf:()=>Ue});var p=k(655),j=k(1144),O=k(8239),ie=k(8306),ae=k(3670),ge=k(2206),fe=k(4532),oe=k(6495),me=k(3260),q=k(576),H=k(7849),te=k(8822);function Ue(Re){if(Re instanceof ie.y)return Re;if(null!=Re){if((0,ae.c)(Re))return function Se(Re){return new ie.y(Ce=>{const Ee=Re[te.L]();if((0,q.m)(Ee.subscribe))return Ee.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,j.z)(Re))return function Pe(Re){return new ie.y(Ce=>{for(let Ee=0;Ee<Re.length&&!Ce.closed;Ee++)Ce.next(Re[Ee]);Ce.complete()})}(Re);if((0,O.t)(Re))return function je(Re){return new ie.y(Ce=>{Re.then(Ee=>{Ce.closed||(Ce.next(Ee),Ce.complete())},Ee=>Ce.error(Ee)).then(null,H.h)})}(Re);if((0,ge.D)(Re))return De(Re);if((0,oe.T)(Re))return function pe(Re){return new ie.y(Ce=>{for(const Ee of Re)if(Ce.next(Ee),Ce.closed)return;Ce.complete()})}(Re);if((0,me.L)(Re))return function qe(Re){return De((0,me.Q)(Re))}(Re)}throw(0,fe.z)(Re)}function De(Re){return new ie.y(Ce=>{(function He(Re,Ce){var Ee,Ge,ee,he;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,p.KL)(Re);!(Ge=yield Ee.next()).done;)if(Ce.next(Ge.value),Ce.closed)return}catch(_e){ee={error:_e}}finally{try{Ge&&!Ge.done&&(he=Ee.return)&&(yield he.call(Ee))}finally{if(ee)throw ee.error}}Ce.complete()})})(Re,Ce).catch(Ee=>Ce.error(Ee))})}},6451:(rt,Ie,k)=>{k.d(Ie,{T:()=>ge});var p=k(8189),j=k(8421),O=k(515),ie=k(7669),ae=k(8996);function ge(...fe){const oe=(0,ie.yG)(fe),me=(0,ie._6)(fe,1/0),q=fe;return q.length?1===q.length?(0,j.Xf)(q[0]):(0,p.J)(me)((0,ae.D)(q,oe)):O.E}},5403:(rt,Ie,k)=>{k.d(Ie,{x:()=>j});var p=k(2961);function j(ie,ae,ge,fe,oe){return new O(ie,ae,ge,fe,oe)}class O extends p.Lv{constructor(ae,ge,fe,oe,me,q){super(ae),this.onFinalize=me,this.shouldUnsubscribe=q,this._next=ge?function(H){try{ge(H)}catch(te){ae.error(te)}}:super._next,this._error=oe?function(H){try{oe(H)}catch(te){ae.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(H){ae.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(rt,Ie,k)=>{k.d(Ie,{U:()=>O});var p=k(4482),j=k(5403);function O(ie,ae){return(0,p.e)((ge,fe)=>{let oe=0;ge.subscribe((0,j.x)(fe,me=>{fe.next(ie.call(ae,me,oe++))}))})}},8189:(rt,Ie,k)=>{k.d(Ie,{J:()=>O});var p=k(5577),j=k(4671);function O(ie=1/0){return(0,p.z)(j.y,ie)}},5577:(rt,Ie,k)=>{k.d(Ie,{z:()=>oe});var p=k(4004),j=k(8421),O=k(4482),ie=k(9672),ae=k(5403),fe=k(576);function oe(me,q,H=1/0){return(0,fe.m)(q)?oe((te,Ue)=>(0,p.U)((Se,Pe)=>q(te,Se,Ue,Pe))((0,j.Xf)(me(te,Ue))),H):("number"==typeof q&&(H=q),(0,O.e)((te,Ue)=>function ge(me,q,H,te,Ue,Se,Pe,je){const pe=[];let De=0,qe=0,He=!1;const Re=()=>{He&&!pe.length&&!De&&q.complete()},Ce=Ge=>De<te?Ee(Ge):pe.push(Ge),Ee=Ge=>{Se&&q.next(Ge),De++;let ee=!1;(0,j.Xf)(H(Ge,qe++)).subscribe((0,ae.x)(q,he=>{null==Ue||Ue(he),Se?Ce(he):q.next(he)},()=>{ee=!0},void 0,()=>{if(ee)try{for(De--;pe.length&&De<te;){const he=pe.shift();Pe?(0,ie.f)(q,Pe,()=>Ee(he)):Ee(he)}Re()}catch(he){q.error(he)}}))};return me.subscribe((0,ae.x)(q,Ce,()=>{He=!0,Re()})),()=>{null==je||je()}}(te,Ue,me,H)))}},5363:(rt,Ie,k)=>{k.d(Ie,{Q:()=>ie});var p=k(9672),j=k(4482),O=k(5403);function ie(ae,ge=0){return(0,j.e)((fe,oe)=>{fe.subscribe((0,O.x)(oe,me=>(0,p.f)(oe,ae,()=>oe.next(me),ge),()=>(0,p.f)(oe,ae,()=>oe.complete(),ge),me=>(0,p.f)(oe,ae,()=>oe.error(me),ge)))})}},3099:(rt,Ie,k)=>{k.d(Ie,{B:()=>ae});var p=k(8421),j=k(7579),O=k(2961),ie=k(4482);function ae(fe={}){const{connector:oe=(()=>new j.x),resetOnError:me=!0,resetOnComplete:q=!0,resetOnRefCountZero:H=!0}=fe;return te=>{let Ue,Se,Pe,je=0,pe=!1,De=!1;const qe=()=>{null==Se||Se.unsubscribe(),Se=void 0},He=()=>{qe(),Ue=Pe=void 0,pe=De=!1},Re=()=>{const Ce=Ue;He(),null==Ce||Ce.unsubscribe()};return(0,ie.e)((Ce,Ee)=>{je++,!De&&!pe&&qe();const Ge=Pe=null!=Pe?Pe:oe();Ee.add(()=>{je--,0===je&&!De&&!pe&&(Se=ge(Re,H))}),Ge.subscribe(Ee),!Ue&&je>0&&(Ue=new O.Hp({next:ee=>Ge.next(ee),error:ee=>{De=!0,qe(),Se=ge(He,me,ee),Ge.error(ee)},complete:()=>{pe=!0,qe(),Se=ge(He,q),Ge.complete()}}),(0,p.Xf)(Ce).subscribe(Ue))})(te)}}function ge(fe,oe,...me){if(!0===oe)return void fe();if(!1===oe)return;const q=new O.Hp({next:()=>{q.unsubscribe(),fe()}});return oe(...me).subscribe(q)}},9468:(rt,Ie,k)=>{k.d(Ie,{R:()=>j});var p=k(4482);function j(O,ie=0){return(0,p.e)((ae,ge)=>{ge.add(O.schedule(()=>ae.subscribe(ge),ie))})}},8505:(rt,Ie,k)=>{k.d(Ie,{b:()=>ae});var p=k(576),j=k(4482),O=k(5403),ie=k(4671);function ae(ge,fe,oe){const me=(0,p.m)(ge)||fe||oe?{next:ge,error:fe,complete:oe}:ge;return me?(0,j.e)((q,H)=>{var te;null===(te=me.subscribe)||void 0===te||te.call(me);let Ue=!0;q.subscribe((0,O.x)(H,Se=>{var Pe;null===(Pe=me.next)||void 0===Pe||Pe.call(me,Se),H.next(Se)},()=>{var Se;Ue=!1,null===(Se=me.complete)||void 0===Se||Se.call(me),H.complete()},Se=>{var Pe;Ue=!1,null===(Pe=me.error)||void 0===Pe||Pe.call(me,Se),H.error(Se)},()=>{var Se,Pe;Ue&&(null===(Se=me.unsubscribe)||void 0===Se||Se.call(me)),null===(Pe=me.finalize)||void 0===Pe||Pe.call(me)}))}):ie.y}},4408:(rt,Ie,k)=>{k.d(Ie,{o:()=>ae});var p=k(727);class j extends p.w0{constructor(fe,oe){super()}schedule(fe,oe=0){return this}}const O={setInterval(ge,fe,...oe){const{delegate:me}=O;return(null==me?void 0:me.setInterval)?me.setInterval(ge,fe,...oe):setInterval(ge,fe,...oe)},clearInterval(ge){const{delegate:fe}=O;return((null==fe?void 0:fe.clearInterval)||clearInterval)(ge)},delegate:void 0};var ie=k(8737);class ae extends j{constructor(fe,oe){super(fe,oe),this.scheduler=fe,this.work=oe,this.pending=!1}schedule(fe,oe=0){var me;if(this.closed)return this;this.state=fe;const q=this.id,H=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(H,q,oe)),this.pending=!0,this.delay=oe,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(H,this.id,oe),this}requestAsyncId(fe,oe,me=0){return O.setInterval(fe.flush.bind(fe,this),me)}recycleAsyncId(fe,oe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return oe;null!=oe&&O.clearInterval(oe)}execute(fe,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(fe,oe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,oe){let q,me=!1;try{this.work(fe)}catch(H){me=!0,q=H||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:fe,scheduler:oe}=this,{actions:me}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(me,this),null!=fe&&(this.id=this.recycleAsyncId(oe,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,Ie,k)=>{k.d(Ie,{v:()=>O});var p=k(6063);class j{constructor(ae,ge=j.now){this.schedulerActionCtor=ae,this.now=ge}schedule(ae,ge=0,fe){return new this.schedulerActionCtor(this,ae).schedule(fe,ge)}}j.now=p.l.now;class O extends j{constructor(ae,ge=j.now){super(ae,ge),this.actions=[],this._active=!1}flush(ae){const{actions:ge}=this;if(this._active)return void ge.push(ae);let fe;this._active=!0;do{if(fe=ae.execute(ae.state,ae.delay))break}while(ae=ge.shift());if(this._active=!1,fe){for(;ae=ge.shift();)ae.unsubscribe();throw fe}}}},4986:(rt,Ie,k)=>{k.d(Ie,{z:()=>O});var p=k(4408);const O=new(k(7565).v)(p.o)},6063:(rt,Ie,k)=>{k.d(Ie,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(rt,Ie,k)=>{k.d(Ie,{z:()=>p});const p={setTimeout(j,O,...ie){const{delegate:ae}=p;return(null==ae?void 0:ae.setTimeout)?ae.setTimeout(j,O,...ie):setTimeout(j,O,...ie)},clearTimeout(j){const{delegate:O}=p;return((null==O?void 0:O.clearTimeout)||clearTimeout)(j)},delegate:void 0}},2202:(rt,Ie,k)=>{k.d(Ie,{h:()=>j});const j=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,Ie,k)=>{k.d(Ie,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(rt,Ie,k)=>{k.d(Ie,{_6:()=>ge,jO:()=>ie,yG:()=>ae});var p=k(576);function O(fe){return fe[fe.length-1]}function ie(fe){return(0,p.m)(O(fe))?fe.pop():void 0}function ae(fe){return function j(fe){return fe&&(0,p.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function ge(fe,oe){return"number"==typeof O(fe)?fe.pop():oe}},8737:(rt,Ie,k)=>{function p(j,O){if(j){const ie=j.indexOf(O);0<=ie&&j.splice(ie,1)}}k.d(Ie,{P:()=>p})},3888:(rt,Ie,k)=>{function p(j){const ie=j(ae=>{Error.call(ae),ae.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Ie,{d:()=>p})},2806:(rt,Ie,k)=>{k.d(Ie,{O:()=>ie,x:()=>O});var p=k(2416);let j=null;function O(ae){if(p.v.useDeprecatedSynchronousErrorHandling){const ge=!j;if(ge&&(j={errorThrown:!1,error:null}),ae(),ge){const{errorThrown:fe,error:oe}=j;if(j=null,fe)throw oe}}else ae()}function ie(ae){p.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ae)}},9672:(rt,Ie,k)=>{function p(j,O,ie,ae=0,ge=!1){const fe=O.schedule(function(){ie(),ge?j.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(j.add(fe),!ge)return fe}k.d(Ie,{f:()=>p})},4671:(rt,Ie,k)=>{function p(j){return j}k.d(Ie,{y:()=>p})},1144:(rt,Ie,k)=>{k.d(Ie,{z:()=>p});const p=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(rt,Ie,k)=>{k.d(Ie,{D:()=>j});var p=k(576);function j(O){return Symbol.asyncIterator&&(0,p.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(rt,Ie,k)=>{function p(j){return"function"==typeof j}k.d(Ie,{m:()=>p})},3670:(rt,Ie,k)=>{k.d(Ie,{c:()=>O});var p=k(8822),j=k(576);function O(ie){return(0,j.m)(ie[p.L])}},6495:(rt,Ie,k)=>{k.d(Ie,{T:()=>O});var p=k(2202),j=k(576);function O(ie){return(0,j.m)(null==ie?void 0:ie[p.h])}},8239:(rt,Ie,k)=>{k.d(Ie,{t:()=>j});var p=k(576);function j(O){return(0,p.m)(null==O?void 0:O.then)}},3260:(rt,Ie,k)=>{k.d(Ie,{L:()=>ie,Q:()=>O});var p=k(655),j=k(576);function O(ae){return(0,p.FC)(this,arguments,function*(){const fe=ae.getReader();try{for(;;){const{value:oe,done:me}=yield(0,p.qq)(fe.read());if(me)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(oe)}}finally{fe.releaseLock()}})}function ie(ae){return(0,j.m)(null==ae?void 0:ae.getReader)}},4482:(rt,Ie,k)=>{k.d(Ie,{A:()=>j,e:()=>O});var p=k(576);function j(ie){return(0,p.m)(null==ie?void 0:ie.lift)}function O(ie){return ae=>{if(j(ae))return ae.lift(function(ge){try{return ie(ge,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(rt,Ie,k)=>{k.d(Ie,{h:()=>O});var p=k(2416),j=k(3410);function O(ie){j.z.setTimeout(()=>{const{onUnhandledError:ae}=p.v;if(!ae)throw ie;ae(ie)})}},4532:(rt,Ie,k)=>{function p(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ie,{z:()=>p})},655:(rt,Ie,k)=>{function ie(Z,X){var ne={};for(var ye in Z)Object.prototype.hasOwnProperty.call(Z,ye)&&X.indexOf(ye)<0&&(ne[ye]=Z[ye]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(ye=Object.getOwnPropertySymbols(Z);le<ye.length;le++)X.indexOf(ye[le])<0&&Object.prototype.propertyIsEnumerable.call(Z,ye[le])&&(ne[ye[le]]=Z[ye[le]])}return ne}function oe(Z,X,ne,ye){return new(ne||(ne=Promise))(function(ke,ut){function Jt(an){try{ze(ye.next(an))}catch(vn){ut(vn)}}function Rt(an){try{ze(ye.throw(an))}catch(vn){ut(vn)}}function ze(an){an.done?ke(an.value):function le(ke){return ke instanceof ne?ke:new ne(function(ut){ut(ke)})}(an.value).then(Jt,Rt)}ze((ye=ye.apply(Z,X||[])).next())})}function pe(Z){return this instanceof pe?(this.v=Z,this):new pe(Z)}function De(Z,X,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ye=ne.apply(Z,X||[]),ke=[];return le={},ut("next"),ut("throw"),ut("return"),le[Symbol.asyncIterator]=function(){return this},le;function ut(un){ye[un]&&(le[un]=function(Xt){return new Promise(function(Ut,Zt){ke.push([un,Xt,Ut,Zt])>1||Jt(un,Xt)})})}function Jt(un,Xt){try{!function Rt(un){un.value instanceof pe?Promise.resolve(un.value.v).then(ze,an):vn(ke[0][2],un)}(ye[un](Xt))}catch(Ut){vn(ke[0][3],Ut)}}function ze(un){Jt("next",un)}function an(un){Jt("throw",un)}function vn(un,Xt){un(Xt),ke.shift(),ke.length&&Jt(ke[0][0],ke[0][1])}}function He(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,X=Z[Symbol.asyncIterator];return X?X.call(Z):(Z=function te(Z){var X="function"==typeof Symbol&&Symbol.iterator,ne=X&&Z[X],ye=0;if(ne)return ne.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ye>=Z.length&&(Z=void 0),{value:Z&&Z[ye++],done:!Z}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ne={},ye("next"),ye("throw"),ye("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ye(ke){ne[ke]=Z[ke]&&function(ut){return new Promise(function(Jt,Rt){!function le(ke,ut,Jt,Rt){Promise.resolve(Rt).then(function(ze){ke({value:ze,done:Jt})},ut)}(Jt,Rt,(ut=Z[ke](ut)).done,ut.value)})}}}k.d(Ie,{FC:()=>De,KL:()=>He,_T:()=>ie,mG:()=>oe,qq:()=>pe})},5e3:(rt,Ie,k)=>{k.d(Ie,{$8M:()=>Ss,$Z:()=>eg,AFp:()=>Ov,AaK:()=>oe,CHM:()=>Za,CRH:()=>Mw,CZH:()=>Ed,CqO:()=>Eb,EJc:()=>Mu,EpF:()=>_b,F4k:()=>nE,FYo:()=>uf,FiY:()=>it,G48:()=>Ua,GfV:()=>sd,Gpc:()=>H,JOm:()=>io,LFG:()=>S,LSH:()=>Ip,Lbi:()=>lC,NdJ:()=>rE,OlP:()=>Dn,Oqu:()=>$h,PXZ:()=>Zw,Q6J:()=>Q0,QGY:()=>Oy,Qsj:()=>pw,R0b:()=>ps,RDi:()=>Ou,Rgc:()=>ud,SBq:()=>Pa,Sil:()=>Va,Suo:()=>Bs,TTD:()=>ea,TgZ:()=>tg,VLi:()=>Gw,X6Q:()=>bd,XFs:()=>pt,Xpm:()=>gt,Y36:()=>Xp,YKP:()=>mv,YNc:()=>Yc,Yjl:()=>Oe,Yz7:()=>Xt,ZZ4:()=>vr,_Bn:()=>uw,_UZ:()=>Nh,_Vd:()=>af,_c5:()=>lI,_uU:()=>ug,aQg:()=>Fl,c2e:()=>cC,cJS:()=>Zt,cg1:()=>Qy,dDg:()=>Uv,deG:()=>mc,dqk:()=>zt,eFA:()=>Bv,ekj:()=>Mr,g9A:()=>Vw,h0i:()=>Hr,hGG:()=>cI,iGM:()=>ue,ifc:()=>qt,ip1:()=>_f,kL8:()=>Jy,lG2:()=>se,n5z:()=>eu,oAB:()=>U,oxw:()=>Db,q4F:()=>pv,qLn:()=>Wt,qOj:()=>F0,qZA:()=>Rh,sBO:()=>Cd,sIi:()=>Hc,s_b:()=>Et,soG:()=>Lv,tBr:()=>bt,tb:()=>Fv,tp0:()=>tr,uIk:()=>Ah,vHH:()=>Pe,vpe:()=>zo,wAp:()=>_t,xp6:()=>Q_,z2F:()=>Dd,zSh:()=>C0,zs3:()=>Ht});var p=k(7579),j=k(727),O=k(8306),ie=k(6451),ae=k(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function fe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function me(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const q=ge({__forward_ref__:ge});function H(i){return i.__forward_ref__=H,i.toString=function(){return oe(this())},i}function te(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(q)&&i.__forward_ref__===H}class Pe extends Error{constructor(s,a){super(function je(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function De(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}function Ce(i,s){const a=s?` in ${s}`:"";throw new Pe(-201,`No provider for ${De(i)} found${a}`)}function Rt(i,s){null==i&&function ze(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function bn(i){return Fr(i,_i)||Fr(i,Vn)}function Fr(i,s){return i.hasOwnProperty(s)?i[s]:null}function qi(i){return i&&(i.hasOwnProperty(ui)||i.hasOwnProperty(Ni))?i[ui]:null}const _i=ge({\u0275prov:ge}),ui=ge({\u0275inj:ge}),Vn=ge({ngInjectableDef:ge}),Ni=ge({ngInjectorDef:ge});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let dr;function ln(i){const s=dr;return dr=i,s}function hr(i,s,a){const l=bn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&pt.Optional?null:void 0!==s?s:void Ce(oe(i),"Injector")}function Er(i){return{toString:i}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),qt=(()=>{return(i=qt||(qt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",qt;var i})();const lt="undefined"!=typeof globalThis&&globalThis,tt="undefined"!=typeof window&&window,Ei="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,zt=lt||"undefined"!=typeof global&&global||tt||Ei,fn={},dt=[],zr=ge({\u0275cmp:ge}),jt=ge({\u0275dir:ge}),Gn=ge({\u0275pipe:ge}),Qe=ge({\u0275mod:ge}),be=ge({\u0275fac:ge}),We=ge({__NG_ELEMENT_ID__:ge});let mt=0;function gt(i){return Er(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||qt.Emulated,id:"c",styles:i.styles||dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,h=i.features,y=i.pipes;return l.id+=mt++,l.inputs=L(i.inputs,a),l.outputs=L(i.outputs),h&&h.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(G):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(B):null,l})}function G(i){return Xe(i)||function at(i){return i[jt]||null}(i)}function B(i){return function Ct(i){return i[Gn]||null}(i)}const W={};function U(i){return Er(()=>{const s={type:i.type,bootstrap:i.bootstrap||dt,declarations:i.declarations||dt,imports:i.imports||dt,exports:i.exports||dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(W[i.id]=i.type),s})}function L(i,s){if(null==i)return fn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),a[c]=l,s&&(s[c]=h)}return a}const se=gt;function Oe(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Xe(i){return i[zr]||null}function nt(i,s){const a=i[Qe]||null;if(!a&&!0===s)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}function wi(i){return Array.isArray(i)&&"object"==typeof i[1]}function li(i){return Array.isArray(i)&&!0===i[1]}function Hl(i){return 0!=(8&i.flags)}function Ba(i){return 2==(2&i.flags)}function _s(i){return 1==(1&i.flags)}function ci(i){return null!==i.template}function Pd(i){return 0!=(512&i[2])}function di(i,s){return i.hasOwnProperty(be)?i[be]:null}class Eo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ea(){return ta}function ta(i){return i.type.prototype.ngOnChanges&&(i.setInput=Yf),Fd}function Fd(){const i=Kl(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===fn)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Yf(i,s,a,l){const c=Kl(i)||function Qi(i,s){return i[qs]=s}(i,{previous:fn,current:null}),h=c.current||(c.current={}),y=c.previous,E=this.declaredInputs[a],I=y[E];h[E]=new Eo(I&&I.currentValue,s,y===fn),i[l]=s}ea.ngInherit=!0;const qs="__ngSimpleChanges__";function Kl(i){return i[qs]||null}let Ga;function Ou(i){Ga=i}function mn(i){return!!i.listen}const na={createRenderer:(i,s)=>function Ji(){return void 0!==Ga?Ga:"undefined"!=typeof document?document:void 0}()};function hn(i){for(;Array.isArray(i);)i=i[0];return i}function zs(i,s){return hn(s[i])}function Jn(i,s){return hn(s[i.index])}function Nn(i,s){return i.data[s]}function sr(i,s){const a=s[i];return wi(a)?a:a[0]}function wo(i){return 4==(4&i[2])}function ki(i){return 128==(128&i[2])}function Kr(i,s){return null==s?null:i[s]}function Is(i){i[18]=0}function Ds(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const yt={lFrame:ac(null),bindingsEnabled:!0};function Io(){return yt.bindingsEnabled}function xe(){return yt.lFrame.lView}function $t(){return yt.lFrame.tView}function Za(i){return yt.lFrame.contextLView=i,i[8]}function _n(){let i=tc();for(;null!==i&&64===i.type;)i=i.parent;return i}function tc(){return yt.lFrame.currentTNode}function Fi(i,s){const a=yt.lFrame;a.currentTNode=i,a.isParent=s}function Fu(){return yt.lFrame.isParent}function bo(){return yt.lFrame.bindingIndex++}function ic(i,s){const a=yt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Lu(s)}function Lu(i){yt.lFrame.currentDirectiveIndex=i}function sc(){return yt.lFrame.currentQueryIndex}function oc(i){yt.lFrame.currentQueryIndex=i}function Vu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function aa(i,s,a){if(a&pt.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||a&pt.Host||(c=Vu(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const l=yt.lFrame=Ks();return l.currentTNode=s,l.lView=i,!0}function ua(i){const s=Ks(),a=i[1];yt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ks(){const i=yt.lFrame,s=null===i?null:i.child;return null===s?ac(i):s}function ac(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Bd(){const i=yt.lFrame;return yt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ka=Bd;function Qr(){const i=Bd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function fr(){return yt.lFrame.selectedIndex}function Cs(i){yt.lFrame.selectedIndex=i}function On(){const i=yt.lFrame;return Nn(i.tView,i.selectedIndex)}function ts(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function la(i,s,a){cc(i,s,3,a)}function ca(i,s,a,l){(3&i[2])===a&&cc(i,s,a,l)}function Xn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function cc(i,s,a,l){const h=null!=l?l:-1,y=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<h||-1==h)&&(Jf(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Jf(i,s,a,l){const c=a[l]<0,h=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(E)}finally{}}}else try{h.call(E)}finally{}}class Ao{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function $u(i,s,a){const l=mn(i);let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const y=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,y):s.setAttributeNS(y,E,I)}else{const y=h,E=a[++c];Hu(y)?l&&i.setProperty(s,y,E):l?i.setAttribute(s,y,E):s.setAttribute(y,E),c++}}return c}function Ya(i){return 3===i||4===i||6===i}function Hu(i){return 64===i.charCodeAt(0)}function So(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||xo(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function xo(i,s,a,l,c){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===s){y=-1;break}if(E>s){y=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[h+1]=c));if(l===i[h+1])return void(i[h+2]=c)}h++,null!==l&&h++,null!==c&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==c&&i.splice(h++,0,c)}function da(i){return-1!==i}function tn(i){return 32767&i}function It(i,s){let a=function br(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Qa=!0;function Ts(i){const s=Qa;return Qa=i,s}let Ja=0;function ar(i,s){const a=rs(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Js(l.data,i),Js(s,null),Js(l.blueprint,null));const c=Xa(i,s),h=i.injectorIndex;if(da(c)){const y=tn(c),E=It(c,s),I=E[1].data;for(let T=0;T<8;T++)s[h+T]=E[y+T]|I[y+T]}return s[h+8]=c,h}function Js(i,s){i.push(0,0,0,0,0,0,0,0,s)}function rs(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Xa(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const h=c[1],y=h.type;if(l=2===y?h.declTNode:1===y?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function As(i,s,a){!function Vi(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(We)&&(l=a[We]),null==l&&(l=a[We]=Ja++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function hi(i,s,a){if(a&pt.Optional)return i;Ce(s,"NodeInjector")}function is(i,s,a,l){if(a&pt.Optional&&void 0===l&&(l=null),0==(a&(pt.Self|pt.Host))){const c=i[9],h=ln(void 0);try{return c?c.get(s,l,a&pt.Optional):hr(s,l,a&pt.Optional)}finally{ln(h)}}return hi(l,s,a)}function Xs(i,s,a,l=pt.Default,c){if(null!==i){const h=function gc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(We)?i[We]:void 0;return"number"==typeof s?s>=0?255&s:ss:s}(a);if("function"==typeof h){if(!aa(s,i,l))return l&pt.Host?hi(c,a,l):is(s,a,l,c);try{const y=h(l);if(null!=y||l&pt.Optional)return y;Ce(a)}finally{Ka()}}else if("number"==typeof h){let y=null,E=rs(i,s),I=-1,T=l&pt.Host?s[16][6]:null;for((-1===E||l&pt.SkipSelf)&&(I=-1===E?Xa(i,s):s[E+8],-1!==I&&zu(l,!1)?(y=s[1],E=tn(I),s=It(I,s)):E=-1);-1!==E;){const M=s[1];if(ha(h,E,M.data)){const F=fc(E,s,a,y,l,T);if(F!==$n)return F}I=s[E+8],-1!==I&&zu(l,s[1].data[E+8]===T)&&ha(h,E,s)?(y=M,E=tn(I),s=It(I,s)):E=-1}}}return is(s,a,l,c)}const $n={};function ss(){return new ur(_n(),xe())}function fc(i,s,a,l,c,h){const y=s[1],E=y.data[i+8],M=pc(E,y,a,null==l?Ba(E)&&Qa:l!=y&&0!=(3&E.type),c&pt.Host&&h===E);return null!==M?os(s,y,M,E):$n}function pc(i,s,a,l,c){const h=i.providerIndexes,y=s.data,E=1048575&h,I=i.directiveStart,M=h>>20,$=c?E+M:i.directiveEnd;for(let Q=l?E:E+M;Q<$;Q++){const ve=y[Q];if(Q<I&&a===ve||Q>=I&&ve.type===a)return Q}if(c){const Q=y[I];if(Q&&ci(Q)&&Q.type===a)return I}return null}function os(i,s,a,l){let c=i[a];const h=s.data;if(function dc(i){return i instanceof Ao}(c)){const y=c;y.resolving&&function qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(De(h[a]));const E=Ts(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?ln(y.injectImpl):null;aa(i,l,pt.Default);try{c=i[a]=y.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function lc(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(l){const y=ta(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&ln(I),Ts(E),y.resolving=!1,Ka()}}return c}function ha(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function zu(i,s){return!(i&pt.Self||i&pt.Host&&s)}class ur{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Xs(this._tNode,this._lView,s,l,a)}}function eu(i){return Er(()=>{const s=i.prototype.constructor,a=s[be]||Mo(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const h=c[be]||Mo(c);if(h&&h!==a)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Mo(i){return Ue(i)?()=>{const s=Mo(te(i));return s&&s()}:di(i)}function Ss(i){return function hc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const h=a[c];if(Ya(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(h===s)return a[c+1];c+=2}}}return null}(_n(),i)}const xs="__parameters__";function Ro(i,s,a){return Er(()=>{const l=function Wu(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...h){if(this instanceof c)return l.apply(this,h),this;const y=new c(...h);return E.annotation=y,E;function E(I,T,M){const F=I.hasOwnProperty(xs)?I[xs]:Object.defineProperty(I,xs,{value:[]})[xs];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(y),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const mc=new Dn("AnalyzeForEntryComponents");function Ur(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Ur(l,s)):s!==i&&s.push(l)}return s}function pr(i,s){i.forEach(a=>Array.isArray(a)?pr(a,s):s(a))}function No(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function eo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Cr(i,s,a){let l=to(i,s);return l>=0?i[1|l]=a:(l=~l,function Zd(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function nu(i,s){const a=to(i,s);if(a>=0)return i[1|a]}function to(i,s){return function ma(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const h=l+(c-l>>1),y=i[h<<a];if(s===y)return h<<a;y>s?c=h:l=h+1}return~(c<<a)}(i,s,1)}const gr={},va="__NG_DI_FLAG__",Bi="ngTempTokenPath",Yd=/\n/gm,Ic="__source",ip=ge({provide:String,useValue:ge});let Po;function D(i){const s=Po;return Po=i,s}function C(i,s=pt.Default){if(void 0===Po)throw new Pe(203,"");return null===Po?hr(i,void 0,s):Po.get(i,s&pt.Optional?null:void 0,s)}function S(i,s=pt.Default){return(function gn(){return dr}()||C)(te(i),s)}const Y=S;function re(i){const s=[];for(let a=0;a<i.length;a++){const l=te(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Pe(900,"");let c,h=pt.Default;for(let y=0;y<l.length;y++){const E=l[y],I=Ze(E);"number"==typeof I?-1===I?c=E.token:h|=I:c=E}s.push(S(c,h))}else s.push(S(l))}return s}function Te(i,s){return i[va]=s,i.prototype[va]=s,i}function Ze(i){return i[va]}const bt=Te(Ro("Inject",i=>({token:i})),-1),it=Te(Ro("Optional"),8),tr=Te(Ro("SkipSelf"),4);var io=(()=>((io=io||{})[io.Important=1]="Important",io[io.DashCase=2]="DashCase",io))();const Ea="__ngContext__";function zn(i,s){i[Ea]=s}function Dc(i){const s=function Ju(i){return i[Ea]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Tc(i,s){return undefined(i,s)}function wa(i){const s=i[3];return li(s)?s[3]:s}function xc(i){return eh(i[13])}function Mc(i){return eh(i[4])}function eh(i){for(;null!==i&&!li(i);)i=i[4];return i}function v(i,s,a,l,c){if(null!=l){let h,y=!1;li(l)?h=l:wi(l)&&(y=!0,l=l[0]);const E=hn(l);0===i&&null!==a?null==c?tl(s,a,E):so(s,a,E,c||null,!0):1===i&&null!==a?so(s,a,E,c||null,!0):2===i?function Mm(i,s,a){const l=uu(i,s);l&&function ih(i,s,a,l){mn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,y):3===i&&s.destroyNode(E),null!=h&&function Tt(i,s,a,l,c){const h=a[7];h!==hn(a)&&v(s,i,l,h,c);for(let E=10;E<a.length;E++){const I=a[E];fp(I[1],I,i,s,l,h)}}(s,i,h,a,c)}}function x(i,s,a){if(mn(i))return i.createElement(s,a);{const l=null!==a?function Ha(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function Tn(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ds(c,-1)),a.splice(l,1)}function Ci(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&Tn(c,l),s>0&&(i[a-1][4]=l[4]);const h=eo(i,10+s);!function P(i,s){fp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=h[19];null!==y&&y.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Xr(i,s){if(!(256&s[2])){const a=s[11];mn(a)&&a.destroyNode&&fp(i,s,a,3,null,null),function et(i){let s=i[13];if(!s)return au(i[1],i);for(;s;){let a=null;if(wi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)wi(s)&&au(s[1],s),s=s[3];null===s&&(s=i),wi(s)&&au(s[1],s),a=s&&s[4]}s=a}}(s)}}function au(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function nh(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Ao)){const h=a[l+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const E=c[h[y]],I=h[y+1];try{I.call(E)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function th(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+1],E="function"==typeof y?y(s):hn(s[y]),I=l[c=a[h+2]],T=a[h+3];"boolean"==typeof T?E.removeEventListener(a[h],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),h+=2}else{const y=l[c=a[h+1]];a[h].call(y)}if(null!==l){for(let h=c+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&mn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&li(s[3])){a!==s[3]&&Tn(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Rc(i,s,a){return function rh(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===qt.None||c===qt.Emulated)return null}return Jn(l,a)}(i,s.parent,a)}function so(i,s,a,l,c){mn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function tl(i,s,a){mn(i)?i.appendChild(s,a):s.appendChild(a)}function Nc(i,s,a,l,c){null!==l?so(i,s,a,l,c):tl(i,s,a)}function uu(i,s){return mn(i)?i.parentNode(s):s.parentNode}let bm=function hp(i,s,a){return 40&i.type?Jn(i,a):null};function Am(i,s,a,l){const c=Rc(i,l,s),h=s[11],E=function nl(i,s,a){return bm(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Nc(h,c,a[I],E,!1);else Nc(h,c,a,E,!1)}function Sm(i,s){if(null!==s){const a=s.type;if(3&a)return Jn(s,i);if(4&a)return xm(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Sm(i,l);{const c=i[s.index];return li(c)?xm(-1,c):hn(c)}}if(32&a)return Tc(s,i)()||hn(i[s.index]);{const l=HI(i,s);return null!==l?Array.isArray(l)?l[0]:Sm(wa(i[16]),l):Sm(i,s.next)}}return null}function HI(i,s){return null!==s?i[16][6].projection[s.projection]:null}function xm(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Sm(l,c)}return s[7]}function M_(i,s,a,l,c,h,y){for(;null!=a;){const E=l[a.index],I=a.type;if(y&&0===s&&(E&&zn(hn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)M_(i,s,a.child,l,c,h,!1),v(s,i,c,E,h);else if(32&I){const T=Tc(a,l);let M;for(;M=T();)v(s,i,c,M,h);v(s,i,c,E,h)}else 16&I?GI(i,s,l,a,c,h):v(s,i,c,E,h);a=y?a.projectionNext:a.next}}function fp(i,s,a,l,c,h){M_(a,l,i.firstChild,s,c,h,!1)}function GI(i,s,a,l,c,h){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)v(s,i,c,I[T],h);else M_(i,s,I,y[3],c,h,!0)}function Ps(i,s,a){mn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function rl(i,s,a){mn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}class cu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Lo(i){return i instanceof cu?i.changingThisBreaksApplicationSecurity:i}const KI=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,cs=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var mr=(()=>((mr=mr||{})[mr.NONE=0]="NONE",mr[mr.HTML=1]="HTML",mr[mr.STYLE=2]="STYLE",mr[mr.SCRIPT=3]="SCRIPT",mr[mr.URL=4]="URL",mr[mr.RESOURCE_URL=5]="RESOURCE_URL",mr))();function Ip(i){const s=function oh(){const i=xe();return i&&i[12]}();return s?s.sanitize(mr.URL,i)||"":function du(i,s){const a=function WI(i){return i instanceof cu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Lo(i):function _p(i){return(i=String(i)).match(KI)||i.match(cs)?i:"unsafe:"+i}(pe(i))}function bp(i){return i.ngOriginalError}function ul(i,...s){i.error(...s)}class Wt{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Cp(i){return i&&i.ngErrorLogger||ul}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&bp(s);for(;a&&bp(a);)a=bp(a);return a||null}}const oD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(zt))();function jo(i){return i instanceof Function?i():i}function W_(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===l||i.charCodeAt(c+h)<=32)return c}a=c+1}}const Z_="ng-template";function Ap(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==W_(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function K_(i){return 4===i.type&&i.value!==Z_}function uD(i,s,a){return s===(4!==i.type||a?i.value:Z_)}function lD(i,s,a){let l=4;const c=i.attrs||[],h=function Gm(i){for(let s=0;s<i.length;s++)if(Ya(i[s]))return s;return i.length}(c);let y=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!uD(i,I,a)||""===I&&1===s.length){if(oo(l))return!1;y=!0}}else{const T=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!Ap(i.attrs,T,a)){if(oo(l))return!1;y=!0}continue}const F=cD(8&l?"class":I,c,K_(i),a);if(-1===F){if(oo(l))return!1;y=!0;continue}if(""!==T){let $;$=F>h?"":c[F+1].toLowerCase();const Q=8&l?$:null;if(Q&&-1!==W_(Q,T,0)||2&l&&T!==$){if(oo(l))return!1;y=!0}}}}else{if(!y&&!oo(l)&&!oo(I))return!1;if(y&&oo(I))continue;y=!1,l=I|1&l}}return oo(l)||y}function oo(i){return 0==(1&i)}function cD(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let h=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)h=!0;else{if(1===y||2===y){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=h?1:2}return-1}return function ba(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function $m(i,s,a=!1){for(let l=0;l<s.length;l++)if(lD(i,s[l],a))return!0;return!1}function qm(i,s){return i?":not("+s.trim()+")":s}function Y_(i){let s=i[0],a=1,l=2,c="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const E=i[++a];c+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+y:4&l&&(c+=" "+y);else""!==c&&!oo(y)&&(s+=qm(h,c),c=""),l=y,h=h||!oo(l);a++}return""!==c&&(s+=qm(h,c)),s}const St={};function Q_(i){lh($t(),xe(),fr()+i,!1)}function lh(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&la(s,h,a)}else{const h=i.preOrderHooks;null!==h&&ca(s,h,0,a)}Cs(a)}function Lc(i,s){return i<<17|s<<2}function Fs(i){return i>>17&32767}function Zm(i){return 2|i}function ds(i){return(131068&i)>>2}function Km(i,s){return-131069&i|s<<2}function Ym(i){return 1|i}function a0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],h=a[l+1];if(-1!==h){const y=i.data[h];oc(c),y.contentQueries(2,s[h],h)}}}function gh(i,s,a,l,c,h,y,E,I,T){const M=s.blueprint.slice();return M[0]=c,M[2]=140|l,Is(M),M[3]=M[15]=i,M[8]=a,M[10]=y||i&&i[10],M[11]=E||i&&i[11],M[12]=I||i&&i[12]||null,M[9]=T||i&&i[9]||null,M[6]=h,M[16]=2==s.type?i[16]:M,M}function Ca(i,s,a,l,c){let h=i.data[s];if(null===h)h=function kp(i,s,a,l,c){const h=tc(),y=Fu(),I=i.data[s]=function ED(i,s,a,l,c,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==h&&(y?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,l,c),function Ud(){return yt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=c;const y=function es(){const i=yt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return Fi(h,!0),h}function dl(i,s,a,l){if(0===a)return-1;const c=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function fu(i,s,a){ua(s);try{const l=i.viewQuery;null!==l&&hy(1,l,a);const c=i.template;null!==c&&iy(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&a0(i,s),i.staticViewQueries&&hy(2,i.viewQuery,a);const h=i.components;null!==h&&function vD(i,s){for(let a=0;a<s.length;a++)OD(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Qr()}}function hl(i,s,a,l){const c=s[2];if(256!=(256&c)){ua(s);try{Is(s),function Do(i){return yt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&iy(i,s,a,2,l);const y=3==(3&c);if(y){const T=i.preOrderCheckHooks;null!==T&&la(s,T,null)}else{const T=i.preOrderHooks;null!==T&&ca(s,T,0,null),Xn(s,0)}if(function E0(i){for(let s=xc(i);null!==s;s=Mc(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],h=c[3];0==(1024&c[2])&&Ds(h,1),c[2]|=1024}}}(s),function RD(i){for(let s=xc(i);null!==s;s=Mc(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];ki(l)&&hl(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&a0(i,s),y){const T=i.contentCheckHooks;null!==T&&la(s,T)}else{const T=i.contentHooks;null!==T&&ca(s,T,1),Xn(s,1)}!function Pp(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Cs(~c);else{const h=c,y=a[++l],E=a[++l];ic(y,h),E(2,s[h])}}}finally{Cs(-1)}}(i,s);const E=i.components;null!==E&&function yD(i,s){for(let a=0;a<s.length;a++)ND(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&hy(2,I,l),y){const T=i.viewCheckHooks;null!==T&&la(s,T)}else{const T=i.viewHooks;null!==T&&ca(s,T,2),Xn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Ds(s[3],-1))}finally{Qr()}}}function mh(i,s,a,l){const c=s[10],y=wo(s);try{!y&&c.begin&&c.begin(),y&&fu(i,s,l),hl(i,s,a,l)}finally{!y&&c.end&&c.end()}}function iy(i,s,a,l,c){const h=fr(),y=2&l;try{Cs(-1),y&&s.length>20&&lh(i,s,20,!1),a(l,c)}finally{Cs(h)}}function sy(i,s,a){!Io()||(function CD(i,s,a,l){const c=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||ar(a,s),zn(l,s);const y=a.initialInputs;for(let E=c;E<h;E++){const I=i.data[E],T=ci(I);T&&y0(s,a,I);const M=os(s,i,E,a);zn(M,s),null!==y&&v0(0,E-c,M,I,0,y),T&&(sr(a.index,s)[8]=M)}}(i,s,a,Jn(a,s)),128==(128&a.flags)&&function p0(i,s,a){const l=a.directiveStart,c=a.directiveEnd,y=a.index,E=function oa(){return yt.lFrame.currentDirectiveIndex}();try{Cs(y);for(let I=l;I<c;I++){const T=i.data[I],M=s[I];Lu(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&g0(T,M)}}finally{Cs(-1),Lu(E)}}(i,s,a))}function oy(i,s,a=Jn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let h=0;h<l.length;h+=2){const y=l[h+1],E=-1===y?a(s,i):i[y];i[c++]=E}}}function l0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Fp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Fp(i,s,a,l,c,h,y,E,I,T){const M=20+l,F=M+c,$=function ay(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:St);return a}(M,F),Q="function"==typeof T?T():T;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:E,declTNode:s,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function d0(i,s,a,l){const c=D0(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&fy(i).push(l,c.length-1))}function vh(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function uy(i,s,a,l){let c=!1;if(Io()){const h=function TD(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let h=0;h<l.length;h++){const y=l[h];$m(a,y.selectors,!1)&&(c||(c=[]),As(ar(a,s),i,y.type),ci(y)?(m0(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===l?null:{"":-1};if(null!==h){c=!0,ly(a,i.data.length,h.length);for(let M=0;M<h.length;M++){const F=h[M];F.providersResolver&&F.providersResolver(F)}let E=!1,I=!1,T=dl(i,s,h.length,null);for(let M=0;M<h.length;M++){const F=h[M];a.mergedAttrs=So(a.mergedAttrs,F.hostAttrs),xD(i,a,s,T,F),SD(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const $=F.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function wD(i,s){const l=s.directiveEnd,c=i.data,h=s.attrs,y=[];let E=null,I=null;for(let T=s.directiveStart;T<l;T++){const M=c[T],F=M.inputs,$=null===h||K_(s)?null:MD(F,h);y.push($),E=vh(F,T,E),I=vh(M.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=E,s.outputs=I}(i,a)}y&&function AD(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=a[s[c+1]];if(null==h)throw new Pe(-301,!1);l.push(s[c],h)}}}(a,l,y)}return a.mergedAttrs=So(a.mergedAttrs,a.attrs),c}function f0(i,s,a,l,c,h){const y=h.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function bD(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,y)}}function g0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function m0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function SD(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;ci(s)&&(a[""]=i)}}function ly(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function xD(i,s,a,l,c){i.data[l]=c;const h=c.factory||(c.factory=di(c.type)),y=new Ao(h,ci(c),null);i.blueprint[l]=y,a[l]=y,f0(i,s,0,l,dl(i,a,c.hostVars,St),c)}function y0(i,s,a){const l=Jn(s,i),c=l0(a),h=i[10],y=Vp(i,gh(i,c,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=y}function ao(i,s,a,l,c,h){const y=Jn(i,s);!function Lp(i,s,a,l,c,h,y){if(null==h)mn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==y?pe(h):y(h,l||"",c);mn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],y,h,i.value,a,l,c)}function v0(i,s,a,l,c,h){const y=h[s];if(null!==y){const E=l.setInput;for(let I=0;I<y.length;){const T=y[I++],M=y[I++],F=y[I++];null!==E?l.setInput(a,F,T,M):a[M]=F}}}function MD(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function _0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function ND(i,s){const a=sr(s,i);if(ki(a)){const l=a[1];80&a[2]?hl(l,a,l.template,a[8]):a[5]>0&&wh(a)}}function wh(i){for(let l=xc(i);null!==l;l=Mc(l))for(let c=10;c<l.length;c++){const h=l[c];if(1024&h[2]){const y=h[1];hl(y,h,y.template,h[8])}else h[5]>0&&wh(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=sr(a[l],i);ki(c)&&c[5]>0&&wh(c)}}function OD(i,s){const a=sr(s,i),l=a[1];(function PD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),fu(l,a,a[8])}function Vp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Ih(i){for(;i;){i[2]|=64;const s=wa(i);if(Pd(i)&&!s)return i;i=s}return null}function I0(i){!function cy(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Dc(a),c=l[1];mh(c,l,c.template,a)}}(i[8])}function hy(i,s,a){oc(0),s(i,a)}const fi=(()=>Promise.resolve(null))();function D0(i){return i[7]||(i[7]=[])}function fy(i){return i.cleanup||(i.cleanup=[])}function Dh(i,s){const a=i[9],l=a?a.get(Wt,null):null;l&&l.handleError(s)}function fl(i,s,a,l,c){for(let h=0;h<a.length;){const y=a[h++],E=a[h++],I=s[y],T=i.data[y];null!==T.setInput?T.setInput(I,c,l,E):I[E]=c}}function Ta(i,s,a){const l=zs(s,i);!function m(i,s,a){mn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Up(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const E=s[y];"number"==typeof E?h=E:1==h?c=me(c,E):2==h&&(l=me(l,E+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Bp=new Dn("INJECTOR",-1);class jp{get(s,a=gr){if(a===gr){const l=new Error(`NullInjectorError: No provider for ${oe(s)}!`);throw l.name="NullInjectorError",l}return a}}const C0=new Dn("Set Injector scope."),uo={},T0={};let py;function A0(){return void 0===py&&(py=new jp),py}function gy(i,s=null,a=null,l){const c=S0(i,s,a,l);return c._resolveInjectorDefTypes(),c}function S0(i,s=null,a=null,l){return new VD(i,a,s||A0(),l)}class VD{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&pr(a,E=>this.processProvider(E,s,a)),pr([s],E=>this.processInjectorType(E,[],h)),this.records.set(Bp,jc(void 0,this));const y=this.records.get(C0);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof s?null:oe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=gr,l=pt.Default){this.assertNotDestroyed();const c=D(this),h=ln(void 0);try{if(!(l&pt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function GD(i){return"function"==typeof i||"object"==typeof i&&i instanceof Dn}(s)&&bn(s);E=I&&this.injectableDefInScope(I)?jc(my(s),uo):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&pt.Self?A0():this.parent).get(s,a=l&pt.Optional&&a===gr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Bi]=y[Bi]||[]).unshift(oe(s)),c)throw y;return function ht(i,s,a,l){const c=i[Bi];throw s[Ic]&&c.unshift(s[Ic]),i.message=function wt(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=oe(s);if(Array.isArray(s))c=s.map(oe).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let E=s[y];h.push(y+":"+("string"==typeof E?JSON.stringify(E):oe(E)))}c=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(Yd,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Bi]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{ln(h),D(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(oe(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(s,a,l){if(!(s=te(s)))return!1;let c=qi(s);const h=null==c&&s.ngModule||void 0,y=void 0===h?s:h,E=-1!==l.indexOf(y);if(void 0!==h&&(c=qi(h)),null==c)return!1;if(null!=c.imports&&!E){let M;l.push(y);try{pr(c.imports,F=>{this.processInjectorType(F,a,l)&&(void 0===M&&(M=[]),M.push(F))})}finally{}if(void 0!==M)for(let F=0;F<M.length;F++){const{ngModule:$,providers:Q}=M[F];pr(Q,ve=>this.processProvider(ve,$,Q||dt))}}this.injectorDefTypes.add(y);const I=di(y)||(()=>new y);this.records.set(y,jc(I,uo));const T=c.providers;if(null!=T&&!E){const M=s;pr(T,F=>this.processProvider(F,M,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let c=pl(s=te(s))?s:te(s&&s.provide);const h=function UD(i,s,a){return $p(i)?jc(void 0,i.useValue):jc(M0(i),uo)}(s);if(pl(s)||!0!==s.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=jc(void 0,uo,!0),y.factory=()=>re(y.multi),this.records.set(c,y)),c=s,y.multi.push(s)}this.records.set(c,h)}hydrate(s,a){return a.value===uo&&(a.value=T0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function HD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=te(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function my(i){const s=bn(i),a=null!==s?s.factory:di(i);if(null!==a)return a;if(i instanceof Dn)throw new Pe(204,!1);if(i instanceof Function)return function x0(i){const s=i.length;if(s>0)throw function Rs(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Pe(204,!1);const a=function qr(i){const s=i&&(i[_i]||i[Vn]);if(s){const a=function Sn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Pe(204,!1)}function M0(i,s,a){let l;if(pl(i)){const c=te(i);return di(c)||my(c)}if($p(i))l=()=>te(i.useValue);else if(function jD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...re(i.deps||[]));else if(function BD(i){return!(!i||!i.useExisting)}(i))l=()=>S(te(i.useExisting));else{const c=te(i&&(i.useClass||i.provide));if(!function BA(i){return!!i.deps}(i))return di(c)||my(c);l=()=>new c(...re(i.deps))}return l}function jc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function $p(i){return null!==i&&"object"==typeof i&&ip in i}function pl(i){return"function"==typeof i}let Ht=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return gy({name:""},l,a,"");{const h=null!==(c=a.name)&&void 0!==c?c:"";return gy({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=gr,i.NULL=new jp,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>S(Bp)}),i.__NG_ELEMENT_ID__=-1,i})();function HA(i,s){ts(Dc(i)[1],_n())}function F0(i){let s=function XD(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(ci(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Pe(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const y=i;y.inputs=Th(i.inputs),y.declaredInputs=Th(i.declaredInputs),y.outputs=Th(i.outputs);const E=c.hostBindings;E&&ni(i,E);const I=c.viewQuery,T=c.contentQueries;if(I&&L0(i,I),T&&eb(i,T),fe(i.inputs,c.inputs),fe(i.declaredInputs,c.declaredInputs),fe(i.outputs,c.outputs),ci(c)&&c.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let y=0;y<h.length;y++){const E=h[y];E&&E.ngInherit&&E(i),E===F0&&(a=!1)}}s=Object.getPrototypeOf(s)}!function we(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=So(c.hostAttrs,a=So(a,c.hostAttrs))}}(l)}function Th(i){return i===fn?{}:i===dt?[]:i}function L0(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function eb(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,h)=>{s(l,c,h),a(l,c,h)}:s}function ni(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let qp=null;function $c(){if(!qp){const i=zt.Symbol;if(i&&i.iterator)qp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(qp=l)}}}return qp}function Hc(i){return!!Ey(i)&&(Array.isArray(i)||!(i instanceof Map)&&$c()in i)}function Ey(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Sr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ah(i,s,a,l){const c=xe();return Sr(c,bo(),s)&&($t(),ao(On(),c,i,s,a,l)),Ah}function Yc(i,s,a,l,c,h,y,E){const I=xe(),T=$t(),M=i+20,F=T.firstCreatePass?function $0(i,s,a,l,c,h,y,E,I){const T=s.consts,M=Ca(s,i,4,y||null,Kr(T,E));uy(s,a,M,Kr(T,I)),ts(s,M);const F=M.tViews=Fp(2,M,l,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),F.queries=s.queries.embeddedTView(M)),M}(M,T,I,s,a,l,c,h,y):T.data[M];Fi(F,!1);const $=I[11].createComment("");Am(T,I,$,F),zn($,I),Vp(I,I[M]=_0($,I,$,F)),_s(F)&&sy(T,I,F),null!=y&&oy(I,F,E)}function Xp(i,s=pt.Default){const a=xe();return null===a?S(i,s):Xs(_n(),a,te(i),s)}function eg(){throw new Error("invalid")}function Q0(i,s,a){const l=xe();return Sr(l,bo(),s)&&function hs(i,s,a,l,c,h,y,E){const I=Jn(s,a);let M,T=s.inputs;!E&&null!=T&&(M=T[l])?(fl(i,a,M,l,c),Ba(s)&&function ID(i,s){const a=sr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function _h(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=y?y(c,s.value||"",l):c,mn(h)?h.setProperty(I,l,c):Hu(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}($t(),On(),l,i,s,l[11],a,!1),Q0}function Ny(i,s,a,l,c){const y=c?"class":"style";fl(i,a,s.inputs[y],y,l)}function tg(i,s,a,l){const c=xe(),h=$t(),y=20+i,E=c[11],I=c[y]=x(E,s,function Qf(){return yt.lFrame.currentNamespace}()),T=h.firstCreatePass?function J0(i,s,a,l,c,h,y){const E=s.consts,T=Ca(s,i,2,c,Kr(E,h));return uy(s,a,T,Kr(E,y)),null!==T.attrs&&Up(T,T.attrs,!1),null!==T.mergedAttrs&&Up(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,h,c,0,s,a,l):h.data[y];Fi(T,!0);const M=T.mergedAttrs;null!==M&&$u(E,I,M);const F=T.classes;null!==F&&rl(E,I,F);const $=T.styles;return null!==$&&Ps(E,I,$),64!=(64&T.flags)&&Am(h,c,I,T),0===function Xl(){return yt.lFrame.elementDepthCount}()&&zn(I,c),function ia(){yt.lFrame.elementDepthCount++}(),_s(T)&&(sy(h,c,T),function u0(i,s,a){if(Hl(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}(h,T,c)),null!==l&&oy(c,T),tg}function Rh(){let i=_n();Fu()?function sa(){yt.lFrame.isParent=!1}():(i=i.parent,Fi(i,!1));const s=i;!function ec(){yt.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(ts(a,i),Hl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Xf(i){return 0!=(16&i.flags)}(s)&&Ny(a,s,xe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function xn(i){return 0!=(32&i.flags)}(s)&&Ny(a,s,xe(),s.stylesWithoutHost,!1),Rh}function Nh(i,s,a,l){return tg(i,s,a,l),Rh(),Nh}function _b(){return xe()}function Oy(i){return!!i&&"function"==typeof i.then}function nE(i){return!!i&&"function"==typeof i.subscribe}const Eb=nE;function rE(i,s,a,l){const c=xe(),h=$t(),y=_n();return function wb(i,s,a,l,c,h,y,E){const I=_s(l),M=i.firstCreatePass&&fy(i),F=s[8],$=D0(s);let Q=!0;if(3&l.type||E){const Ye=Jn(l,s),ot=E?E(Ye):Ye,Me=$.length,vt=E?Qt=>E(hn(Qt[l.index])):l.index;if(mn(a)){let Qt=null;if(!E&&I&&(Qt=function ZA(i,s,a,l){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const y=c[h];if(y===a&&c[h+1]===l){const E=s[7],I=c[h+2];return E.length>I?E[I]:null}"string"==typeof y&&(h+=2)}return null}(i,s,c,l.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=h,Qt.__ngLastListenerFn__=h,Q=!1;else{h=sE(l,s,F,h,!1);const yn=a.listen(ot,c,h);$.push(h,yn),M&&M.push(c,vt,Me,Me+1)}}else h=sE(l,s,F,h,!0),ot.addEventListener(c,h,y),$.push(h),M&&M.push(c,vt,Me,y)}else h=sE(l,s,F,h,!1);const ve=l.outputs;let Ve;if(Q&&null!==ve&&(Ve=ve[c])){const Ye=Ve.length;if(Ye)for(let ot=0;ot<Ye;ot+=2){const gs=s[Ve[ot]][Ve[ot+1]].subscribe(h),Ll=$.length;$.push(h,gs),M&&M.push(c,l.index,Ll,-(Ll+1))}}}(h,c,c[11],y,i,s,!!a,l),rE}function Ib(i,s,a,l){try{return!1!==a(l)}catch(c){return Dh(i,c),!1}}function sE(i,s,a,l,c){return function h(y){if(y===Function)return l;const E=2&i.flags?sr(i.index,s):s;0==(32&s[2])&&Ih(E);let I=Ib(s,0,l,y),T=h.__ngNextListenerFn__;for(;T;)I=Ib(s,0,T,y)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Db(i=1){return function jd(i){return(yt.lFrame.contextLView=function Uu(i,s){for(;i>0;)s=s[15],i--;return s}(i,yt.lFrame.contextLView))[8]}(i)}function uE(i,s,a,l,c){const h=i[a+1],y=null===s;let E=l?Fs(h):ds(h),I=!1;for(;0!==E&&(!1===I||y);){const M=i[E+1];QA(i[E],s)&&(I=!0,i[E+1]=l?Ym(M):Zm(M)),E=l?Fs(M):ds(M)}I&&(i[a+1]=l?Zm(h):Ym(h))}function QA(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&to(i,s)>=0}function Mr(i,s){return function Us(i,s,a,l){const c=xe(),h=$t(),y=function Yr(i){const s=yt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function Vh(i,s,a,l){const c=i.data;if(null===c[a+1]){const h=c[fr()],y=function fE(i,s){return s>=i.expandoStartIndex}(i,a);(function jh(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!y&&(s=!1),s=function pE(i,s,a,l){const c=function To(i){const s=yt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Bh(a=Uh(null,i,s,a,l),s.attrs,l),h=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=Uh(c,i,s,a,l),null===h){let I=function jy(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ds(l))return i[Fs(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Uh(null,i,s,I[1],l),I=Bh(I,s.attrs,l),function sg(i,s,a,l){i[Fs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else h=function qo(i,s,a){let l;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)l=Bh(l,i[h].hostAttrs,a);return Bh(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(c,h,s,l),function Uy(i,s,a,l,c,h){let y=h?s.classBindings:s.styleBindings,E=Fs(y),I=ds(y);i[l]=a;let M,T=!1;if(Array.isArray(a)){const F=a;M=F[1],(null===M||to(F,M)>0)&&(T=!0)}else M=a;if(c)if(0!==I){const $=Fs(i[E+1]);i[l+1]=Lc($,E),0!==$&&(i[$+1]=Km(i[$+1],l)),i[E+1]=function Wm(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Lc(E,0),0!==E&&(i[E+1]=Km(i[E+1],l)),E=l;else i[l+1]=Lc(I,0),0===E?E=l:i[I+1]=Km(i[I+1],l),I=l;T&&(i[l+1]=Zm(i[l+1])),uE(i,M,l,!0),uE(i,M,l,!1),function Tb(i,s,a,l,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&to(h,s)>=0&&(a[l+1]=Ym(a[l+1]))}(s,M,i,l,h),y=Lc(E,I),h?s.classBindings=y:s.styleBindings=y}(c,h,s,a,y,l)}}(h,i,y,l),s!==St&&Sr(c,y,s)&&function og(i,s,a,l,c,h,y,E){if(!(3&s.type))return;const I=i.data,T=I[E+1];ag(function J_(i){return 1==(1&i)}(T)?$y(I,s,a,c,ds(T),y):void 0)||(ag(h)||function Sp(i){return 2==(2&i)}(T)&&(h=$y(I,null,a,c,E,y)),function lu(i,s,a,l,c){const h=mn(i);if(s)c?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:io.DashCase;if(null==c)h?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),y|=io.Important),h?i.setStyle(a,l,c,y):a.style.setProperty(l,c,E?"important":"")}}}(l,y,zs(fr(),a),c,h))}(h,h.data[fr()],c,c[11],i,c[y+1]=function mE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=oe(Lo(i)))),i}(s,a),l,y)}(i,s,null,!0),Mr}function Uh(i,s,a,l,c){let h=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(h=s[E],l=Bh(l,h.hostAttrs,c),h!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Bh(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?c=y:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Cr(i,y,!!a||s[++h]))}return void 0===i?null:i}function $y(i,s,a,l,c,h){const y=null===s;let E;for(;c>0;){const I=i[c],T=Array.isArray(I),M=T?I[1]:I,F=null===M;let $=a[c+1];$===St&&($=F?dt:void 0);let Q=F?nu($,l):M===l?$:void 0;if(T&&!ag(Q)&&(Q=nu(I,l)),ag(Q)&&(E=Q,y))return E;const ve=i[c+1];c=y?Fs(ve):ds(ve)}if(null!==s){let I=h?s.residualClasses:s.residualStyles;null!=I&&(E=nu(I,l))}return E}function ag(i){return void 0!==i}function ug(i,s=""){const a=xe(),l=$t(),c=i+20,h=l.firstCreatePass?Ca(l,c,1,s,null):l.data[c],y=a[c]=function f(i,s){return mn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Am(l,a,y,h),Fi(h,!1)}function $h(i){return Hh("",i,""),$h}function Hh(i,s,a){const l=xe(),c=function qc(i,s,a,l){return Sr(i,bo(),a)?s+pe(a)+l:St}(l,i,s,a);return c!==St&&Ta(l,fr(),c),Hh}const yu=void 0;var kb=["en",[["a","p"],["AM","PM"],yu],[["AM","PM"],yu,yu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yu,"{1} 'at' {0}",yu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pb(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let yl={};function Qy(i){const s=function ev(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=OE(s);if(a)return a;const l=s.split("-")[0];if(a=OE(l),a)return a;if("en"===l)return kb;throw new Error(`Missing locale data for the locale "${i}".`)}function Jy(i){return Qy(i)[_t.PluralCase]}function OE(i){return i in yl||(yl[i]=zt.ng&&zt.ng.common&&zt.ng.common.locales&&zt.ng.common.locales[i]),yl[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const vu="en-US";let FE=vu;function Ag(i,s,a,l,c){if(i=te(i),Array.isArray(i))for(let h=0;h<i.length;h++)Ag(i[h],s,a,l,c);else{const h=$t(),y=xe();let E=pl(i)?i:te(i.provide),I=M0(i);const T=_n(),M=1048575&T.providerIndexes,F=T.directiveStart,$=T.providerIndexes>>20;if(pl(i)||!i.multi){const Q=new Ao(I,c,Xp),ve=dv(E,s,c?M:M+$,F);-1===ve?(As(ar(T,y),h,E),Il(h,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Q),y.push(Q)):(a[ve]=Q,y[ve]=Q)}else{const Q=dv(E,s,M+$,F),ve=dv(E,s,M,M+$),Ve=Q>=0&&a[Q],Ye=ve>=0&&a[ve];if(c&&!Ye||!c&&!Ve){As(ar(T,y),h,E);const ot=function Wb(i,s,a,l,c){const h=new Ao(i,a,Xp);return h.multi=[],h.index=s,h.componentProviders=0,id(h,c,l&&!a),h}(c?aw:nr,a.length,c,l,I);!c&&Ye&&(a[ve].providerFactory=ot),Il(h,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(ot),y.push(ot)}else Il(h,i,Q>-1?Q:ve,id(a[c?ve:Q],I,!c&&l));!c&&l&&Ye&&a[ve].componentProviders++}}}function Il(i,s,a,l){const c=pl(s),h=function $D(i){return!!i.useClass}(s);if(c||h){const I=(h?te(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,I]):T[M+1].push(l,I)}else T.push(a,I)}}}function id(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function dv(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function nr(i,s,a,l){return hv(this.multi,[])}function aw(i,s,a,l){const c=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=os(a,a[1],this.providerFactory.index,l);h=E.slice(0,y),hv(c,h);for(let I=y;I<E.length;I++)h.push(E[I])}else h=[],hv(c,h);return h}function hv(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function uw(i,s=[]){return a=>{a.providersResolver=(l,c)=>function cv(i,s,a){const l=$t();if(l.firstCreatePass){const c=ci(i);Ag(a,l.data,l.blueprint,c,!0),Ag(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class fv{}class Oa{resolveComponentFactory(s){throw function cw(i){const s=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let af=(()=>{class i{}return i.NULL=new Oa,i})();function dw(){return Iu(_n(),xe())}function Iu(i,s){return new Pa(Jn(i,s))}let Pa=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=dw,i})();function hw(i){return i instanceof Pa?i.nativeElement:i}class uf{}let pw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Kb(){const i=xe(),a=sr(_n().index,i);return function Sg(i){return i[11]}(wi(a)?a:i)}(),i})(),gw=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class sd{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const pv=new sd("13.3.12"),xg={};function od(i,s,a,l,c=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(hn(h)),li(h))for(let E=10;E<h.length;E++){const I=h[E],T=I[1].firstChild;null!==T&&od(I[1],I,T,l)}const y=a.type;if(8&y)od(i,s,a.child,l);else if(32&y){const E=Tc(a,s);let I;for(;I=E();)l.push(I)}else if(16&y){const E=HI(s,a);if(Array.isArray(E))l.push(...E);else{const I=wa(s[16]);od(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Dl{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return od(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(li(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Ci(s,l),eo(a,l))}this._attachedToViewContainer=!1}Xr(this._lView[1],this._lView)}onDestroy(s){d0(this._lView[1],this._lView,null,s)}markForCheck(){Ih(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function dy(i,s,a){const l=s[10];l.begin&&l.begin();try{hl(i,s,i.template,a)}catch(c){throw Dh(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ae(i,s){fp(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=s}}class mw extends Dl{constructor(s){super(s),this._view=s}detectChanges(){I0(this._view)}checkNoChanges(){}get context(){return null}}class lf extends af{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Xe(s);return new Mg(a,this.ngModule)}}function gv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Mg extends fv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function dD(i){return i.map(Y_).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return gv(this.componentDef.inputs)}get outputs(){return gv(this.componentDef.outputs)}create(s,a,l,c){const h=(c=c||this.ngModule)?function bl(i,s){return{get:(a,l,c)=>{const h=i.get(a,xg,c);return h!==xg||l===xg?h:s.get(a,l,c)}}}(s,c.injector):s,y=h.get(uf,na),E=h.get(gw,null),I=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=l?function yh(i,s,a){if(mn(i))return i.selectRootElement(s,a===qt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):x(y.createRenderer(null,this.componentDef),T,function yw(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),F=this.componentDef.onPush?576:528,$=function JD(i,s){return{components:[],scheduler:i||oD,clean:fi,playerHandler:s||null,flags:0}}(),Q=Fp(0,null,null,1,0,null,null,null,null,null),ve=gh(null,Q,$,F,null,null,y,I,E,h);let Ve,Ye;ua(ve);try{const ot=function YD(i,s,a,l,c,h){const y=a[1];a[20]=i;const I=Ca(y,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(Up(I,T,!0),null!==i&&($u(c,i,T),null!==I.classes&&rl(c,i,I.classes),null!==I.styles&&Ps(c,i,I.styles)));const M=l.createRenderer(i,s),F=gh(a,l0(s),null,s.onPush?64:16,a[20],I,l,M,h||null,null);return y.firstCreatePass&&(As(ar(I,a),y,s.type),m0(y,I),ly(I,a.length,1)),Vp(a,F),a[20]=F}(M,this.componentDef,ve,y,I);if(M)if(l)$u(I,M,["ng-version",pv.full]);else{const{attrs:Me,classes:vt}=function Fc(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++l]):8===c&&a.push(h);else{if(!oo(c))break;c=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Me&&$u(I,M,Me),vt&&vt.length>0&&rl(I,M,vt.join(" "))}if(Ye=Nn(Q,20),void 0!==a){const Me=Ye.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const Qt=a[vt];Me.push(null!=Qt?Array.from(Qt):null)}}Ve=function QD(i,s,a,l,c){const h=a[1],y=function DD(i,s,a){const l=_n();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),xD(i,l,s,dl(i,s,1,null),a));const c=os(s,i,l.directiveStart,l);zn(c,s);const h=Jn(l,s);return h&&zn(h,s),c}(h,a,s);if(l.components.push(y),i[8]=y,c&&c.forEach(I=>I(y,s)),s.contentQueries){const I=_n();s.contentQueries(1,y,I.directiveStart)}const E=_n();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Cs(E.index),f0(a[1],E,0,E.directiveStart,E.directiveEnd,s),g0(s,y)),y}(ot,this.componentDef,ve,$,[HA]),fu(Q,ve,null)}finally{Qr()}return new _w(this.componentType,Ve,Iu(Ye,ve),ve,Ye)}}class _w extends class lw{}{constructor(s,a,l,c,h){super(),this.location=l,this._rootLView=c,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new mw(c),this.componentType=s}get injector(){return new ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Hr{}class mv{}const Cl=new Map;class yv extends Hr{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lf(this);const l=nt(s);this._bootstrapComponents=jo(l.bootstrap),this._r3Injector=S0(s,a,[{provide:Hr,useValue:this},{provide:af,useValue:this.componentFactoryResolver}],oe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Ht.THROW_IF_NOT_FOUND,l=pt.Default){return s===Ht||s===Hr||s===Bp?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class vv extends mv{constructor(s){super(),this.moduleType=s,null!==nt(s)&&function Qb(i){const s=new Set;!function a(l){const c=nt(l,!0),h=c.id;null!==h&&(function Ew(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${oe(s)} vs ${oe(s.name)}`)}(h,Cl.get(h),l),Cl.set(h,l));const y=jo(c.imports);for(const E of y)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new yv(this.moduleType,s)}}function Pg(i){return s=>{setTimeout(i,void 0,s)}}const zo=class rC extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,h,y;let E=s,I=a||(()=>null),T=l;if(s&&"object"==typeof s){const F=s;E=null===(c=F.next)||void 0===c?void 0:c.bind(F),I=null===(h=F.error)||void 0===h?void 0:h.bind(F),T=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(I=Pg(I),E&&(E=Pg(E)),T&&(T=Pg(T)));const M=super.subscribe({next:E,error:I,complete:T});return s instanceof j.w0&&s.add(M),M}};function tS(){return this._results[$c()]()}class Ev{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=$c(),l=Ev.prototype;l[a]||(l[a]=tS)}get changes(){return this._changes||(this._changes=new zo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Ur(s);(this._changesDetected=!function vc(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],h=s[l];if(a&&(c=a(c),h=a(h)),h!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ud=(()=>{class i{}return i.__NG_ELEMENT_ID__=Tw,i})();const Mt=ud,ld=class extends Mt{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=gh(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),fu(a,l,s),new Dl(l)}};function Tw(){return An(_n(),xe())}function An(i,s){return 4&i.type?new ld(s,i,Iu(i,s)):null}let Et=(()=>{class i{}return i.__NG_ELEMENT_ID__=hf,i})();function hf(){return ff(_n(),xe())}const sn=Et,Aw=class extends sn{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Iu(this._hostTNode,this._hostLView)}get injector(){return new ur(this._hostTNode,this._hostLView)}get parentInjector(){const s=Xa(this._hostTNode,this._hostLView);if(da(s)){const a=It(s,this._hostLView),l=tn(s);return new ur(a[1].data[l+8],a)}return new ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Wn(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,h){const y=s&&!function Pn(i){return"function"==typeof i}(s);let E;if(y)E=a;else{const F=a||{};E=F.index,l=F.injector,c=F.projectableNodes,h=F.ngModuleRef}const I=y?s:new Mg(Xe(s)),T=l||this.parentInjector;if(!h&&null==I.ngModule){const $=(y?T:this.parentInjector).get(Hr,null);$&&(h=$)}const M=I.create(T,c,void 0,h);return this.insert(M.hostView,E),M}insert(s,a){const l=s._lView,c=l[1];if(function ku(i){return li(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const F=l[3],$=new Aw(F,F[6],F[3]);$.detach($.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function ft(i,s,a,l){const c=10+l,h=a.length;l>0&&(a[c-1][4]=s),l<h-10?(s[4]=a[c],No(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function Lt(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,y,h);const E=xm(h,y),I=l[11],T=uu(I,y[7]);return null!==T&&function J(i,s,a,l,c,h){l[0]=c,l[6]=s,fp(i,l,a,1,c,h)}(c,y[6],I,l,T,E),s.attachToViewContainerRef(),No(Ke(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Wn(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Ci(this._lContainer,a);l&&(eo(Ke(this._lContainer),a),Xr(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Ci(this._lContainer,a);return l&&null!=eo(Ke(this._lContainer),a)?new Dl(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Wn(i){return i[8]}function Ke(i){return i[8]||(i[8]=[])}function ff(i,s){let a;const l=s[i.index];if(li(l))a=l;else{let c;if(8&i.type)c=hn(l);else{const h=s[11];c=h.createComment("");const y=Jn(i,s);so(h,uu(h,y),c,function Dm(i,s){return mn(i)?i.nextSibling(s):s.nextSibling}(h,y),!1)}s[i.index]=a=_0(l,s,c,i),Vp(s,a)}return new Aw(a,i,s)}class cd{constructor(s){this.queryList=s,this.matches=null}clone(){return new cd(this.queryList)}setDirty(){this.queryList.setDirty()}}class Iv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let h=0;h<l;h++){const y=a.getByIndex(h);c.push(this.queries[y.indexInDeclarationView].clone())}return new Iv(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==bv(s,a).matches&&this.queries[a].setDirty()}}class dd{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class kg{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,c);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new kg(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Fg{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Fg(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=l[c];this.matchTNodeWithReadOption(s,a,fs(a,h)),this.matchTNodeWithReadOption(s,a,pc(a,s,h,!1,!1))}else l===ud?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,pc(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Pa||c===Et||c===ud&&4&a.type)this.addMatch(a.index,-2);else{const h=pc(a,s,c,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function fs(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Sw(i,s,a,l){return-1===a?function Dv(i,s){return 11&i.type?Iu(i,s):4&i.type?An(i,s):null}(s,i):-2===a?function xw(i,s,a){return a===Pa?Iu(s,i):a===ud?An(s,i):a===Et?ff(s,i):void 0}(i,s,l):os(i,i[1],a,s)}function ka(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const h=i.data,y=a.matches,E=[];for(let I=0;I<y.length;I+=2){const T=y[I];E.push(T<0?null:Sw(s,h[T],y[I+1],a.metadata.read))}c.matches=E}return c.matches}function pf(i,s,a,l){const c=i.queries.getByIndex(a),h=c.matches;if(null!==h){const y=ka(i,s,c,a);for(let E=0;E<h.length;E+=2){const I=h[E];if(I>0)l.push(y[E/2]);else{const T=h[E+1],M=s[-I];for(let F=10;F<M.length;F++){const $=M[F];$[17]===$[3]&&pf($[1],$,T,l)}if(null!==M[9]){const F=M[9];for(let $=0;$<F.length;$++){const Q=F[$];pf(Q[1],Q,T,l)}}}}}return l}function ue(i){const s=xe(),a=$t(),l=sc();oc(l+1);const c=bv(a,l);if(i.dirty&&wo(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const h=c.crossesNgTemplate?pf(a,s,l,[]):ka(a,s,c,l);i.reset(h,hw),i.notifyOnChanges()}return!0}return!1}function Bs(i,s,a,l){const c=$t();if(c.firstCreatePass){const h=_n();(function Rw(i,s,a){null===i.queries&&(i.queries=new kg),i.queries.track(new Fg(s,a))})(c,new dd(s,a,l),h.index),function Al(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Fa(i,s,a){const l=new Ev(4==(4&a));d0(i,s,l,l.destroy),null===s[19]&&(s[19]=new Iv),s[19].queries.push(new cd(l))}(c,xe(),a)}function Mw(){return function gf(i,s){return i[19].queries[s].queryList}(xe(),sc())}function bv(i,s){return i.queries.getByIndex(s)}function Bg(...i){}const _f=new Dn("Application Initializer");let Ed=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Bg,this.reject=Bg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Oy(h))a.push(h);else if(Eb(h)){const y=new Promise((E,I)=>{h.subscribe({complete:E,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(S(_f,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ov=new Dn("AppId",{providedIn:"root",factory:function Pv(){return`${kv()}${kv()}${kv()}`}});function kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vw=new Dn("Platform Initializer"),lC=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Fv=new Dn("appBootstrapListener");let cC=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Lv=new Dn("LocaleId",{providedIn:"root",factory:()=>Y(Lv,pt.Optional|pt.SkipSelf)||function dC(){return"undefined"!=typeof $localize&&$localize.locale||vu}()}),Mu=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Uw{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Va=(()=>{class i{compileModuleSync(a){return new vv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),h=jo(nt(a).declarations).reduce((y,E)=>{const I=Xe(E);return I&&y.push(new Mg(I)),y},[]);return new Uw(l,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const jw=(()=>Promise.resolve(0))();function If(i){"undefined"==typeof Zone?jw.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ps{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zo(!1),this.onMicrotaskEmpty=new zo(!1),this.onStable=new zo(!1),this.onError=new zo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Vv(){let i=zt.requestAnimationFrame,s=zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Df(i){const s=()=>{!function $g(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(zt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Hg(i),i.isCheckStableRunning=!0,si(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Hg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,h,y,E)=>{try{return Gg(i),a.invokeTask(c,h,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),qg(i)}},onInvoke:(a,l,c,h,y,E,I)=>{try{return Gg(i),a.invoke(c,h,y,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),qg(i)}},onHasTask:(a,l,c,h)=>{a.hasTask(c,h),l===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Hg(i),si(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,c,h)=>(a.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ps.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ps.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+c,s,wd,Bg,Bg);try{return h.runTask(y,a,l)}finally{h.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const wd={};function si(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Hg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Gg(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function qg(i){i._nesting--,si(i)}class $w{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zo,this.onMicrotaskEmpty=new zo,this.onStable=new zo,this.onError=new zo}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Uv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ps.assertNotInAngularZone(),If(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())If(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(S(ps))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),fC=(()=>{class i{constructor(){this._applications=new Map,zg.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return zg.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Hw{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function Gw(i){zg=i}let zg=new Hw,Zo=null;const qw=new Dn("AllowMultipleToken"),zw=new Dn("PlatformOnDestroy");class Zw{constructor(s,a){this.name=s,this.token=a}}function Bv(i,s,a=[]){const l=`Platform: ${s}`,c=new Dn(l);return(h=[])=>{let y=Nl();if(!y||y.injector.get(qw,!1)){const E=[...a,...h,{provide:c,useValue:!0}];i?i(E):function Rl(i){if(Zo&&!Zo.get(qw,!1))throw new Pe(400,"");Zo=i;const s=i.get(Yw),a=i.get(Vw,null);a&&a.forEach(l=>l())}(function Kw(i=[],s){return Ht.create({name:s,providers:[{provide:C0,useValue:"platform"},{provide:zw,useValue:()=>Zo=null},...i]})}(E,l))}return function Id(i){const s=Nl();if(!s)throw new Pe(401,"");return s}()}}function Nl(){var i;return null!==(i=null==Zo?void 0:Zo.get(Yw))&&void 0!==i?i:null}let Yw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function gC(i,s){let a;return a="noop"===i?new $w:("zone.js"===i?void 0:i)||new ps({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:ps,useValue:E}];return E.run(()=>{const T=Ht.create({providers:I,parent:this.injector,name:a.moduleType.name}),M=a.create(T),F=M.injector.get(Wt,null);if(!F)throw new Pe(402,"");return E.runOutsideAngular(()=>{const $=E.onError.subscribe({next:Q=>{F.handleError(Q)}});M.onDestroy(()=>{Wg(this._modules,M),$.unsubscribe()})}),function Hn(i,s,a){try{const l=a();return Oy(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(F,E,()=>{const $=M.injector.get(Ed);return $.runInitializers(),$.donePromise.then(()=>(function td(i){Rt(i,"Expected localeId to be defined"),"string"==typeof i&&(FE=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Lv,vu)||vu),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const c=Cf({},l);return function Ww(i,s,a){const l=new vv(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(a){const l=a.injector.get(Dd);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Pe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(zw,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(S(Ht))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Cf(i,s){return Array.isArray(s)?s.reduce(Cf,i):Object.assign(Object.assign({},i),s)}let Dd=(()=>{class i{constructor(a,l,c,h){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new O.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ps.assertNotInAngularZone(),If(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ie.T)(y,E.pipe((0,ae.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Pe(405,"");let c;c=a instanceof fv?a:this._injector.get(af).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const h=function Ml(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Hr),E=c.create(Ht.NULL,[],l||c.selector,h),I=E.location.nativeElement,T=E.injector.get(Uv,null),M=T&&E.injector.get(fC);return T&&M&&M.registerApplication(I,T),E.onDestroy(()=>{this.detachView(E.hostView),Wg(this.components,E),M&&M.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Wg(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Fv,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(S(ps),S(Ht),S(Wt),S(Ed))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Wg(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Jw=!0,jv=!1;function bd(){return jv=!0,Jw}function Ua(){if(jv)throw new Error("Cannot enable prod mode after platform setup.");Jw=!1}let Cd=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hv,i})();function Hv(i){return function vC(i,s,a){if(Ba(i)&&!a){const l=sr(i.index,s);return new Dl(l,l)}return 47&i.type?new Dl(s[16],s):null}(_n(),xe(),16==(16&i))}class Kv{constructor(){}supports(s){return Hc(s)}create(s){return new bC(s)}}const eI=(i,s)=>s;class bC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||eI}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,h=null;for(;a||l;){const y=!l||a&&a.currentIndex<iI(l,c,h)?a:l,E=iI(y,c,h),I=y.currentIndex;if(y===l)c--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{h||(h=[]);const T=E-c,M=I-c;if(T!=M){for(let $=0;$<T;$++){const Q=$<h.length?h[$]:h[$]=0,ve=Q+$;M<=ve&&ve<T&&(h[$]=Q+1)}h[y.previousIndex]=M-T}}E!==I&&s(y,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Hc(s))throw new Pe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)h=s[E],y=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,h,y,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,E),l=!0),a=a._next}else c=0,function ib(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[$c()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{y=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,c)):s=this._addAfter(new tI(a,l),h,c),s}_verifyReinsertion(s,a,l,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new rI),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class tI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class rI{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new nI,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iI(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class sI{constructor(){}supports(s){return s instanceof Map||Ey(s)}create(){return new Sf}}class Sf{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ey(s)))throw new Pe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const h=c._prev,y=c._next;return h&&(h._next=y),y&&(y._prev=h),c._next=null,c._prev=null,c}const l=new oI(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class oI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aI(){return new vr([new Kv])}let vr=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||aI()),deps:[[i,new tr,new it]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Pe(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:aI}),i})();function Yv(){return new Fl([new sI])}let Fl=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Yv()),deps:[[i,new tr,new it]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new Pe(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Yv}),i})();const lI=Bv(null,"core",[]);let cI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(S(Dd))},i.\u0275mod=U({type:i}),i.\u0275inj=Zt({}),i})()},3942:(rt,Ie,k)=>{k.d(Ie,{Z:()=>Pe});var p=k(2090),j=k(4859),O=k(9681),ie=k(1877);class ae{constructor(pe,De){this._delegate=pe,this.firebase=De,(0,O._addComponent)(pe,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,De=O._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const He=this._delegate.container.getProvider(pe);return!He.isInitialized()&&"EXPLICIT"===(null===(qe=He.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&He.initialize(),He.getImmediate({identifier:De})}_removeServiceInstance(pe,De=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(De)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function me(){const je=function oe(je){const pe={},De={__esModule:!0,initializeApp:function Re(ee,he={}){const _e=O.initializeApp(ee,he);if((0,p.r3)(pe,_e.name))return pe[_e.name];const Z=new je(_e,De);return pe[_e.name]=Z,Z},app:He,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(ee){const he=ee.name,_e=he.replace("-compat","");if(O._registerComponent(ee)&&"PUBLIC"===ee.type){const Z=(X=He())=>{if("function"!=typeof X[_e])throw fe.create("invalid-app-argument",{appName:he});return X[_e]()};void 0!==ee.serviceProps&&(0,p.ZB)(Z,ee.serviceProps),De[_e]=Z,je.prototype[_e]=function(...X){return this._getService.bind(this,he).apply(this,ee.multipleInstances?X:[])}}return"PUBLIC"===ee.type?De[_e]:null},removeApp:function qe(ee){delete pe[ee]},useAsService:function Ge(ee,he){return"serverAuth"===he?null:he},modularAPIs:O}};function He(ee){if(!(0,p.r3)(pe,ee=ee||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:ee});return pe[ee]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ce(){return Object.keys(pe).map(ee=>pe[ee])}}),He.App=je,De}(ae);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function pe(De){(0,p.ZB)(je,De)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),je}(),H=new ie.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=q;!function Se(je){(0,O.registerVersion)("@firebase/app-compat","0.1.39",je)}()},9681:(rt,Ie,k)=>{k.r(Ie),k.d(Ie,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>_i,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>un,_addOrOverwriteComponent:()=>Xt,_apps:()=>an,_clearComponents:()=>Fr,_components:()=>vn,_getProvider:()=>Zt,_registerComponent:()=>Ut,_removeServiceInstance:()=>bn,deleteApp:()=>pt,getApp:()=>Vn,getApps:()=>Ni,initializeApp:()=>ui,onLog:()=>ln,registerVersion:()=>gn,setLogLevel:()=>hr});var p=k(5861),j=k(4859),O=k(1877),ie=k(2090),ae=k(8766);class ge{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function fe(Qe){const be=Qe.getComponent();return"VERSION"===(null==be?void 0:be.type)}(We)){const mt=We.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(We=>We).join(" ")}}const oe="@firebase/app",q=new O.Yd("@firebase/app"),Rt="[DEFAULT]",ze={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,vn=new Map;function un(Qe,be){try{Qe.container.addComponent(be)}catch(We){q.debug(`Component ${be.name} failed to register with FirebaseApp ${Qe.name}`,We)}}function Xt(Qe,be){Qe.container.addOrOverwriteComponent(be)}function Ut(Qe){const be=Qe.name;if(vn.has(be))return q.debug(`There were multiple attempts to register component ${be}.`),!1;vn.set(be,Qe);for(const We of an.values())un(We,Qe);return!0}function Zt(Qe,be){const We=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),Qe.container.getProvider(be)}function bn(Qe,be,We=Rt){Zt(Qe,be).clearInstance(We)}function Fr(){vn.clear()}const Sn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qi{constructor(be,We,mt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const _i="9.14.0";function ui(Qe,be={}){let We=Qe;"object"!=typeof be&&(be={name:be});const mt=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},be),gt=mt.name;if("string"!=typeof gt||!gt)throw Sn.create("bad-app-name",{appName:String(gt)});if(We||(We=(0,ie.aH)()),!We)throw Sn.create("no-options");const en=an.get(gt);if(en){if((0,ie.vZ)(We,en.options)&&(0,ie.vZ)(mt,en.config))return en;throw Sn.create("duplicate-app",{appName:gt})}const G=new j.H0(gt);for(const W of vn.values())G.addComponent(W);const B=new qi(We,mt,G);return an.set(gt,B),B}function Vn(Qe=Rt){const be=an.get(Qe);if(!be&&Qe===Rt)return ui();if(!be)throw Sn.create("no-app",{appName:Qe});return be}function Ni(){return Array.from(an.values())}function pt(Qe){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(Qe){const be=Qe.name;an.has(be)&&(an.delete(be),yield Promise.all(Qe.container.getProviders().map(We=>We.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function gn(Qe,be,We){var mt;let gt=null!==(mt=ze[Qe])&&void 0!==mt?mt:Qe;We&&(gt+=`-${We}`);const en=gt.match(/\s|\//),G=be.match(/\s|\//);if(en||G){const B=[`Unable to register library "${gt}" with version "${be}":`];return en&&B.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),en&&G&&B.push("and"),G&&B.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void q.warn(B.join(" "))}Ut(new j.wA(`${gt}-version`,()=>({library:gt,version:be}),"VERSION"))}function ln(Qe,be){if(null!==Qe&&"function"!=typeof Qe)throw Sn.create("invalid-log-argument");(0,O.Am)(Qe,be)}function hr(Qe){(0,O.Ub)(Qe)}const In="firebase-heartbeat-store";let Yn=null;function zi(){return Yn||(Yn=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(Qe,be)=>{0===be&&Qe.createObjectStore(In)}}).catch(Qe=>{throw Sn.create("idb-open",{originalErrorMessage:Qe.message})})),Yn}function lt(){return(lt=(0,p.Z)(function*(Qe){var be;try{return(yield zi()).transaction(In).objectStore(In).get(Lr(Qe))}catch(We){if(We instanceof ie.ZR)q.warn(We.message);else{const mt=Sn.create("idb-get",{originalErrorMessage:null===(be=We)||void 0===be?void 0:be.message});q.warn(mt.message)}}})).apply(this,arguments)}function tt(Qe,be){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(Qe,be){var We;try{const gt=(yield zi()).transaction(In,"readwrite");return yield gt.objectStore(In).put(be,Lr(Qe)),gt.done}catch(mt){if(mt instanceof ie.ZR)q.warn(mt.message);else{const gt=Sn.create("idb-set",{originalErrorMessage:null===(We=mt)||void 0===We?void 0:We.message});q.warn(gt.message)}}})).apply(this,arguments)}function Lr(Qe){return`${Qe.name}!${Qe.options.appId}`}class Un{constructor(be){this.container=be,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new zr(We),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var be=this;return(0,p.Z)(function*(){const mt=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=fn();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==gt&&!be._heartbeatsCache.heartbeats.some(en=>en.date===gt))return be._heartbeatsCache.heartbeats.push({date:gt,agent:mt}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(en=>{const G=new Date(en.date).valueOf();return Date.now()-G<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,p.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const We=fn(),{heartbeatsToSend:mt,unsentEntries:gt}=function dt(Qe,be=1024){const We=[];let mt=Qe.slice();for(const gt of Qe){const en=We.find(G=>G.agent===gt.agent);if(en){if(en.dates.push(gt.date),jt(We)>be){en.dates.pop();break}}else if(We.push({agent:gt.agent,dates:[gt.date]}),jt(We)>be){We.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:We,unsentEntries:mt}}(be._heartbeatsCache.heartbeats),en=(0,ie.L)(JSON.stringify({version:2,heartbeats:mt}));return be._heartbeatsCache.lastSentHeartbeatDate=We,gt.length>0?(be._heartbeatsCache.heartbeats=gt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),en})()}}function fn(){return(new Date).toISOString().substring(0,10)}class zr{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,p.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function qt(Qe){return lt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var We=this;return(0,p.Z)(function*(){var mt;if(yield We._canUseIndexedDBPromise){const en=yield We.read();return tt(We.app,{lastSentHeartbeatDate:null!==(mt=be.lastSentHeartbeatDate)&&void 0!==mt?mt:en.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var We=this;return(0,p.Z)(function*(){var mt;if(yield We._canUseIndexedDBPromise){const en=yield We.read();return tt(We.app,{lastSentHeartbeatDate:null!==(mt=be.lastSentHeartbeatDate)&&void 0!==mt?mt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...be.heartbeats]})}})()}}function jt(Qe){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function Gn(Qe){Ut(new j.wA("platform-logger",be=>new ge(be),"PRIVATE")),Ut(new j.wA("heartbeat",be=>new Un(be),"PRIVATE")),gn(oe,"0.8.4",Qe),gn(oe,"0.8.4","esm2017"),gn("fire-js","")}("")},4859:(rt,Ie,k)=>{k.d(Ie,{H0:()=>oe,wA:()=>O});var p=k(5861),j=k(2090);class O{constructor(q,H,te){this.name=q,this.instanceFactory=H,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ie="[DEFAULT]";class ae{constructor(q,H){this.name=q,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const H=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(H)){const te=new j.BH;if(this.instancesDeferred.set(H,te),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:H});Ue&&te.resolve(Ue)}catch(Ue){}}return this.instancesDeferred.get(H).promise}getImmediate(q){var H;const te=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),Ue=null!==(H=null==q?void 0:q.optional)&&void 0!==H&&H;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Se){if(Ue)return null;throw Se}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function fe(me){return"EAGER"===me.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(H){}for(const[H,te]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:Ue});te.resolve(Se)}catch(Se){}}}}clearInstance(q=ie){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,p.Z)(function*(){const H=Array.from(q.instances.values());yield Promise.all([...H.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...H.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ie){return this.instances.has(q)}getOptions(q=ie){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:H={}}=q,te=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:te,options:H});for(const[Se,Pe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Se)&&Pe.resolve(Ue);return Ue}onInit(q,H){var te;const Ue=this.normalizeInstanceIdentifier(H),Se=null!==(te=this.onInitCallbacks.get(Ue))&&void 0!==te?te:new Set;Se.add(q),this.onInitCallbacks.set(Ue,Se);const Pe=this.instances.get(Ue);return Pe&&q(Pe,Ue),()=>{Se.delete(q)}}invokeOnInitCallbacks(q,H){const te=this.onInitCallbacks.get(H);if(te)for(const Ue of te)try{Ue(q,H)}catch(Se){}}getOrInitializeService({instanceIdentifier:q,options:H={}}){let te=this.instances.get(q);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(me=q,me===ie?void 0:me),options:H}),this.instances.set(q,te),this.instancesOptions.set(q,H),this.invokeOnInitCallbacks(te,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,te)}catch(Ue){}var me;return te||null}normalizeInstanceIdentifier(q=ie){return this.component?this.component.multipleInstances?q:ie:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const H=this.getProvider(q.name);if(H.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);H.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const H=new ae(q,this);return this.providers.set(q,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,Ie,k)=>{k.d(Ie,{Am:()=>me,Ub:()=>oe,Yd:()=>fe,in:()=>j});const p=[];var j=(()=>{return(q=j||(j={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",j;var q})();const O={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ie=j.INFO,ae={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ge=(q,H,...te)=>{if(H<q.logLevel)return;const Ue=(new Date).toISOString(),Se=ae[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${Ue}]  ${q.name}:`,...te)};class fe{constructor(H){this.name=H,this._logLevel=ie,this._logHandler=ge,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in j))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...H),this._logHandler(this,j.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...H),this._logHandler(this,j.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,j.INFO,...H),this._logHandler(this,j.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,j.WARN,...H),this._logHandler(this,j.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...H),this._logHandler(this,j.ERROR,...H)}}function oe(q){p.forEach(H=>{H.setLogLevel(q)})}function me(q,H){for(const te of p){let Ue=null;H&&H.level&&(Ue=O[H.level]),te.userLogHandler=null===q?null:(Se,Pe,...je)=>{const pe=je.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(qe){return null}}).filter(De=>De).join(" ");Pe>=(null!=Ue?Ue:Se.logLevel)&&q({level:j[Pe].toLowerCase(),message:pe,args:je,type:Se.name})}}}},8766:(rt,Ie,k)=>{k.d(Ie,{Lj:()=>Re,X3:()=>He});var p=k(5861);let O,ie;const fe=new WeakMap,oe=new WeakMap,me=new WeakMap,q=new WeakMap,H=new WeakMap;let Se={get(he,_e,Z){if(he instanceof IDBTransaction){if("done"===_e)return oe.get(he);if("objectStoreNames"===_e)return he.objectStoreNames||me.get(he);if("store"===_e)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return De(he[_e])},set:(he,_e,Z)=>(he[_e]=Z,!0),has:(he,_e)=>he instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in he};function pe(he){return"function"==typeof he?function je(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(..._e){return he.apply(qe(this),_e),De(fe.get(this))}:function(..._e){return De(he.apply(qe(this),_e))}:function(_e,...Z){const X=he.call(qe(this),_e,...Z);return me.set(X,_e.sort?_e.sort():[_e]),De(X)}}(he):(he instanceof IDBTransaction&&function Ue(he){if(oe.has(he))return;const _e=new Promise((Z,X)=>{const ne=()=>{he.removeEventListener("complete",ye),he.removeEventListener("error",le),he.removeEventListener("abort",le)},ye=()=>{Z(),ne()},le=()=>{X(he.error||new DOMException("AbortError","AbortError")),ne()};he.addEventListener("complete",ye),he.addEventListener("error",le),he.addEventListener("abort",le)});oe.set(he,_e)}(he),((he,_e)=>_e.some(Z=>he instanceof Z))(he,function ae(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Se):he)}function De(he){if(he instanceof IDBRequest)return function te(he){const _e=new Promise((Z,X)=>{const ne=()=>{he.removeEventListener("success",ye),he.removeEventListener("error",le)},ye=()=>{Z(De(he.result)),ne()},le=()=>{X(he.error),ne()};he.addEventListener("success",ye),he.addEventListener("error",le)});return _e.then(Z=>{Z instanceof IDBCursor&&fe.set(Z,he)}).catch(()=>{}),H.set(_e,he),_e}(he);if(q.has(he))return q.get(he);const _e=pe(he);return _e!==he&&(q.set(he,_e),H.set(_e,he)),_e}const qe=he=>H.get(he);function He(he,_e,{blocked:Z,upgrade:X,blocking:ne,terminated:ye}={}){const le=indexedDB.open(he,_e),ke=De(le);return X&&le.addEventListener("upgradeneeded",ut=>{X(De(le.result),ut.oldVersion,ut.newVersion,De(le.transaction))}),Z&&le.addEventListener("blocked",()=>Z()),ke.then(ut=>{ye&&ut.addEventListener("close",()=>ye()),ne&&ut.addEventListener("versionchange",()=>ne())}).catch(()=>{}),ke}function Re(he,{blocked:_e}={}){const Z=indexedDB.deleteDatabase(he);return _e&&Z.addEventListener("blocked",()=>_e()),De(Z).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ge=new Map;function ee(he,_e){if(!(he instanceof IDBDatabase)||_e in he||"string"!=typeof _e)return;if(Ge.get(_e))return Ge.get(_e);const Z=_e.replace(/FromIndex$/,""),X=_e!==Z,ne=Ee.includes(Z);if(!(Z in(X?IDBIndex:IDBObjectStore).prototype)||!ne&&!Ce.includes(Z))return;const ye=function(){var le=(0,p.Z)(function*(ke,...ut){const Jt=this.transaction(ke,ne?"readwrite":"readonly");let Rt=Jt.store;return X&&(Rt=Rt.index(ut.shift())),(yield Promise.all([Rt[Z](...ut),ne&&Jt.done]))[0]});return function(ut){return le.apply(this,arguments)}}();return Ge.set(_e,ye),ye}!function Pe(he){Se=he(Se)}(he=>_M(vM({},he),{get:(_e,Z,X)=>ee(_e,Z)||he.get(_e,Z,X),has:(_e,Z)=>!!ee(_e,Z)||he.has(_e,Z)}))},5861:(rt,Ie,k)=>{function p(O,ie,ae,ge,fe,oe,me){try{var q=O[oe](me),H=q.value}catch(te){return void ae(te)}q.done?ie(H):Promise.resolve(H).then(ge,fe)}function j(O){return function(){var ie=this,ae=arguments;return new Promise(function(ge,fe){var oe=O.apply(ie,ae);function me(H){p(oe,ge,fe,me,q,"next",H)}function q(H){p(oe,ge,fe,me,q,"throw",H)}me(void 0)})}}k.d(Ie,{Z:()=>j})}},rt=>{rt(rt.s=2938)}]);